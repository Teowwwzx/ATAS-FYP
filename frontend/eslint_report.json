[{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(admin)\\admin\\audit-logs\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mutate' is assigned a value but never used.","line":33,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":33,"endColumn":31}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState } from 'react'\r\nimport useSWR from 'swr'\r\nimport { adminService } from '@/services/admin.service'\r\nimport { AuditLogsTable } from '@/components/admin/AuditLogsTable'\r\nimport { MagnifyingGlassIcon } from '@radix-ui/react-icons'\r\nimport { Pagination } from '@/components/ui/Pagination'\r\n\r\nconst DEFAULT_PAGE_SIZE = 20\r\n\r\nexport default function AuditLogsPage() {\r\n    const [page, setPage] = useState(1)\r\n    const [pageSize, setPageSize] = useState(DEFAULT_PAGE_SIZE)\r\n    const [actionFilter, setActionFilter] = useState('')\r\n    const [actorFilter, setActorFilter] = useState('')\r\n    const [targetTypeFilter, setTargetTypeFilter] = useState('')\r\n    const [targetIdFilter, setTargetIdFilter] = useState('')\r\n    const [startDate, setStartDate] = useState('')\r\n    const [endDate, setEndDate] = useState('')\r\n\r\n    const queryParams = {\r\n        page,\r\n        page_size: pageSize,\r\n        action: actionFilter || undefined,\r\n        start_after: startDate || undefined,\r\n        end_before: endDate || undefined,\r\n        actor_user_id: actorFilter || undefined,\r\n        target_type: targetTypeFilter || undefined,\r\n        target_id: targetIdFilter || undefined,\r\n    }\r\n\r\n    const { data: logs, mutate } = useSWR(\r\n        ['/admin/audit-logs', queryParams],\r\n        () => adminService.getAuditLogs(queryParams)\r\n    )\r\n\r\n    const { data: totalCount } = useSWR(\r\n        ['/admin/audit-logs/count', {\r\n            action: queryParams.action,\r\n            actor_user_id: queryParams.actor_user_id,\r\n            target_type: queryParams.target_type,\r\n            target_id: queryParams.target_id,\r\n            start_after: queryParams.start_after,\r\n            end_before: queryParams.end_before,\r\n        }],\r\n        () => adminService.getAuditLogsCount({\r\n            action: queryParams.action,\r\n            actor_user_id: queryParams.actor_user_id,\r\n            target_type: queryParams.target_type,\r\n            target_id: queryParams.target_id,\r\n            start_after: queryParams.start_after,\r\n            end_before: queryParams.end_before,\r\n        })\r\n    )\r\n\r\n    const totalPages = totalCount ? Math.ceil(totalCount / pageSize) : 0\r\n\r\n    return (\r\n        <div className=\"space-y-8\">\r\n            <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                    <h1 className=\"text-2xl font-bold text-gray-900\">Audit Logs</h1>\r\n                    <p className=\"text-gray-500 mt-1\">View system activities</p>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-center gap-4 bg-white p-4 rounded-xl shadow-sm border border-gray-100\">\r\n                <div className=\"relative flex-1\">\r\n                    <MagnifyingGlassIcon className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\" />\r\n                    <input\r\n                        type=\"text\"\r\n                        placeholder=\"Filter by action...\"\r\n                        value={actionFilter}\r\n                        onChange={(e) => { setActionFilter(e.target.value); setPage(1) }}\r\n                        className=\"w-full pl-10 pr-4 py-2 bg-white border border-gray-200 rounded-lg text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all\"\r\n                    />\r\n                </div>\r\n                <input\r\n                    type=\"date\"\r\n                    value={startDate}\r\n                    onChange={(e) => { setStartDate(e.target.value); setPage(1) }}\r\n                    className=\"px-4 py-2 bg-white border border-gray-200 rounded-lg text-gray-900 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all\"\r\n                />\r\n                <input\r\n                    type=\"date\"\r\n                    value={endDate}\r\n                    onChange={(e) => { setEndDate(e.target.value); setPage(1) }}\r\n                    className=\"px-4 py-2 bg-white border border-gray-200 rounded-lg text-gray-900 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all\"\r\n                />\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"Actor user id...\"\r\n                    value={actorFilter}\r\n                    onChange={(e) => { setActorFilter(e.target.value); setPage(1) }}\r\n                    className=\"px-4 py-2 bg-white border border-gray-200 rounded-lg text-gray-900 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all\"\r\n                />\r\n                <select\r\n                    value={targetTypeFilter}\r\n                    onChange={(e) => { setTargetTypeFilter(e.target.value); setPage(1) }}\r\n                    className=\"px-4 py-2 bg-white border border-gray-200 rounded-lg text-gray-900 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all\"\r\n                >\r\n                    <option value=\"\">All Target Types</option>\r\n                    <option value=\"user\">user</option>\r\n                    <option value=\"event\">event</option>\r\n                    <option value=\"organization\">organization</option>\r\n                    <option value=\"notification\">notification</option>\r\n                </select>\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"Target id...\"\r\n                    value={targetIdFilter}\r\n                    onChange={(e) => { setTargetIdFilter(e.target.value); setPage(1) }}\r\n                    className=\"px-4 py-2 bg-white border border-gray-200 rounded-lg text-gray-900 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all\"\r\n                />\r\n                <select\r\n                    value={pageSize}\r\n                    onChange={(e) => { setPageSize(parseInt(e.target.value, 10)); setPage(1) }}\r\n                    className=\"px-4 py-2 bg-white border border-gray-200 rounded-lg text-gray-900 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all\"\r\n                >\r\n                    <option value={10}>10</option>\r\n                    <option value={20}>20</option>\r\n                    <option value={50}>50</option>\r\n                </select>\r\n            </div>\r\n\r\n            <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden\">\r\n                <AuditLogsTable logs={logs || []} />\r\n                <Pagination\r\n                    currentPage={page}\r\n                    totalPages={totalPages}\r\n                    onPageChange={setPage}\r\n                    totalItems={totalCount}\r\n                    pageSize={pageSize}\r\n                />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(admin)\\admin\\categories\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":17,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":38,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":38,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { listCategories, createCategory } from '@/services/api'\r\nimport type { CategoryResponse } from '@/services/api.types'\r\nimport { toast } from 'react-hot-toast'\r\n\r\nexport default function AdminCategoriesPage() {\r\n    const [categories, setCategories] = useState<CategoryResponse[]>([])\r\n    const [name, setName] = useState('')\r\n    const [isLoading, setIsLoading] = useState(false)\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n            const list = await listCategories()\r\n            setCategories(list)\r\n        } catch (e) {\r\n            toast.error('Failed to load categories')\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        fetchData()\r\n    }, [])\r\n\r\n    const handleCreate = async (e: React.FormEvent) => {\r\n        e.preventDefault()\r\n        if (!name.trim()) {\r\n            toast.error('Category name is required')\r\n            return\r\n        }\r\n        setIsLoading(true)\r\n        try {\r\n            await createCategory({ name })\r\n            toast.success('Category created')\r\n            setName('')\r\n            fetchData()\r\n        } catch (e) {\r\n            toast.error('Failed to create category')\r\n        } finally {\r\n            setIsLoading(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-8\">\r\n            <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                    <h1 className=\"text-2xl font-bold text-gray-900\">Categories</h1>\r\n                    <p className=\"text-gray-500 mt-1\">Manage tag library used for discovery</p>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n                <div className=\"lg:col-span-2 bg-white rounded-xl shadow-sm border border-gray-100\">\r\n                    <div className=\"p-4\">\r\n                        <div className=\"w-full overflow-x-auto rounded-lg border border-gray-200\">\r\n                            <table className=\"min-w-full divide-y divide-gray-200\">\r\n                                <thead className=\"bg-gray-50\">\r\n                                    <tr>\r\n                                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Name</th>\r\n                                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Created</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                                    {categories.map((c) => (\r\n                                        <tr key={c.id}>\r\n                                            <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">{c.name}</td>\r\n                                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                                                {c.created_at ? new Date(c.created_at).toLocaleDateString() : '-'}\r\n                                            </td>\r\n                                        </tr>\r\n                                    ))}\r\n                                    {categories.length === 0 && (\r\n                                        <tr>\r\n                                            <td className=\"px-6 py-4 text-sm text-gray-500\" colSpan={2}>No categories yet.</td>\r\n                                        </tr>\r\n                                    )}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-6\">\r\n                    <h2 className=\"text-lg font-semibold text-gray-900 mb-4\">Create Category</h2>\r\n                    <form onSubmit={handleCreate} className=\"space-y-4\">\r\n                        <div>\r\n                            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Name</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                value={name}\r\n                                onChange={(e) => setName(e.target.value)}\r\n                                className=\"w-full px-4 py-2 rounded-lg border border-gray-200 focus:border-yellow-400 focus:ring-0 transition-colors\"\r\n                                placeholder=\"e.g., Python\"\r\n                                required\r\n                            />\r\n                        </div>\r\n                        <button\r\n                            type=\"submit\"\r\n                            disabled={isLoading}\r\n                            className=\"w-full px-6 py-3 bg-gray-900 text-white font-medium rounded-lg hover:bg-gray-800 transition-colors disabled:opacity-50\"\r\n                        >\r\n                            {isLoading ? 'Creating...' : 'Create'}\r\n                        </button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(admin)\\admin\\communications\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setPage' is assigned a value but never used.","line":11,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":25}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n\"use client\"\r\n\r\nimport React, { useState } from 'react'\r\nimport useSWR, { mutate } from 'swr'\r\nimport { adminService } from '@/services/admin.service'\r\nimport { Toaster, toast } from 'react-hot-toast'\r\nimport { format } from 'date-fns'\r\n\r\nexport default function CommunicationLogsPage() {\r\n    const [page, setPage] = useState(1)\r\n    const [statusFilter, setStatusFilter] = useState('')\r\n    const [resendingId, setResendingId] = useState<string | null>(null)\r\n\r\n    const { data: logs, error, isLoading } = useSWR(\r\n        ['/admin/communications', page, statusFilter],\r\n        () => adminService.getCommunicationLogs({ page, status: statusFilter || undefined })\r\n    )\r\n\r\n    const handleResend = async (id: string) => {\r\n        setResendingId(id)\r\n        try {\r\n            await adminService.resendCommunication(id)\r\n            toast.success('Email resent successfully!')\r\n            mutate(['/admin/communications', page, statusFilter]) // Refresh list\r\n        } catch (err) {\r\n            console.error(err)\r\n            toast.error('Failed to resend email')\r\n        } finally {\r\n            setResendingId(null)\r\n        }\r\n    }\r\n\r\n    if (error) return <div className=\"p-8 text-red-500\">Failed to load logs</div>\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <Toaster />\r\n\r\n            <div className=\"flex justify-between items-center\">\r\n                <h1 className=\"text-2xl font-bold text-slate-900\">Communication Logs</h1>\r\n                <div className=\"flex gap-2\">\r\n                    <select\r\n                        value={statusFilter}\r\n                        onChange={(e) => setStatusFilter(e.target.value)}\r\n                        className=\"px-4 py-2 rounded-lg border border-slate-200 text-sm focus:outline-none focus:border-indigo-500\"\r\n                    >\r\n                        <option value=\"\">All Status</option>\r\n                        <option value=\"sent\">Sent</option>\r\n                        <option value=\"failed\">Failed</option>\r\n                        <option value=\"pending\">Pending</option>\r\n                    </select>\r\n                    <button\r\n                        onClick={() => mutate(['/admin/communications', page, statusFilter])}\r\n                        className=\"px-4 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 rounded-lg text-sm font-medium transition-colors\"\r\n                    >\r\n                        Refresh\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden\">\r\n                <div className=\"overflow-x-auto\">\r\n                    <table className=\"w-full text-sm text-left\">\r\n                        <thead className=\"bg-slate-50 text-slate-500 font-medium border-b border-slate-200\">\r\n                            <tr>\r\n                                <th className=\"px-6 py-4\">Recipient</th>\r\n                                <th className=\"px-6 py-4\">Subject</th>\r\n                                <th className=\"px-6 py-4\">Status</th>\r\n                                <th className=\"px-6 py-4\">Time</th>\r\n                                <th className=\"px-6 py-4\">Error / Actions</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"divide-y divide-slate-100\">\r\n                            {isLoading ? (\r\n                                Array.from({ length: 5 }).map((_, i) => (\r\n                                    <tr key={i} className=\"animate-pulse\">\r\n                                        <td colSpan={5} className=\"px-6 py-4\">\r\n                                            <div className=\"h-4 bg-slate-100 rounded w-3/4\"></div>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))\r\n                            ) : logs && logs.length > 0 ? (\r\n                                logs.map((log) => (\r\n                                    <tr key={log.id} className=\"hover:bg-slate-50 transition-colors\">\r\n                                        <td className=\"px-6 py-4 font-medium text-slate-900\">\r\n                                            {log.recipient}\r\n                                            <div className=\"text-xs text-slate-400 font-normal uppercase mt-0.5\">{log.type}</div>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 text-slate-600 max-w-xs truncate\" title={log.subject || ''}>\r\n                                            {log.subject || '-'}\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4\">\r\n                                            <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold capitalize\r\n                                                ${log.status === 'sent' ? 'bg-emerald-100 text-emerald-700' :\r\n                                                    log.status === 'failed' ? 'bg-red-100 text-red-700' :\r\n                                                        'bg-amber-100 text-amber-700'}`}>\r\n                                                {log.status === 'sent' && <svg className=\"w-3 h-3 mr-1\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M5 13l4 4L19 7\" /></svg>}\r\n                                                {log.status === 'failed' && <svg className=\"w-3 h-3 mr-1\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\" /></svg>}\r\n                                                {log.status}\r\n                                            </span>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 text-slate-500\">\r\n                                            {log.created_at ? format(new Date(log.created_at), 'MMM d, h:mm a') : '-'}\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4\">\r\n                                            <div className=\"flex items-center gap-3\">\r\n                                                {log.status === 'failed' && (\r\n                                                    <button\r\n                                                        onClick={() => handleResend(log.id)}\r\n                                                        disabled={resendingId === log.id}\r\n                                                        className=\"px-3 py-1.5 bg-white border border-slate-300 text-slate-700 hover:bg-slate-50 rounded-lg text-xs font-bold transition-all disabled:opacity-50 shadow-sm\"\r\n                                                    >\r\n                                                        {resendingId === log.id ? 'Sending...' : 'Retry Send'}\r\n                                                    </button>\r\n                                                )}\r\n                                                {log.error_message && (\r\n                                                    <span className=\"text-xs text-red-500 max-w-[200px] truncate\" title={log.error_message}>\r\n                                                        {log.error_message}\r\n                                                    </span>\r\n                                                )}\r\n                                            </div>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))\r\n                            ) : (\r\n                                <tr>\r\n                                    <td colSpan={5} className=\"px-6 py-12 text-center text-slate-400\">\r\n                                        No logs found.\r\n                                    </td>\r\n                                </tr>\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(admin)\\admin\\email-templates\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":16,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":16,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[697,700],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[697,700],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"The 'templates' logical expression could make the dependencies of useMemo Hook (at line 31) change on every render. Move it inside the useMemo callback. Alternatively, wrap the initialization of 'templates' in its own useMemo() Hook.","line":30,"column":9,"nodeType":"VariableDeclarator","endLine":30,"endColumn":52},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":270,"column":19,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":270,"endColumn":65,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[15062,15108],"text":"// @ts-expect-error - implement endpoint server-side"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useEffect, useMemo, useState } from 'react'\r\nimport useSWR from 'swr'\r\nimport * as Dialog from '@radix-ui/react-dialog'\r\nimport { toast } from 'react-hot-toast'\r\nimport { adminService } from '@/services/admin.service'\r\nimport type { EmailTemplate } from '@/services/api.types'\r\nimport { ConfirmationModal } from '@/components/ui/ConfirmationModal'\r\n\r\nexport default function AdminEmailTemplatesPage() {\r\n  const toTitle = (s: string) => s.replace(/_/g, ' ').replace(/\\b\\w/g, (c) => c.toUpperCase())\r\n  const { data, error, isLoading, mutate } = useSWR('admin-email-templates', async () => {\r\n    try {\r\n      return await adminService.getEmailTemplates()\r\n    } catch (e: any) {\r\n      const status = e?.response?.status\r\n      if (status === 404) return []\r\n      throw e\r\n    }\r\n  })\r\n  const [search, setSearch] = useState('')\r\n  const [previewHtml, setPreviewHtml] = useState<string | null>(null)\r\n  const [deleteId, setDeleteId] = useState<string | null>(null)\r\n  const [editing, setEditing] = useState<EmailTemplate | null>(null)\r\n  const [testSend, setTestSend] = useState<{ id: string; email: string; vars: string } | null>(null)\r\n  const [form, setForm] = useState<{ name: string; subject: string; body_html: string; sample_vars: string }>({ name: '', subject: '', body_html: '', sample_vars: '{\"user_name\":\"Alice\",\"event_title\":\"Tech Week\"}' })\r\n  const [isSubmitting, setIsSubmitting] = useState(false)\r\n\r\n  const templates = (data || []) as EmailTemplate[]\r\n  const filtered = useMemo(() => templates.filter(t => t.name.toLowerCase().includes(search.toLowerCase()) || t.subject.toLowerCase().includes(search.toLowerCase())), [templates, search])\r\n\r\n  useEffect(() => {\r\n    if (editing) {\r\n      setForm({\r\n        name: editing.name,\r\n        subject: editing.subject,\r\n        body_html: editing.body_html,\r\n        sample_vars: '{\"user_name\":\"Alice\",\"event_title\":\"Tech Week\"}'\r\n      })\r\n    } else {\r\n      setForm({ name: '', subject: '', body_html: '', sample_vars: '{\"user_name\":\"Alice\",\"event_title\":\"Tech Week\"}' })\r\n    }\r\n  }, [editing])\r\n\r\n  const compilePreview = () => {\r\n    let html = form.body_html || ''\r\n    let vars: Record<string, string> = {}\r\n    try {\r\n      vars = JSON.parse(form.sample_vars || '{}')\r\n      Object.entries(vars).forEach(([k, v]) => {\r\n        html = html.replaceAll(`{{${k}}}`, String(v))\r\n      })\r\n    } catch {}\r\n    const cta = vars['verification_link']\r\n      ? `<p style=\"text-align:center;margin-top:16px;\"><a href=\"${vars['verification_link']}\" style=\"display:inline-block;background:#facc15;color:#0f172a;padding:12px 20px;border-radius:9999px;font-weight:800;text-decoration:none\">Verify Email</a></p>`\r\n      : vars['reset_link']\r\n      ? `<p style=\"text-align:center;margin-top:16px;\"><a href=\"${vars['reset_link']}\" style=\"display:inline-block;background:#facc15;color:#0f172a;padding:12px 20px;border-radius:9999px;font-weight:800;text-decoration:none\">Reset Password</a></p>`\r\n      : ''\r\n    const wrapped = `<!DOCTYPE html><html><head><meta charset=\"UTF-8\"/><meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"/><meta name=\"color-scheme\" content=\"light\"/><title>${form.subject || 'ATAS'}</title></head>\r\n    <body style=\"background:#fafafa;margin:0;padding:24px;font-family:Inter,Arial,sans-serif;color:#0f172a\">\r\n      <div style=\"max-width:600px;margin:0 auto;background:#ffffff;border-radius:16px;padding:0;border:1px solid #e5e7eb\">\r\n        <div style=\"display:flex;align-items:center;gap:12px;padding:16px 24px;border-bottom:1px solid #f1f5f9;background:#fef3c7;border-radius:16px 16px 0 0\">\r\n          <div style=\"width:36px;height:36px;border-radius:9999px;background:#18181b;color:#facc15;display:flex;align-items:center;justify-content:center;font-weight:800\">A</div>\r\n          <div style=\"font-weight:900;font-size:18px;color:#0f172a\">ATAS</div>\r\n        </div>\r\n        <div style=\"padding:24px\">\r\n          <div style=\"font-weight:800;font-size:18px;margin-bottom:12px\">${form.subject || ''}</div>\r\n          <div style=\"font-size:16px;line-height:1.6\">${html}</div>\r\n          ${cta}\r\n          <div style=\"font-size:12px;color:#475569;margin-top:24px;border-top:1px solid #f1f5f9;padding-top:12px\">This email was sent by ATAS. If you did not request this, you can safely ignore it.</div>\r\n        </div>\r\n      </div>\r\n    </body></html>`\r\n    setPreviewHtml(wrapped)\r\n  }\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    setIsSubmitting(true)\r\n    try {\r\n      if (editing) {\r\n        await adminService.updateEmailTemplate(editing.id, { subject: form.subject, body_html: form.body_html })\r\n        toast.success('Template updated')\r\n      } else {\r\n        await adminService.createEmailTemplate({ name: form.name, subject: form.subject, body_html: form.body_html })\r\n        toast.success('Template created')\r\n      }\r\n      setEditing(null)\r\n      mutate()\r\n    } catch (err) {\r\n      toast.error('Failed to save template')\r\n      console.error(err)\r\n    } finally {\r\n      setIsSubmitting(false)\r\n    }\r\n  }\r\n\r\n  const handleDelete = async () => {\r\n    if (!deleteId) return\r\n    try {\r\n      await adminService.deleteEmailTemplate(deleteId)\r\n      toast.success('Template deleted')\r\n      setDeleteId(null)\r\n      mutate()\r\n    } catch (err) {\r\n      toast.error('Failed to delete template')\r\n      console.error(err)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-black text-gray-900 tracking-tight\">Email Templates</h1>\r\n          <p className=\"text-gray-700 mt-2\">Manage and preview email templates used by the system</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex flex-col sm:flex-row gap-4 bg-white p-5 rounded-2xl shadow-sm border border-gray-200\">\r\n        <div className=\"relative flex-1\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Search by name or subject...\"\r\n            value={search}\r\n            onChange={(e) => setSearch(e.target.value)}\r\n            className=\"w-full px-4 py-3 bg-white border border-gray-300 rounded-xl text-gray-900 placeholder-gray-500 text-base focus:border-blue-600 focus:ring-1 focus:ring-blue-600 transition-all\"\r\n          />\r\n        </div>\r\n        <div className=\"flex gap-2\">\r\n          <button\r\n            onClick={() => setEditing({ id: '', name: '', subject: '', body_html: '', variables: [] })}\r\n            className=\"px-4 py-2 bg-yellow-400 text-zinc-900 rounded-xl font-bold hover:bg-yellow-300\"\r\n          >\r\n            + New Template\r\n          </button>\r\n          <button\r\n            onClick={async () => {\r\n              try {\r\n                await adminService.createEmailTemplate({\r\n                  name: 'email_verification',\r\n                  subject: 'Verify your email',\r\n                  body_html: '<p>Hello {{user_name}},</p><p>Please verify your email by clicking <a href=\"{{verification_link}}\">this link</a>.</p>'\r\n                })\r\n                await adminService.createEmailTemplate({\r\n                  name: 'forgot_password',\r\n                  subject: 'Reset your password',\r\n                  body_html: '<p>Hello {{user_name}},</p><p>Reset your password using <a href=\"{{reset_link}}\">this link</a>.</p>'\r\n                })\r\n                toast.success('Default templates added')\r\n                mutate()\r\n              } catch (e) {\r\n                toast.error('Failed to add defaults')\r\n                console.error(e)\r\n              }\r\n            }}\r\n            className=\"px-4 py-2 bg-white border border-gray-300 text-gray-900 rounded-xl font-bold hover:bg-gray-50\"\r\n          >\r\n            Add Defaults\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden\">\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"w-full text-left text-base\">\r\n            <thead className=\"bg-gray-100 border-b border-gray-200\">\r\n              <tr>\r\n                <th className=\"px-6 py-4 font-semibold text-gray-900\">Name</th>\r\n                <th className=\"px-6 py-4 font-semibold text-gray-900\">Subject</th>\r\n                <th className=\"px-6 py-4 font-semibold text-gray-900\">Updated</th>\r\n                <th className=\"px-6 py-4 font-semibold text-gray-900 text-right\">Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"divide-y divide-gray-100\">\r\n              {isLoading && (\r\n                <tr><td colSpan={4} className=\"px-6 py-6 text-gray-700\">Loading...</td></tr>\r\n              )}\r\n              {error && (\r\n                <tr><td colSpan={4} className=\"px-6 py-6 text-gray-700\">No templates available</td></tr>\r\n              )}\r\n              {filtered.map(t => (\r\n                <tr key={t.id}>\r\n                  <td className=\"px-6 py-4 text-gray-900 font-medium\">{toTitle(t.name)}</td>\r\n                  <td className=\"px-6 py-4 text-gray-800\">{t.subject}</td>\r\n                  <td className=\"px-6 py-4 text-gray-700 text-sm\">{t.updated_at ? new Date(t.updated_at).toLocaleString() : '-'}</td>\r\n                  <td className=\"px-6 py-4 text-right\">\r\n                    <div className=\"flex items-center justify-end gap-2\">\r\n                      <button onClick={() => { setEditing(t) }} className=\"px-3 py-2 text-gray-900 border border-gray-300 rounded-lg hover:bg-gray-50\">Edit</button>\r\n                      <button onClick={() => { setForm({ name: t.name, subject: t.subject, body_html: t.body_html, sample_vars: form.sample_vars }); compilePreview() }} className=\"px-3 py-2 text-gray-900 border border-gray-300 rounded-lg hover:bg-gray-50\">Preview</button>\r\n                      <button onClick={() => setTestSend({ id: t.id, email: '', vars: '{\\\"user_name\\\":\\\"Alice\\\",\\\"verification_link\\\":\\\"https://example.com/verify\\\"}' })} className=\"px-3 py-2 text-blue-700 border border-blue-300 rounded-lg hover:bg-blue-50\">Send Test</button>\r\n                      <button onClick={() => setDeleteId(t.id)} className=\"px-3 py-2 text-red-700 border border-red-300 rounded-lg hover:bg-red-50\">Delete</button>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n              {filtered.length === 0 && !isLoading && !error && (\r\n                <tr><td colSpan={4} className=\"px-6 py-12 text-center text-gray-700\">No templates</td></tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n\r\n      <Dialog.Root open={!!editing} onOpenChange={() => setEditing(null)}>\r\n        <Dialog.Portal>\r\n          <Dialog.Overlay className=\"fixed inset-0 bg-black/50 z-50 backdrop-blur-sm\" />\r\n          <Dialog.Content className=\"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white p-6 rounded-2xl shadow-2xl z-50 w-full max-w-2xl outline-none\">\r\n            <Dialog.Title className=\"text-xl font-black text-gray-900 mb-4 tracking-tight\">{editing?.id ? 'Edit Template' : 'New Template'}</Dialog.Title>\r\n            <form className=\"space-y-4\" onSubmit={handleSubmit}>\r\n              {!editing?.id && (\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-800 mb-1\">Name</label>\r\n                  <input value={form.name} onChange={(e)=>setForm(prev=>({...prev, name: e.target.value}))} className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900\" placeholder=\"welcome_email\" required />\r\n                </div>\r\n              )}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-800 mb-1\">Subject</label>\r\n                <input value={form.subject} onChange={(e)=>setForm(prev=>({...prev, subject: e.target.value}))} className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900\" placeholder=\"Welcome to ATAS\" required />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-800 mb-1\">Body HTML</label>\r\n                <textarea value={form.body_html} onChange={(e)=>setForm(prev=>({...prev, body_html: e.target.value}))} className=\"w-full px-3 py-2 border border-gray-300 rounded-lg h-48 font-mono text-sm text-gray-900\" placeholder=\"<p>Hello {{user_name}}</p>\" required />\r\n              </div>\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-800 mb-1\">Sample Variables (JSON)</label>\r\n                <textarea value={form.sample_vars} onChange={(e)=>setForm(prev=>({...prev, sample_vars: e.target.value}))} className=\"w-full px-3 py-2 border border-gray-300 rounded-lg h-24 font-mono text-sm text-gray-900\" />\r\n              </div>\r\n              <div className=\"flex items-center justify-end gap-2\">\r\n                <button type=\"button\" onClick={compilePreview} className=\"px-3 py-2 border border-gray-300 rounded-lg text-gray-900\">Preview</button>\r\n                <button type=\"submit\" disabled={isSubmitting} className=\"px-4 py-2 bg-yellow-400 text-zinc-900 rounded-lg font-bold hover:bg-yellow-300\">{isSubmitting ? 'Saving...' : 'Save'}</button>\r\n              </div>\r\n            </form>\r\n          </Dialog.Content>\r\n        </Dialog.Portal>\r\n      </Dialog.Root>\r\n\r\n      <Dialog.Root open={!!previewHtml} onOpenChange={() => setPreviewHtml(null)}>\r\n        <Dialog.Portal>\r\n          <Dialog.Overlay className=\"fixed inset-0 bg-black/50 z-50 backdrop-blur-sm\" />\r\n          <Dialog.Content className=\"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white p-6 rounded-2xl shadow-2xl z-50 w-full max-w-3xl outline-none\">\r\n            <Dialog.Title className=\"text-xl font-black text-gray-900 mb-4 tracking-tight\">Preview</Dialog.Title>\r\n            <div className=\"border border-gray-200 rounded-xl p-5 prose prose-sm md:prose text-gray-900 max-w-none\" dangerouslySetInnerHTML={{ __html: previewHtml || '' }} />\r\n          </Dialog.Content>\r\n        </Dialog.Portal>\r\n      </Dialog.Root>\r\n\r\n      <ConfirmationModal\r\n        isOpen={!!deleteId}\r\n        onClose={() => setDeleteId(null)}\r\n        onConfirm={handleDelete}\r\n        title=\"Delete Template\"\r\n        message=\"Delete this template?\"\r\n        confirmText=\"Delete\"\r\n        cancelText=\"Cancel\"\r\n        variant=\"danger\"\r\n      />\r\n\r\n      <Dialog.Root open={!!testSend} onOpenChange={() => setTestSend(null)}>\r\n        <Dialog.Portal>\r\n          <Dialog.Overlay className=\"fixed inset-0 bg-black/50 z-50 backdrop-blur-sm\" />\r\n          <Dialog.Content className=\"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white p-6 rounded-2xl shadow-2xl z-50 w-full max-w-xl outline-none\">\r\n            <Dialog.Title className=\"text-xl font-black text-gray-900 mb-4 tracking-tight\">Send Test Email</Dialog.Title>\r\n            {testSend && (\r\n              <form className=\"space-y-4\" onSubmit={async (e) => {\r\n                e.preventDefault()\r\n                try {\r\n                  const vars = JSON.parse(testSend.vars || '{}')\r\n                  // @ts-ignore - implement endpoint server-side\r\n                  await adminService.testSendEmailTemplate(testSend.id, testSend.email, vars)\r\n                  toast.success('Test email sent')\r\n                  setTestSend(null)\r\n                } catch (err) {\r\n                  toast.error('Failed to send test')\r\n                  console.error(err)\r\n                }\r\n              }}>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-800 mb-1\">Recipient Email</label>\r\n                  <input value={testSend.email} onChange={(e)=>setTestSend(prev=>prev?{...prev, email: e.target.value}:prev)} className=\"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900\" type=\"email\" required />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-800 mb-1\">Variables (JSON)</label>\r\n                  <textarea value={testSend.vars} onChange={(e)=>setTestSend(prev=>prev?{...prev, vars: e.target.value}:prev)} className=\"w-full px-3 py-2 border border-gray-300 rounded-lg h-24 font-mono text-sm text-gray-900\" />\r\n                </div>\r\n                <div className=\"flex items-center justify-end gap-2\">\r\n                  <button type=\"button\" onClick={() => setTestSend(null)} className=\"px-3 py-2 border border-gray-300 rounded-lg text-gray-900\">Cancel</button>\r\n                  <button type=\"submit\" className=\"px-4 py-2 bg-yellow-400 text-zinc-900 rounded-lg font-bold hover:bg-yellow-300\">Send</button>\r\n                </div>\r\n              </form>\r\n            )}\r\n          </Dialog.Content>\r\n        </Dialog.Portal>\r\n      </Dialog.Root>\r\n    </div>\r\n  )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(admin)\\admin\\events\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(admin)\\admin\\notifications\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[539,542],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[539,542],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":220,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":220,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11821,11824],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11821,11824],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":223,"column":42,"nodeType":null,"messageId":"unusedVar","endLine":223,"endColumn":43}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { adminService } from '@/services/admin.service'\r\nimport useSWR from 'swr'\r\nimport { toast } from 'react-hot-toast'\r\nimport { PaperPlaneIcon } from '@radix-ui/react-icons'\r\n\r\nexport default function AdminNotificationsPage() {\r\n    const [isLoading, setIsLoading] = useState(false)\r\n    const [formData, setFormData] = useState({\r\n        title: '',\r\n        content: '',\r\n        target_role: '',\r\n        link_url: ''\r\n    })\r\n    const [history, setHistory] = useState<any[]>([])\r\n    const { data: templates } = useSWR('admin-email-templates', () => adminService.getEmailTemplates())\r\n    const [selectedTemplateId, setSelectedTemplateId] = useState<string>('')\r\n    const [templateVars, setTemplateVars] = useState<string>('')\r\n    const [sendBoth, setSendBoth] = useState<boolean>(false)\r\n\r\n    const fetchHistory = async () => {\r\n        try {\r\n            const logs = await adminService.getAuditLogs({\r\n                action: 'broadcast_notification',\r\n                page_size: 10\r\n            })\r\n            setHistory(logs)\r\n        } catch (error) {\r\n            console.error('Failed to fetch history', error)\r\n        }\r\n    }\r\n\r\n    // Fetch history on mount\r\n    useEffect(() => {\r\n        fetchHistory()\r\n    }, [])\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault()\r\n        if (!selectedTemplateId) {\r\n            if (!formData.title || !formData.content) {\r\n                toast.error('Title and content are required')\r\n                return\r\n            }\r\n        }\r\n\r\n        setIsLoading(true)\r\n        try {\r\n            if (selectedTemplateId) {\r\n                let vars: Record<string, string> = {}\r\n                try { vars = JSON.parse(templateVars || '{}') } catch {}\r\n                const res = await adminService.broadcastEmailTemplate({\r\n                    template_id: selectedTemplateId,\r\n                    variables: vars,\r\n                    target_role: formData.target_role || undefined,\r\n                })\r\n                toast.success(`Email broadcast queued to ${res.count} users`)\r\n                setSelectedTemplateId('')\r\n                setTemplateVars('')\r\n                if (sendBoth) {\r\n                    const res2 = await adminService.broadcastNotification({\r\n                        title: formData.title || 'Notification',\r\n                        content: formData.content || 'You have a new email message. Please check your inbox.',\r\n                        target_role: formData.target_role || undefined,\r\n                        link_url: formData.link_url || undefined\r\n                    })\r\n                    toast.success(`Notification sent to ${res2.count} users`)\r\n                }\r\n                setFormData(prev => ({ ...prev, title: '', content: '' }))\r\n            } else {\r\n                const res = await adminService.broadcastNotification({\r\n                    title: formData.title,\r\n                    content: formData.content,\r\n                    target_role: formData.target_role || undefined,\r\n                    link_url: formData.link_url || undefined\r\n                })\r\n                toast.success(`Notification sent to ${res.count} users`)\r\n                setFormData({ title: '', content: '', target_role: '', link_url: '' })\r\n            }\r\n            fetchHistory()\r\n        } catch (error) {\r\n            toast.error('Failed to send')\r\n            console.error(error)\r\n        } finally {\r\n            setIsLoading(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"max-w-4xl mx-auto space-y-8\">\r\n            <div>\r\n                <h1 className=\"text-2xl font-bold text-gray-900\">Notification Center</h1>\r\n                <p className=\"text-gray-500 mt-1\">Broadcast system-wide notifications to users</p>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n                <div className=\"lg:col-span-2 space-y-8\">\r\n                    <div className=\"bg-white p-8 rounded-xl shadow-sm border border-gray-100\">\r\n                        <h2 className=\"text-lg font-semibold text-gray-900 mb-6\">Send Broadcast</h2>\r\n                        <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                                    Title\r\n                                </label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={formData.title}\r\n                                    onChange={(e) => setFormData({ ...formData, title: e.target.value })}\r\n                                    className=\"w-full px-4 py-2 rounded-lg border border-gray-200 focus:border-yellow-400 focus:ring-0 transition-colors\"\r\n                                    placeholder=\"e.g., System Maintenance\"\r\n                                    required\r\n                                />\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                                    Message Content\r\n                                </label>\r\n                                <textarea\r\n                                    value={formData.content}\r\n                                    onChange={(e) => setFormData({ ...formData, content: e.target.value })}\r\n                                    className=\"w-full px-4 py-2 rounded-lg border border-gray-200 focus:border-yellow-400 focus:ring-0 transition-colors h-32 resize-none\"\r\n                                    placeholder=\"Type your message here...\"\r\n                                    required\r\n                                />\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                                    Or choose an Email Template\r\n                                </label>\r\n                                <select\r\n                                    value={selectedTemplateId}\r\n                                    onChange={(e) => setSelectedTemplateId(e.target.value)}\r\n                                    className=\"w-full px-4 py-2 rounded-lg border border-gray-200 focus:border-yellow-400 focus:ring-0 transition-colors\"\r\n                                >\r\n                                    <option value=\"\">None</option>\r\n                                    {(templates || []).map(t => (\r\n                                        <option key={t.id} value={t.id}>{t.name}  {t.subject}</option>\r\n                                    ))}\r\n                                </select>\r\n                                {selectedTemplateId && (\r\n                                    <div className=\"mt-3\">\r\n                                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">Template Variables (JSON)</label>\r\n                                        <textarea\r\n                                            value={templateVars}\r\n                                            onChange={(e) => setTemplateVars(e.target.value)}\r\n                                            className=\"w-full px-4 py-2 rounded-lg border border-gray-200 focus:border-yellow-400 focus:ring-0 transition-colors h-24 font-mono text-xs\"\r\n                                            placeholder='{\"user_name\":\"Alice\",\"verification_link\":\"https://...\"}'\r\n                                        />\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n\r\n                            <div className=\"grid grid-cols-2 gap-6\">\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                                        Target Role (Optional)\r\n                                    </label>\r\n                                    <select\r\n                                        value={formData.target_role}\r\n                                        onChange={(e) => setFormData({ ...formData, target_role: e.target.value })}\r\n                                        className=\"w-full px-4 py-2 rounded-lg border border-gray-200 focus:border-yellow-400 focus:ring-0 transition-colors\"\r\n                                    >\r\n                                        <option value=\"\">All Users</option>\r\n                                        <option value=\"student\">Students</option>\r\n                                        <option value=\"teacher\">Teachers</option>\r\n                                        <option value=\"organizer\">Organizers</option>\r\n                                        <option value=\"admin\">Admins</option>\r\n                                    </select>\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                                        Link URL (Optional)\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={formData.link_url}\r\n                                        onChange={(e) => setFormData({ ...formData, link_url: e.target.value })}\r\n                                        className=\"w-full px-4 py-2 rounded-lg border border-gray-200 focus:border-yellow-400 focus:ring-0 transition-colors\"\r\n                                        placeholder=\"/dashboard\"\r\n                                    />\r\n                                    <div className=\"mt-3 flex items-center gap-2\">\r\n                                        <input id=\"sendBoth\" type=\"checkbox\" checked={sendBoth} onChange={(e)=>setSendBoth(e.target.checked)} />\r\n                                        <label htmlFor=\"sendBoth\" className=\"text-sm text-gray-700\">Also send in-app notification</label>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"pt-4\">\r\n                                <button\r\n                                    type=\"submit\"\r\n                                    disabled={isLoading}\r\n                                    className=\"w-full flex items-center justify-center px-6 py-3 bg-gray-900 text-white font-medium rounded-lg hover:bg-gray-800 transition-colors disabled:opacity-50\"\r\n                                >\r\n                                    {isLoading ? (\r\n                                        'Sending...'\r\n                                    ) : (\r\n                                        <>\r\n                                            <PaperPlaneIcon className=\"w-4 h-4 mr-2\" />\r\n                                            Send Broadcast\r\n                                        </>\r\n                                    )}\r\n                                </button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"space-y-6\">\r\n                    <h2 className=\"text-lg font-semibold text-gray-900\">Recent History</h2>\r\n                    <div className=\"space-y-4\">\r\n                        {history.length === 0 ? (\r\n                            <p className=\"text-gray-500 text-sm\">No recent broadcasts found.</p>\r\n                        ) : (\r\n                            history.map((log) => {\r\n                                let details: any = {}\r\n                                try {\r\n                                    details = log.details ? JSON.parse(log.details) : {}\r\n                                } catch (e) {\r\n                                    details = {}\r\n                                }\r\n\r\n                                return (\r\n                                    <div key={log.id} className=\"bg-white p-4 rounded-xl shadow-sm border border-gray-100 text-sm\">\r\n                                        <div className=\"font-medium text-gray-900 mb-1\">{details.title || 'Untitled Broadcast'}</div>\r\n                                        <p className=\"text-gray-600 line-clamp-2 mb-2\">{details.content || 'No content'}</p>\r\n                                        <div className=\"flex items-center justify-between text-xs text-gray-400\">\r\n                                            <span>\r\n                                                Target: <span className=\"font-medium text-gray-600 capitalize\">{details.target_role || 'All Users'}</span>\r\n                                            </span>\r\n                                            <span>\r\n                                                {new Date(log.created_at).toLocaleDateString()}\r\n                                            </span>\r\n                                        </div>\r\n                                        {details.recipient_count !== undefined && (\r\n                                            <div className=\"mt-2 text-xs text-blue-600 bg-blue-50 inline-block px-2 py-1 rounded\">\r\n                                                Sent to {details.recipient_count} users\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                )\r\n                            })\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(admin)\\admin\\onboarding\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(admin)\\admin\\organizations\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(admin)\\admin\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(admin)\\admin\\reviews\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(admin)\\admin\\users\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(admin)\\layout.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'user' is assigned a value but never used.","line":17,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { AdminSidebar } from '@/components/admin/AdminSidebar'\r\nimport { useRouter } from 'next/navigation'\r\nimport { logout } from '@/services/api'\r\nimport { LoadingBackdrop } from '@/components/ui/LoadingBackdrop'\r\nimport { useAuthGuard } from '@/hooks/useAuthGuard'\r\nimport { AdminNotificationBell } from '@/components/admin/AdminNotificationBell'\r\n\r\nexport default function AdminLayout({\r\n    children,\r\n}: {\r\n    children: React.ReactNode\r\n}) {\r\n    const router = useRouter()\r\n    const allowedRoles = ['admin', 'customer_support', 'content_moderator']\r\n    const { user, roles, loading } = useAuthGuard(allowedRoles, false, '/admin/login')\r\n\r\n    const handleLogout = async () => {\r\n        await logout()\r\n        router.push('/admin/login')\r\n    }\r\n\r\n    if (loading) {\r\n        return <LoadingBackdrop isLoading={true} />\r\n    }\r\n\r\n    if (!roles || !roles.some(r => allowedRoles.includes(r))) {\r\n        return (\r\n            <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n                <div className=\"bg-white p-8 rounded-xl shadow-lg text-center max-w-md w-full\">\r\n                    <h1 className=\"text-2xl font-bold text-red-600 mb-4\">Access Denied</h1>\r\n                    <p className=\"text-gray-600 mb-6\">\r\n                        You do not have permission to access the Admin Dashboard.\r\n                    </p>\r\n                    <div className=\"space-y-3\">\r\n                        <button\r\n                            onClick={handleLogout}\r\n                            className=\"w-full px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-colors\"\r\n                        >\r\n                            Logout & Switch Account\r\n                        </button>\r\n                        <button\r\n                            onClick={() => router.push('/dashboard')}\r\n                            className=\"w-full px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\r\n                        >\r\n                            Back to Dashboard\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex min-h-screen bg-gray-50\">\r\n            <AdminSidebar />\r\n            <main className=\"flex-1 overflow-y-auto\">\r\n                <div className=\"sticky top-0 z-40 bg-white/90 backdrop-blur border-b border-gray-200\">\r\n                    <div className=\"px-8 py-4 flex items-center justify-end\">\r\n                        <AdminNotificationBell />\r\n                    </div>\r\n                </div>\r\n                <div className=\"p-8\">\r\n                    {children}\r\n                </div>\r\n            </main>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(app)\\dashboard\\DashboardEventList.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Link' is defined but never used.","line":3,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'user' is defined but never used.","line":17,"column":46,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":50},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":51,"column":21,"nodeType":"JSXOpeningElement","endLine":56,"endColumn":23},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":114,"column":21,"nodeType":"JSXOpeningElement","endLine":119,"endColumn":23},{"ruleId":"react-hooks/static-components","severity":2,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\nC:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(app)\\dashboard\\DashboardEventList.tsx:209:26\n  207 |                     organizedEvents.length === 1 ? (\n  208 |                         // Single event: show detailed card\n> 209 |                         <DetailedEventCard\n      |                          ^^^^^^^^^^^^^^^^^ This component is created during render\n  210 |                             event={organizedEvents[0]}\n  211 |                             onSelect={onSelect}\n  212 |                             handleImageClick={handleImageClick}\n\nC:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(app)\\dashboard\\DashboardEventList.tsx:106:31\n  104 |     )\n  105 |\n> 106 |     const DetailedEventCard = ({ event, onSelect, handleImageClick }: CardProps) => (\n      |                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 107 |         <div\n      | ^^^^^^^^^^^^\n> 108 |             onClick={() => onSelect(event)}\n      \n      | ^^^^^^^^^^^^\n> 178 |         </div>\n      | ^^^^^^^^^^^^\n> 179 |     )\n      | ^^^^^^ The component is created during render here\n  180 |\n  181 |     return (\n  182 |         <div className=\"w-full max-w-6xl mx-auto space-y-12 animate-fadeIn\">","line":209,"column":26,"nodeType":null,"endLine":209,"endColumn":43},{"ruleId":"react-hooks/static-components","severity":2,"message":"Error: Cannot create components during render\n\nComponents created during render will reset their state each time they are created. Declare components outside of render.\n\nC:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(app)\\dashboard\\DashboardEventList.tsx:226:30\n  224 |                             ))}\n  225 |                             {/* Dotted create more card */}\n> 226 |                             <CreateMoreCard onClick={handleCreateClick} />\n      |                              ^^^^^^^^^^^^^^ This component is created during render\n  227 |                         </div>\n  228 |                     )\n  229 |                 ) : (\n\nC:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(app)\\dashboard\\DashboardEventList.tsx:91:28\n   89 |     )\n   90 |\n>  91 |     const CreateMoreCard = ({ onClick }: { onClick: () => void }) => (\n      |                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n>  92 |         <div\n      | ^^^^^^^^^^^^\n>  93 |             onClick={onClick}\n      \n      | ^^^^^^^^^^^^\n> 103 |         </div>\n      | ^^^^^^^^^^^^\n> 104 |     )\n      | ^^^^^^ The component is created during render here\n  105 |\n  106 |     const DetailedEventCard = ({ event, onSelect, handleImageClick }: CardProps) => (\n  107 |         <div","line":226,"column":30,"nodeType":null,"endLine":226,"endColumn":44}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react'\r\nimport { MyEventItem, ProfileResponse, UserMeResponse } from '@/services/api.types'\r\nimport Link from 'next/link'\r\nimport { DashboardProModal } from '@/components/dashboard/DashboardProModal'\r\nimport { EventBadge } from '@/components/ui/EventBadge'\r\nimport { ImagePreviewModal } from '@/components/ui/ImagePreviewModal'\r\n\r\ninterface DashboardEventListProps {\r\n    events: MyEventItem[]\r\n    user: ProfileResponse | null\r\n    me: UserMeResponse | null\r\n    onSelect: (event: MyEventItem) => void\r\n    onCreate: () => void\r\n    onProUpgrade: () => void\r\n}\r\n\r\nexport function DashboardEventList({ events, user, me, onSelect, onCreate, onProUpgrade }: DashboardEventListProps) {\r\n    const [showProModal, setShowProModal] = useState(false)\r\n    const [previewImage, setPreviewImage] = useState<string | null>(null)\r\n    const organizedEvents = events.filter(e => e.my_role === 'organizer')\r\n\r\n    const handleCreateClick = () => {\r\n        // Check if user needs Dashboard Pro\r\n        if (!me?.is_dashboard_pro && organizedEvents.length >= 1) {\r\n            setShowProModal(true)\r\n        } else {\r\n            onCreate()\r\n        }\r\n    }\r\n\r\n    const handleImageClick = (e: React.MouseEvent, url: string) => {\r\n        e.stopPropagation()\r\n        setPreviewImage(url)\r\n    }\r\n\r\n    // Helper components defined outside to avoid re-creation on render\r\n    interface CardProps {\r\n        event: MyEventItem\r\n        onSelect: (event: MyEventItem) => void\r\n        handleImageClick: (e: React.MouseEvent, url: string) => void\r\n    }\r\n\r\n    const CompactEventCard = ({ event, onSelect, handleImageClick }: CardProps) => (\r\n        <div\r\n            onClick={() => onSelect(event)}\r\n            className=\"group bg-white rounded-2xl border border-zinc-200 shadow-sm hover:shadow-md hover:border-zinc-300 transition-all cursor-pointer relative overflow-hidden flex flex-col h-full\"\r\n        >\r\n            {/* Cover Image */}\r\n            <div className=\"h-32 w-full bg-zinc-100 flex-shrink-0 relative overflow-hidden\">\r\n                {event.cover_url ? (\r\n                    <img\r\n                        src={event.cover_url}\r\n                        alt={event.title}\r\n                        onClick={(e) => handleImageClick(e, event.cover_url!)}\r\n                        className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500 cursor-zoom-in\"\r\n                    />\r\n                ) : (\r\n                    <div className=\"w-full h-full bg-gradient-to-br from-yellow-50 to-orange-50 flex items-center justify-center\">\r\n                        <svg className=\"w-8 h-8 text-yellow-200\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\r\n                        </svg>\r\n                    </div>\r\n                )}\r\n                {/* Status Badge overlay */}\r\n                <div className=\"absolute top-2 left-2 flex gap-1 pointer-events-none\">\r\n                    <EventBadge type=\"status\" value={event.status} />\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"p-4 flex flex-col flex-1\">\r\n                <div className=\"flex gap-2 mb-2 flex-wrap\">\r\n                    <EventBadge type=\"type\" value={event.type} className=\"!bg-zinc-100 !text-zinc-500 !border-0\" />\r\n                </div>\r\n\r\n                <h3 className=\"text-base font-black text-zinc-900 mb-1 group-hover:text-yellow-600 transition-colors line-clamp-2\">{event.title}</h3>\r\n                <p className=\"text-xs text-zinc-500 font-medium mb-3\">\r\n                    {new Date(event.start_datetime).toLocaleDateString(undefined, { month: 'short', day: 'numeric' })}\r\n                </p>\r\n                <div className=\"flex items-center justify-between mt-auto pt-3 border-t border-zinc-50\">\r\n                    <span className=\"text-[10px] font-bold text-zinc-400\">\r\n                        Organizing\r\n                    </span>\r\n                    <svg className=\"w-4 h-4 text-zinc-300 group-hover:text-yellow-500 transition-colors\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M17 8l4 4m0 0l-4 4m4-4H3\" />\r\n                    </svg>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n    const CreateMoreCard = ({ onClick }: { onClick: () => void }) => (\r\n        <div\r\n            onClick={onClick}\r\n            className=\"group bg-zinc-50 rounded-2xl border-2 border-dashed border-zinc-300 p-4 hover:border-yellow-400 hover:bg-yellow-50 transition-all cursor-pointer flex flex-col items-center justify-center min-h-[300px]\"\r\n        >\r\n            <div className=\"w-12 h-12 bg-white rounded-full flex items-center justify-center mb-3 shadow-sm group-hover:scale-110 transition-transform\">\r\n                <svg className=\"w-6 h-6 text-zinc-400 group-hover:text-yellow-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 4v16m8-8H4\" />\r\n                </svg>\r\n            </div>\r\n            <span className=\"text-sm font-bold text-zinc-600 group-hover:text-zinc-900\">Create Event</span>\r\n            <span className=\"text-xs text-zinc-400 mt-1\">Add another event</span>\r\n        </div>\r\n    )\r\n\r\n    const DetailedEventCard = ({ event, onSelect, handleImageClick }: CardProps) => (\r\n        <div\r\n            onClick={() => onSelect(event)}\r\n            className=\"group bg-white rounded-2xl border border-zinc-200 p-0 shadow-lg hover:shadow-xl hover:border-yellow-400 transition-all cursor-pointer relative overflow-hidden flex flex-col md:flex-row h-72\"\r\n        >\r\n            {/* Cover Image Half */}\r\n            <div className=\"w-full md:w-2/5 h-48 md:h-full relative overflow-hidden bg-zinc-100\">\r\n                {event.cover_url ? (\r\n                    <img\r\n                        src={event.cover_url}\r\n                        alt={event.title}\r\n                        onClick={(e) => handleImageClick(e, event.cover_url!)}\r\n                        className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500 cursor-zoom-in\"\r\n                    />\r\n                ) : (\r\n                    <div className=\"w-full h-full bg-gradient-to-br from-yellow-50 to-orange-50 flex items-center justify-center\">\r\n                        <svg className=\"w-12 h-12 text-yellow-200\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\r\n                        </svg>\r\n                    </div>\r\n                )}\r\n                {/* Floating Badges */}\r\n                <div className=\"absolute top-4 left-4 flex flex-wrap gap-2 pointer-events-none\">\r\n                    <EventBadge type=\"status\" value={event.status} />\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"p-8 flex flex-col justify-center flex-1\">\r\n                <div className=\"flex flex-wrap gap-2 mb-4\">\r\n                    <EventBadge type=\"type\" value={event.type} className=\"!bg-zinc-100 !text-zinc-500 !border-0\" />\r\n                    {event.format && (\r\n                        <EventBadge type=\"format\" value={event.format} className=\"!bg-zinc-100 !text-zinc-500 !border-0\" />\r\n                    )}\r\n                </div>\r\n\r\n                <h3 className=\"text-3xl font-black text-zinc-900 mb-2 group-hover:text-yellow-600 transition-colors line-clamp-2\">\r\n                    {event.title}\r\n                </h3>\r\n\r\n                <div className=\"flex flex-wrap gap-4 text-sm font-medium text-zinc-600 mb-6\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <svg className=\"w-5 h-5 text-zinc-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\r\n                        </svg>\r\n                        {new Date(event.start_datetime).toLocaleDateString(undefined, { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <svg className=\"w-5 h-5 text-zinc-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                        </svg>\r\n                        {new Date(event.start_datetime).toLocaleTimeString(undefined, { hour: '2-digit', minute: '2-digit' })}\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-4 mt-auto\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <svg className=\"w-5 h-5 text-zinc-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\" />\r\n                        </svg>\r\n                        <span className=\"text-sm font-bold text-zinc-700\">{event.participant_count || 0} Participants</span>\r\n                    </div>\r\n                    <div className=\"text-sm font-bold text-yellow-600 bg-yellow-50 px-3 py-1 rounded-full\">\r\n                        You are Organizing\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            {/* Right: Action Arrow */}\r\n            <div className=\"hidden md:flex items-center justify-center p-6 border-l border-zinc-50 w-24\">\r\n                <svg className=\"w-8 h-8 text-zinc-300 group-hover:text-yellow-500 group-hover:translate-x-1 transition-all\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 5l7 7-7 7\" />\r\n                </svg>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n    return (\r\n        <div className=\"w-full max-w-6xl mx-auto space-y-12 animate-fadeIn\">\r\n            {/* Header */}\r\n            <div className=\"flex flex-col md:flex-row md:items-end justify-between gap-6\">\r\n                <div>\r\n                    <h1 className=\"text-4xl font-black text-zinc-900 tracking-tight mb-2\">\r\n                        My Events\r\n                    </h1>\r\n                    <p className=\"text-zinc-500 font-medium\">\r\n                        Manage your organized events.\r\n                    </p>\r\n                </div>\r\n                <button\r\n                    onClick={handleCreateClick}\r\n                    className=\"px-6 py-2.5 bg-zinc-900 text-yellow-400 font-bold rounded-xl hover:bg-zinc-800 transition-all shadow-md flex items-center gap-2\"\r\n                >\r\n                    <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 4v16m8-8H4\" />\r\n                    </svg>\r\n                    Create Event\r\n                </button>\r\n            </div>\r\n\r\n            {/* Organized Section */}\r\n            <section className=\"space-y-6\">\r\n                {organizedEvents.length > 0 ? (\r\n                    organizedEvents.length === 1 ? (\r\n                        // Single event: show detailed card\r\n                        <DetailedEventCard\r\n                            event={organizedEvents[0]}\r\n                            onSelect={onSelect}\r\n                            handleImageClick={handleImageClick}\r\n                        />\r\n                    ) : (\r\n                        // Multiple events: show grid layout\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                            {organizedEvents.map(event => (\r\n                                <CompactEventCard\r\n                                    key={event.event_id}\r\n                                    event={event}\r\n                                    onSelect={onSelect}\r\n                                    handleImageClick={handleImageClick}\r\n                                />\r\n                            ))}\r\n                            {/* Dotted create more card */}\r\n                            <CreateMoreCard onClick={handleCreateClick} />\r\n                        </div>\r\n                    )\r\n                ) : (\r\n                    <div className=\"bg-zinc-50 rounded-2xl p-8 text-center border border-dashed border-zinc-200\">\r\n                        <p className=\"text-zinc-500 font-medium mb-2\">No organized events yet.</p>\r\n                        <button onClick={onCreate} className=\"text-yellow-600 font-bold hover:underline\">Create your first event</button>\r\n                    </div>\r\n                )}\r\n            </section>\r\n\r\n            {/* Dashboard Pro Modal */}\r\n            <DashboardProModal\r\n                isOpen={showProModal}\r\n                onClose={() => setShowProModal(false)}\r\n                onSuccess={() => {\r\n                    setShowProModal(false)\r\n                    onProUpgrade()\r\n                }}\r\n            />\r\n\r\n            {/* Image Preview Modal */}\r\n            <ImagePreviewModal\r\n                isOpen={!!previewImage}\r\n                imageUrl={previewImage}\r\n                onClose={() => setPreviewImage(null)}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(app)\\dashboard\\DashboardHeroCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Image' is defined but never used.","line":4,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":13},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":32,"column":13,"nodeType":"JSXOpeningElement","endLine":36,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport React from 'react'\r\nimport Image from 'next/image'\r\nimport { EventDetails } from '@/services/api.types'\r\nimport { format } from 'date-fns'\r\n\r\ninterface DashboardHeroCardProps {\r\n    event: EventDetails\r\n    onPreview?: () => void\r\n}\r\n\r\nexport function DashboardHeroCard({ event, onPreview }: DashboardHeroCardProps) {\r\n    const startDate = new Date(event.start_datetime)\r\n    const allowedHosts = new Set(['res.cloudinary.com', 'ui-avatars.com', 'picsum.photos'])\r\n    const pickCover = () => {\r\n        const url = event.cover_url || ''\r\n        try {\r\n            const u = new URL(url)\r\n            if (allowedHosts.has(u.hostname)) return url\r\n        } catch { }\r\n        return `https://ui-avatars.com/api/?name=${encodeURIComponent(event.title)}&background=random&size=800`\r\n    }\r\n    const coverUrl = pickCover()\r\n\r\n    return (\r\n        <div\r\n            onClick={onPreview}\r\n            className=\"w-full relative h-[400px] rounded-t-[2.5rem] overflow-hidden group cursor-pointer\"\r\n        >\r\n            {/* Background Image */}\r\n            <img\r\n                src={coverUrl}\r\n                alt={event.title}\r\n                className=\"absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-105\"\r\n            />\r\n\r\n            {/* Gradient Overlay */}\r\n            <div className=\"absolute inset-0 bg-gradient-to-t from-zinc-900 via-zinc-900/40 to-transparent\" />\r\n\r\n            {/* Badges - Top Right */}\r\n            <div className=\"absolute top-8 right-8 z-20 flex gap-3\">\r\n                <span className=\"px-4 py-1.5 rounded-full bg-zinc-900/40 text-white text-sm font-bold backdrop-blur-md border border-white/20 shadow-lg capitalize\">\r\n                    {event.format.replace('_', ' ')}\r\n                </span>\r\n                <span className={`px-4 py-1.5 rounded-full text-white text-sm font-bold backdrop-blur-md border border-white/20 shadow-lg uppercase ${event.type === 'online' ? 'bg-blue-500/60' : event.type === 'offline' ? 'bg-green-500/60' : 'bg-purple-500/60'\r\n                    }`}>\r\n                    {event.type}\r\n                </span>\r\n            </div>\r\n\r\n            {/* Content */}\r\n            <div className=\"absolute bottom-0 left-0 right-0 p-8 md:p-12\">\r\n                <div className=\"space-y-4 max-w-4xl\">\r\n\r\n                    {/* Title */}\r\n                    <h2 className=\"text-4xl md:text-5xl lg:text-6xl font-black text-white tracking-tight leading-tight truncate\">\r\n                        {event.title}\r\n                    </h2>\r\n\r\n                    {/* Meta Info */}\r\n                    <div className=\"flex flex-wrap items-center gap-6 text-zinc-200 font-medium text-lg pt-2\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <svg className=\"w-5 h-5 text-yellow-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\r\n                            </svg>\r\n                            {format(startDate, 'EEEE, MMMM d, yyyy  h:mm a')}\r\n                        </div>\r\n                        {event.venue_remark && (\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <svg className=\"w-5 h-5 text-yellow-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" />\r\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n                                </svg>\r\n                                <span className=\"truncate max-w-[250px]\">{event.venue_remark}</span>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(app)\\dashboard\\DashboardStats.tsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nC:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(app)\\dashboard\\DashboardStats.tsx:11:42\n   9 |\n  10 | export function DashboardStats({ events }: DashboardStatsProps) {\n> 11 |     const [now, setNow] = React.useState(Date.now())\n     |                                          ^^^^^^^^^^ Cannot call impure function\n  12 |\n  13 |     React.useEffect(() => {\n  14 |         // Update time on mount to avoid hydration mismatch","line":11,"column":42,"nodeType":null,"endLine":11,"endColumn":52}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport React from 'react'\r\nimport { MyEventItem } from '@/services/api.types'\r\n\r\ninterface DashboardStatsProps {\r\n    events: MyEventItem[]\r\n}\r\n\r\nexport function DashboardStats({ events }: DashboardStatsProps) {\r\n    const [now, setNow] = React.useState(Date.now())\r\n\r\n    React.useEffect(() => {\r\n        // Update time on mount to avoid hydration mismatch\r\n        setNow(Date.now())\r\n    }, [])\r\n\r\n    const total = events.length\r\n    const upcoming = events.filter(e => new Date(e.end_datetime).getTime() > now && e.status !== 'ended').length\r\n    const completed = events.filter(e => e.status === 'ended' || new Date(e.end_datetime).getTime() < now).length\r\n    const organized = events.filter(e => e.my_role === 'organizer').length\r\n\r\n    const stats = [\r\n        { name: 'Total Events', value: total, color: 'bg-blue-50 text-blue-700' },\r\n        { name: 'Upcoming', value: upcoming, color: 'bg-yellow-50 text-yellow-700' },\r\n        { name: 'Completed', value: completed, color: 'bg-green-50 text-green-700' },\r\n        { name: 'Organized', value: organized, color: 'bg-purple-50 text-purple-700' },\r\n    ]\r\n\r\n    return (\r\n        <div className=\"grid grid-cols-2 gap-4 sm:grid-cols-4 mb-8\">\r\n            {stats.map((stat) => (\r\n                <div key={stat.name} className=\"bg-white overflow-hidden rounded-2xl border border-zinc-100 shadow-sm p-5 flex flex-col items-center justify-center text-center hover:shadow-md transition-shadow\">\r\n                    <dt className=\"truncate text-sm font-medium text-zinc-500\">{stat.name}</dt>\r\n                    <dd className={`mt-2 text-3xl font-black rounded-xl px-4 py-1 ${stat.color}`}>\r\n                        {stat.value}\r\n                    </dd>\r\n                </div>\r\n            ))}\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(app)\\dashboard\\DashboardTabChecklist.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Image' is defined but never used.","line":5,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":13},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchChecklist'. Either include it or remove the dependency array.","line":48,"column":8,"nodeType":"ArrayExpression","endLine":48,"endColumn":18,"suggestions":[{"desc":"Update the dependencies array to be: [event.id, fetchChecklist]","fix":{"range":[1692,1702],"text":"[event.id, fetchChecklist]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react'\r\nimport { EventDetails, EventChecklistItemResponse, ProfileResponse } from '@/services/api.types'\r\nimport { getEventChecklist, createEventChecklistItem, updateEventChecklistItem, deleteEventChecklistItem, findProfiles } from '@/services/api'\r\nimport { toast } from 'react-hot-toast'\r\nimport Image from 'next/image'\r\n\r\ninterface DashboardTabChecklistProps {\r\n    event: EventDetails\r\n}\r\n\r\nexport function DashboardTabChecklist({ event }: DashboardTabChecklistProps) {\r\n    const [items, setItems] = useState<EventChecklistItemResponse[]>([])\r\n    const [loading, setLoading] = useState(true)\r\n\r\n    // Inline Add State\r\n    const [newItemTitle, setNewItemTitle] = useState('')\r\n    const [newItemUser, setNewItemUser] = useState<ProfileResponse | null>(null)\r\n    const [userSearch, setUserSearch] = useState('')\r\n    const [userOptions, setUserOptions] = useState<ProfileResponse[]>([])\r\n\r\n    const fetchChecklist = async () => {\r\n        try {\r\n            const data = await getEventChecklist(event.id)\r\n            setItems(data.sort((a, b) => a.sort_order - b.sort_order))\r\n        } catch (error) {\r\n            console.error(error)\r\n            toast.error('Failed to load checklist')\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    const searchUsers = async (query: string) => {\r\n        if (!query) {\r\n            setUserOptions([])\r\n            return\r\n        }\r\n        try {\r\n            const res = await findProfiles({ name: query })\r\n            setUserOptions(res)\r\n        } catch (e) {\r\n            console.error(e)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        fetchChecklist()\r\n    }, [event.id])\r\n\r\n    const handleToggle = async (item: EventChecklistItemResponse) => {\r\n        const originalItems = [...items]\r\n        const updatedItems = items.map(i => i.id === item.id ? { ...i, is_completed: !i.is_completed } : i)\r\n        setItems(updatedItems)\r\n\r\n        try {\r\n            await updateEventChecklistItem(event.id, item.id, { is_completed: !item.is_completed })\r\n        } catch (error) {\r\n            console.error(error)\r\n            setItems(originalItems)\r\n            toast.error('Failed to update task')\r\n        }\r\n    }\r\n\r\n    const handleDelete = async (itemId: string) => {\r\n        if (!confirm('Delete this task?')) return\r\n        try {\r\n            await deleteEventChecklistItem(event.id, itemId)\r\n            setItems(items.filter(i => i.id !== itemId))\r\n            toast.success('Task deleted')\r\n        } catch (error) {\r\n            console.error(error)\r\n            toast.error('Failed to delete task')\r\n        }\r\n    }\r\n\r\n    const handleAdd = async (e: React.FormEvent) => {\r\n        e.preventDefault()\r\n        if (!newItemTitle.trim()) return\r\n\r\n        const tempId = 'temp-' + Date.now()\r\n        const tempItem: EventChecklistItemResponse = {\r\n            id: tempId,\r\n            event_id: event.id,\r\n            title: newItemTitle,\r\n            is_completed: false,\r\n            sort_order: items.length + 1,\r\n            created_by_user_id: 'me',\r\n            created_at: new Date().toISOString(),\r\n            assigned_user_id: newItemUser?.user_id\r\n        }\r\n\r\n        // Optimistic UI\r\n        setItems([...items, tempItem])\r\n        setNewItemTitle('')\r\n        setNewItemUser(null)\r\n        setUserSearch('')\r\n\r\n        try {\r\n            const newItem = await createEventChecklistItem(event.id, {\r\n                title: tempItem.title,\r\n                assigned_user_id: tempItem.assigned_user_id\r\n            })\r\n            // Replace temp item with real one\r\n            setItems(prev => prev.map(i => i.id === tempId ? newItem : i))\r\n            toast.success('Task added')\r\n        } catch (error) {\r\n            console.error(error)\r\n            setItems(prev => prev.filter(i => i.id !== tempId))\r\n            toast.error('Failed to add task')\r\n        }\r\n    }\r\n\r\n    const loadDefaults = async () => {\r\n        const defaults = [\r\n            \"Secure a speaker\",\r\n            \"Send email confirmation\",\r\n            \"Prepare appreciation email\"\r\n        ]\r\n        setLoading(true)\r\n        try {\r\n            for (const title of defaults) {\r\n                await createEventChecklistItem(event.id, { title })\r\n            }\r\n            await fetchChecklist()\r\n            toast.success('Default template loaded')\r\n        } catch (error) {\r\n            console.error(error)\r\n            toast.error('Failed to load defaults')\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"max-w-6xl mx-auto animate-fadeIn space-y-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n                <div />\r\n                {!loading && items.length === 0 && (\r\n                    <button\r\n                        onClick={loadDefaults}\r\n                        className=\"text-sm font-bold text-yellow-600 hover:text-yellow-700 underline decoration-yellow-400 decoration-2 underline-offset-2\"\r\n                    >\r\n                        Load Default Template\r\n                    </button>\r\n                )}\r\n            </div>\r\n\r\n            {loading ? (\r\n                <div className=\"flex justify-center py-12\">\r\n                    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-400\"></div>\r\n                </div>\r\n            ) : (\r\n                <div className=\"space-y-4\">\r\n                    <div className=\"bg-white rounded-2xl border border-zinc-200 overflow-hidden shadow-sm\">\r\n                        <table className=\"w-full text-left\">\r\n                            <thead className=\"bg-zinc-50 border-b border-zinc-100\">\r\n                                <tr>\r\n                                    <th className=\"px-6 py-4 w-12 text-center text-xs font-bold text-zinc-500 uppercase tracking-wider\">\r\n                                        Status\r\n                                    </th>\r\n                                    <th className=\"px-6 py-4 text-xs font-bold text-zinc-500 uppercase tracking-wider\">Task</th>\r\n                                    <th className=\"px-6 py-4 text-xs font-bold text-zinc-500 uppercase tracking-wider\">Assigned To</th>\r\n                                    <th className=\"px-6 py-4 w-12 text-right text-xs font-bold text-zinc-500 uppercase tracking-wider\"></th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody className=\"divide-y divide-zinc-100\">\r\n                                {items.length === 0 ? (\r\n                                    <tr>\r\n                                        <td colSpan={4} className=\"px-6 py-12 text-center text-zinc-400 font-medium\">\r\n                                            No tasks yet. Add one below!\r\n                                        </td>\r\n                                    </tr>\r\n                                ) : (\r\n                                    items.map((item) => (\r\n                                        <tr key={item.id} className=\"hover:bg-zinc-50/50 transition-colors group\">\r\n                                            <td className=\"px-6 py-4 text-center\">\r\n                                                <button\r\n                                                    onClick={() => handleToggle(item)}\r\n                                                    className={`w-6 h-6 rounded-lg border-2 flex items-center justify-center transition-all ${item.is_completed\r\n                                                        ? 'bg-green-500 border-green-500 text-white'\r\n                                                        : 'bg-zinc-50 border-zinc-300 text-transparent hover:border-yellow-400'\r\n                                                        }`}\r\n                                                >\r\n                                                    <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"3\" d=\"M5 13l4 4L19 7\" />\r\n                                                    </svg>\r\n                                                </button>\r\n                                            </td>\r\n                                            <td className=\"px-6 py-4\">\r\n                                                <span className={`font-bold transition-all ${item.is_completed ? 'text-zinc-400 line-through' : 'text-zinc-900'}`}>\r\n                                                    {item.title}\r\n                                                </span>\r\n                                            </td>\r\n                                            <td className=\"px-6 py-4\">\r\n                                                {item.assigned_user_id ? (\r\n                                                    <div className=\"flex items-center gap-2\">\r\n                                                        <div className=\"w-6 h-6 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center text-[10px] font-bold\">\r\n                                                            A\r\n                                                        </div>\r\n                                                        <span className=\"text-sm font-medium text-zinc-700\">Assigned</span>\r\n                                                    </div>\r\n                                                ) : (\r\n                                                    <span className=\"text-xs text-zinc-400 italic\">Unassigned</span>\r\n                                                )}\r\n                                            </td>\r\n                                            <td className=\"px-6 py-4 text-right\">\r\n                                                <button\r\n                                                    onClick={() => handleDelete(item.id)}\r\n                                                    className=\"opacity-0 group-hover:opacity-100 p-2 text-zinc-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all\"\r\n                                                    title=\"Delete task\"\r\n                                                >\r\n                                                    <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\r\n                                                    </svg>\r\n                                                </button>\r\n                                            </td>\r\n                                        </tr>\r\n                                    ))\r\n                                )}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n\r\n                    {/* Inline Add Task Row */}\r\n                    <div className=\"bg-zinc-50 rounded-2xl border-2 border-dashed border-zinc-200 hover:border-yellow-400/50 transition-colors p-4 flex gap-4 items-center\">\r\n                        <div className=\"w-6 h-6 rounded-lg border-2 border-zinc-300 bg-white\" />\r\n                        <form onSubmit={handleAdd} className=\"flex-1 flex flex-col md:flex-row md:items-center gap-4\">\r\n                            <input\r\n                                type=\"text\"\r\n                                value={newItemTitle}\r\n                                onChange={(e) => setNewItemTitle(e.target.value)}\r\n                                placeholder=\"Add a new task... (Press Enter)\"\r\n                                className=\"flex-1 bg-transparent border-none p-0 text-base font-medium placeholder-zinc-400 focus:ring-0 text-zinc-900\"\r\n                            />\r\n\r\n                            <div className=\"relative\">\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={userSearch}\r\n                                    onChange={(e) => {\r\n                                        setUserSearch(e.target.value)\r\n                                        searchUsers(e.target.value)\r\n                                        setNewItemUser(null)\r\n                                    }}\r\n                                    placeholder={newItemUser ? newItemUser.full_name : \"@ Assign\"}\r\n                                    className={`bg-white text-xs font-bold py-2 px-3 rounded-xl border transition-all w-32 truncate ${newItemUser\r\n                                        ? 'border-blue-200 bg-blue-50 text-blue-700'\r\n                                        : 'border-zinc-200 text-zinc-500 focus:border-yellow-400 focus:ring-0'\r\n                                        }`}\r\n                                />\r\n                                {userSearch && userOptions.length > 0 && !newItemUser && (\r\n                                    <div className=\"absolute bottom-full right-0 mb-2 w-48 bg-white border border-zinc-100 rounded-xl shadow-xl overflow-hidden z-20\">\r\n                                        {userOptions.map(u => (\r\n                                            <div\r\n                                                key={u.id}\r\n                                                onClick={() => {\r\n                                                    setNewItemUser(u)\r\n                                                    setUserSearch('')\r\n                                                    setUserOptions([])\r\n                                                }}\r\n                                                className=\"p-3 hover:bg-yellow-50 cursor-pointer text-sm font-medium border-b border-zinc-50 last:border-0 text-zinc-700\"\r\n                                            >\r\n                                                {u.full_name}\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n\r\n                            <button\r\n                                type=\"submit\"\r\n                                disabled={!newItemTitle.trim()}\r\n                                className=\"p-2 bg-zinc-900 text-yellow-400 rounded-lg shadow-sm hover:scale-105 transition-all disabled:opacity-0 disabled:scale-0\"\r\n                            >\r\n                                <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"3\" d=\"M12 4v16m8-8H4\" />\r\n                                </svg>\r\n                            </button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(app)\\dashboard\\DashboardTabOverview.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'router' is assigned a value but never used.","line":17,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react'\r\nimport { EventDetails, ProfileResponse } from '@/services/api.types'\r\nimport { updateEvent } from '@/services/api'\r\nimport { toast } from 'react-hot-toast'\r\nimport { useRouter } from 'next/navigation'\r\nimport { differenceInDays, differenceInHours } from 'date-fns'\r\nimport useSWR from 'swr'\r\nimport { getEventAttendanceStats } from '@/services/api'\r\n\r\ninterface DashboardTabOverviewProps {\r\n    event: EventDetails\r\n    user: ProfileResponse | null\r\n    onUpdate: () => void\r\n}\r\n\r\nexport function DashboardTabOverview({ event, user, onUpdate }: DashboardTabOverviewProps) {\r\n    const router = useRouter()\r\n    const [isEditing, setIsEditing] = useState(false)\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    // Check permissions\r\n    const canEdit = user?.user_id === event.organizer_id\r\n\r\n    // Date Logic\r\n    const startDate = new Date(event.start_datetime)\r\n    const daysLeft = differenceInDays(startDate, new Date())\r\n    const hoursLeft = differenceInHours(startDate, new Date())\r\n    const isPast = hoursLeft < 0\r\n\r\n    // Form State\r\n    const [form, setForm] = useState({\r\n        title: event.title,\r\n        description: event.description || '',\r\n        venue_remark: event.venue_remark || '',\r\n        max_participant: event.max_participant || 0,\r\n        start_datetime: event.start_datetime.slice(0, 16),\r\n        end_datetime: event.end_datetime.slice(0, 16),\r\n    })\r\n\r\n    const handleUpdate = async (e?: React.FormEvent) => {\r\n        if (e) e.preventDefault()\r\n        if (!canEdit) return\r\n\r\n        setLoading(true)\r\n        try {\r\n            await updateEvent(event.id, {\r\n                ...form,\r\n                max_participant: form.max_participant > 0 ? form.max_participant : null,\r\n                start_datetime: new Date(form.start_datetime).toISOString(),\r\n                end_datetime: new Date(form.end_datetime).toISOString(),\r\n            })\r\n            toast.success('Event settings updated')\r\n            setIsEditing(false) // Exit edit mode on success\r\n            onUpdate()\r\n        } catch (error) {\r\n            console.error(error)\r\n            toast.error('Failed to update event')\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    // Fetch Stats\r\n    const { data: stats } = useSWR(`/events/${event.id}/attendance/stats`, () => getEventAttendanceStats(event.id))\r\n    const totalParticipants = stats?.total_participants || 0\r\n\r\n    return (\r\n        <div className=\"max-w-6xl mx-auto animate-fadeIn space-y-6\">\r\n            <div className=\"w-full\">\r\n                {isEditing && canEdit ? (\r\n                    // EDIT MODE\r\n                    <form onSubmit={handleUpdate} className=\"bg-white rounded-[2.5rem] border border-zinc-200 p-10 shadow-sm space-y-8\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <h3 className=\"text-2xl font-black text-zinc-900\">Edit Details</h3>\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={() => setIsEditing(false)}\r\n                                    className=\"px-5 py-2.5 text-zinc-600 font-bold text-sm hover:text-zinc-900 transition-colors\"\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                                <button\r\n                                    type=\"submit\"\r\n                                    disabled={loading}\r\n                                    className=\"px-5 py-2.5 bg-zinc-900 text-white rounded-xl font-bold text-sm shadow-md hover:bg-zinc-800 transition-all disabled:opacity-50\"\r\n                                >\r\n                                    {loading ? 'Saving...' : 'Save Changes'}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-6\">\r\n                            <div>\r\n                                <label className=\"block text-xs font-bold text-zinc-500 uppercase tracking-wider mb-2\">Title</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={form.title}\r\n                                    onChange={(e) => setForm({ ...form, title: e.target.value })}\r\n                                    className=\"block w-full rounded-2xl border-zinc-200 bg-zinc-50 focus:bg-white focus:border-yellow-400 focus:ring-yellow-400 py-3 px-4 font-bold text-zinc-900\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-xs font-bold text-zinc-500 uppercase tracking-wider mb-2\">Description</label>\r\n                                <textarea\r\n                                    rows={5}\r\n                                    value={form.description}\r\n                                    onChange={(e) => setForm({ ...form, description: e.target.value })}\r\n                                    className=\"block w-full rounded-2xl border-zinc-200 bg-zinc-50 focus:bg-white focus:border-yellow-400 focus:ring-yellow-400 py-3 px-4 text-zinc-900 text-sm leading-relaxed\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                                <div>\r\n                                    <label className=\"block text-xs font-bold text-zinc-500 uppercase tracking-wider mb-2\">Venue</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={form.venue_remark}\r\n                                        onChange={(e) => setForm({ ...form, venue_remark: e.target.value })}\r\n                                        className=\"block w-full rounded-2xl border-zinc-200 bg-zinc-50 focus:bg-white focus:border-yellow-400 focus:ring-yellow-400 py-3 px-4 text-zinc-900\"\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-xs font-bold text-zinc-500 uppercase tracking-wider mb-2\">Max Participants</label>\r\n                                    <input\r\n                                        type=\"number\"\r\n                                        min=\"0\"\r\n                                        value={form.max_participant}\r\n                                        onChange={(e) => setForm({ ...form, max_participant: parseInt(e.target.value) || 0 })}\r\n                                        className=\"block w-full rounded-2xl border-zinc-200 bg-zinc-50 focus:bg-white focus:border-yellow-400 focus:ring-yellow-400 py-3 px-4 text-zinc-900\"\r\n                                    />\r\n                                    <p className=\"text-[10px] text-zinc-400 mt-2 font-medium\">Set to 0 for unlimited.</p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                                <div>\r\n                                    <label className=\"block text-xs font-bold text-zinc-500 uppercase tracking-wider mb-2\">Start Date</label>\r\n                                    <input\r\n                                        type=\"datetime-local\"\r\n                                        value={form.start_datetime}\r\n                                        onChange={(e) => setForm({ ...form, start_datetime: e.target.value })}\r\n                                        className=\"block w-full rounded-2xl border-zinc-200 bg-zinc-50 focus:bg-white focus:border-yellow-400 focus:ring-yellow-400 py-3 px-4 text-zinc-900 text-sm\"\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-xs font-bold text-zinc-500 uppercase tracking-wider mb-2\">End Date</label>\r\n                                    <input\r\n                                        type=\"datetime-local\"\r\n                                        value={form.end_datetime}\r\n                                        onChange={(e) => setForm({ ...form, end_datetime: e.target.value })}\r\n                                        className=\"block w-full rounded-2xl border-zinc-200 bg-zinc-50 focus:bg-white focus:border-yellow-400 focus:ring-yellow-400 py-3 px-4 text-zinc-900 text-sm\"\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                ) : (\r\n                    // READ ONLY MODE (Redesigned - Clean & Compact)\r\n                    <div className=\"space-y-6\">\r\n                        {/* 1. Metrics Strip (No Cards, Just Clean Stats) */}\r\n                        <div className=\"bg-white rounded-2xl border border-zinc-200 p-6 shadow-sm flex flex-col md:flex-row md:items-center justify-around gap-6\">\r\n\r\n                            {/* Status */}\r\n                            <div className=\"flex items-center gap-4\">\r\n                                <div className={`p-3 rounded-xl ${event.status === 'published' ? 'bg-green-100 text-green-600' : 'bg-zinc-100 text-zinc-500'}`}>\r\n                                    <svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                                    </svg>\r\n                                </div>\r\n                                <div>\r\n                                    <h4 className=\"text-xs font-bold text-zinc-400 uppercase tracking-wider\">Status</h4>\r\n                                    <div className=\"flex items-center gap-2\">\r\n                                        <span className=\"text-lg font-black text-zinc-900 capitalize\">{event.status}</span>\r\n                                        {event.status === 'published' && <span className=\"h-2 w-2 rounded-full bg-green-500 animate-pulse\"></span>}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Divider (Hidden on mobile) */}\r\n                            <div className=\"hidden md:block w-px h-12 bg-zinc-100\"></div>\r\n\r\n                            {/* Timeline */}\r\n                            <div className=\"flex items-center gap-4\">\r\n                                <div className=\"p-3 rounded-xl bg-yellow-100 text-yellow-600\">\r\n                                    <svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                                    </svg>\r\n                                </div>\r\n                                <div>\r\n                                    <h4 className=\"text-xs font-bold text-zinc-400 uppercase tracking-wider\">Timeline</h4>\r\n                                    <div className=\"flex items-baseline gap-1\">\r\n                                        {isPast ? (\r\n                                            <span className=\"text-lg font-black text-zinc-900\">Ended</span>\r\n                                        ) : (\r\n                                            <>\r\n                                                <span className=\"text-lg font-black text-zinc-900\">{daysLeft}</span>\r\n                                                <span className=\"text-xs font-bold text-zinc-500\">Days Left</span>\r\n                                            </>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Divider */}\r\n                            <div className=\"hidden md:block w-px h-12 bg-zinc-100\"></div>\r\n\r\n                            {/* Registrations */}\r\n                            <div className=\"flex items-center gap-4\">\r\n                                <div className=\"p-3 rounded-xl bg-purple-100 text-purple-600\">\r\n                                    <svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\" />\r\n                                    </svg>\r\n                                </div>\r\n                                <div>\r\n                                    <h4 className=\"text-xs font-bold text-zinc-400 uppercase tracking-wider\">Registrations</h4>\r\n                                    <div className=\"flex items-baseline gap-1\">\r\n                                        <span className=\"text-lg font-black text-zinc-900\">{totalParticipants}</span>\r\n                                        <span className=\"text-xs font-bold text-zinc-500\">\r\n                                            / {event.max_participant ? event.max_participant : ''}\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* 2. Main Detail Area (NO ACTIONS SIDEBAR) */}\r\n                        <div className=\"bg-white rounded-2xl border border-zinc-200 overflow-hidden shadow-sm\">\r\n\r\n                            {/* About & Dates */}\r\n                            <div className=\"p-8\">\r\n                                <div className=\"flex items-center justify-between mb-6\">\r\n                                    <h3 className=\"text-lg font-black text-zinc-900\">About Event</h3>\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                        <button\r\n                                            onClick={() => window.open(`/events/${event.id}`, '_blank')}\r\n                                            className=\"text-xs font-bold text-zinc-500 hover:text-zinc-900 transition-colors flex items-center gap-1\"\r\n                                        >\r\n                                            <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14\" />\r\n                                            </svg>\r\n                                            View Public Page\r\n                                        </button>\r\n                                        {canEdit && (\r\n                                            <button\r\n                                                onClick={() => setIsEditing(true)}\r\n                                                className=\"text-xs font-bold text-zinc-500 hover:text-zinc-900 transition-colors flex items-center gap-1\"\r\n                                            >\r\n                                                <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z\" />\r\n                                                </svg>\r\n                                                Edit\r\n                                            </button>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"prose prose-zinc prose-sm max-w-none\">\r\n                                    <p className=\"text-zinc-600 leading-relaxed whitespace-pre-wrap\">\r\n                                        {form.description || 'No description provided.'}\r\n                                    </p>\r\n                                </div>\r\n\r\n                                <div className=\"mt-8 grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                                    <div className=\"flex gap-3\">\r\n                                        <div className=\"mt-1\">\r\n                                            <svg className=\"w-5 h-5 text-zinc-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" />\r\n                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n                                            </svg>\r\n                                        </div>\r\n                                        <div>\r\n                                            <h4 className=\"text-xs font-bold text-zinc-400 uppercase tracking-wider mb-1\">Venue</h4>\r\n                                            <p className=\"text-sm font-semibold text-zinc-900\">{form.venue_remark || 'No venue set'}</p>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"flex gap-3\">\r\n                                        <div className=\"mt-1\">\r\n                                            <svg className=\"w-5 h-5 text-zinc-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                                            </svg>\r\n                                        </div>\r\n                                        <div>\r\n                                            <h4 className=\"text-xs font-bold text-zinc-400 uppercase tracking-wider mb-1\">Schedule</h4>\r\n                                            <p className=\"text-sm font-semibold text-zinc-900\">\r\n                                                {new Date(event.start_datetime).toLocaleDateString()}\r\n                                            </p>\r\n                                            <p className=\"text-xs text-zinc-500 mt-0.5\">\r\n                                                {new Date(event.start_datetime).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })} - {new Date(event.end_datetime).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(app)\\dashboard\\DashboardTabPeople.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Image' is defined but never used.","line":5,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":26,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":31},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchParticipants'. Either include it or remove the dependency array.","line":42,"column":8,"nodeType":"ArrayExpression","endLine":42,"endColumn":18,"suggestions":[{"desc":"Update the dependencies array to be: [event.id, fetchParticipants]","fix":{"range":[1583,1593],"text":"[event.id, fetchParticipants]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":100,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":100,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4188,4191],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4188,4191],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":136,"column":49,"nodeType":"JSXOpeningElement","endLine":140,"endColumn":51}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react'\r\nimport { EventDetails, EventParticipantDetails, ProfileResponse } from '@/services/api.types'\r\nimport { getEventParticipants, getProfileByUserId, removeEventParticipant } from '@/services/api'\r\nimport { toast } from 'react-hot-toast'\r\nimport Image from 'next/image'\r\n\r\ninterface DashboardTabPeopleProps {\r\n    event: EventDetails\r\n    onInvite?: () => void\r\n}\r\n\r\nexport function DashboardTabPeople({ event, onInvite }: DashboardTabPeopleProps) {\r\n    const [participants, setParticipants] = useState<(EventParticipantDetails & { profile?: ProfileResponse })[]>([])\r\n    const [loading, setLoading] = useState(true)\r\n    const [filter, setFilter] = useState<'all' | 'speaker' | 'audience' | 'staff'>('all')\r\n\r\n    const fetchParticipants = async () => {\r\n        try {\r\n            const data = await getEventParticipants(event.id)\r\n            // Enrich with profile data\r\n            const enriched = await Promise.all(\r\n                data.map(async (p) => {\r\n                    try {\r\n                        const profile = await getProfileByUserId(p.user_id)\r\n                        return { ...p, profile }\r\n                    } catch (e) {\r\n                        return p\r\n                    }\r\n                })\r\n            )\r\n            setParticipants(enriched)\r\n        } catch (error) {\r\n            console.error(error)\r\n            toast.error('Failed to load participants')\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        fetchParticipants()\r\n    }, [event.id])\r\n\r\n    const handleRemove = async (participantId: string) => {\r\n        if (!confirm('Remove this person from the event?')) return\r\n        try {\r\n            await removeEventParticipant(event.id, participantId)\r\n            setParticipants(prev => prev.filter(p => p.id !== participantId))\r\n            toast.success('Removed successfully')\r\n        } catch (error) {\r\n            console.error(error)\r\n            toast.error('Failed to remove participant')\r\n        }\r\n    }\r\n\r\n    const filtered = participants.filter(p => {\r\n        if (filter === 'all') return true\r\n        if (filter === 'speaker') return p.role === 'speaker'\r\n        if (filter === 'audience') return p.role === 'audience' || p.role === 'student'\r\n        if (filter === 'staff') return p.role === 'organizer' || p.role === 'committee'\r\n        return true\r\n    })\r\n\r\n    const getStatusColor = (status: string) => {\r\n        switch (status) {\r\n            case 'accepted': return 'bg-green-100 text-green-700'\r\n            case 'pending': return 'bg-yellow-100 text-yellow-700'\r\n            case 'rejected': return 'bg-red-100 text-red-700'\r\n            default: return 'bg-zinc-100 text-zinc-500'\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"max-w-6xl mx-auto animate-fadeIn space-y-6\">\r\n            <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\r\n                <div />\r\n                {onInvite && (\r\n                    <button\r\n                        onClick={onInvite}\r\n                        className=\"px-5 py-2.5 bg-zinc-900 text-yellow-400 rounded-xl font-bold text-sm hover:bg-zinc-800 transition-all shadow-sm flex items-center gap-2\"\r\n                    >\r\n                        <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2.5\" d=\"M12 4v16m8-8H4\" />\r\n                        </svg>\r\n                        Invite People\r\n                    </button>\r\n                )}\r\n            </div>\r\n\r\n            {/* Filters */}\r\n            <div className=\"flex gap-2 border-b border-zinc-100 pb-1 overflow-x-auto\">\r\n                {[\r\n                    { key: 'all', label: 'All' },\r\n                    { key: 'speaker', label: 'Speakers' },\r\n                    { key: 'staff', label: 'Staff' },\r\n                    { key: 'audience', label: 'Attendees' },\r\n                ].map((f) => (\r\n                    <button\r\n                        key={f.key}\r\n                        onClick={() => setFilter(f.key as any)}\r\n                        className={`px-4 py-2 text-sm font-bold rounded-lg whitespace-nowrap transition-all ${filter === f.key\r\n                            ? 'bg-zinc-900 text-white shadow-md'\r\n                            : 'text-zinc-500 hover:text-zinc-900 hover:bg-zinc-50'\r\n                            }`}\r\n                    >\r\n                        {f.label}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n\r\n            {loading ? (\r\n                <div className=\"flex justify-center py-12\">\r\n                    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-400\"></div>\r\n                </div>\r\n            ) : filtered.length === 0 ? (\r\n                <div className=\"bg-zinc-50 rounded-[2rem] p-12 text-center border border-zinc-100\">\r\n                    <p className=\"text-zinc-400 font-medium\">No one found in this category.</p>\r\n                </div>\r\n            ) : (\r\n                <div className=\"bg-white rounded-2xl border border-zinc-200 overflow-hidden shadow-sm\">\r\n                    <table className=\"w-full text-left\">\r\n                        <thead className=\"bg-zinc-50 border-b border-zinc-100\">\r\n                            <tr>\r\n                                <th className=\"px-6 py-4 text-xs font-bold text-zinc-500 uppercase tracking-wider\">User</th>\r\n                                <th className=\"px-6 py-4 text-xs font-bold text-zinc-500 uppercase tracking-wider\">Role</th>\r\n                                <th className=\"px-6 py-4 text-xs font-bold text-zinc-500 uppercase tracking-wider\">Status</th>\r\n                                <th className=\"px-6 py-4 text-right text-xs font-bold text-zinc-500 uppercase tracking-wider\">Actions</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"divide-y divide-zinc-100\">\r\n                            {filtered.map((item) => (\r\n                                <tr key={item.id} className=\"hover:bg-zinc-50/50 transition-colors group\">\r\n                                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                        <div className=\"flex items-center gap-4\">\r\n                                            {item.profile?.avatar_url ? (\r\n                                                <img\r\n                                                    src={item.profile.avatar_url}\r\n                                                    alt={item.profile.full_name}\r\n                                                    className=\"w-10 h-10 rounded-full object-cover ring-2 ring-zinc-50\"\r\n                                                />\r\n                                            ) : (\r\n                                                <div className=\"w-10 h-10 rounded-full bg-zinc-100 flex items-center justify-center text-zinc-400 font-bold\">\r\n                                                    {item.profile?.full_name?.charAt(0) || '?'}\r\n                                                </div>\r\n                                            )}\r\n                                            <div>\r\n                                                <div className=\"font-bold text-zinc-900\">{item.profile?.full_name || 'Unknown User'}</div>\r\n                                                <div className=\"text-xs text-zinc-500\">{item.profile?.email || 'No email'}</div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                        <span className=\"text-sm font-medium text-zinc-700 capitalize block px-2 py-1 rounded-md bg-zinc-100 w-fit\">\r\n                                            {item.role}\r\n                                        </span>\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                        <span className={`px-2.5 py-1 rounded-full text-[10px] font-bold uppercase tracking-wider ${getStatusColor(item.status)}`}>\r\n                                            {item.status}\r\n                                        </span>\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4 whitespace-nowrap text-right\">\r\n                                        <button\r\n                                            onClick={() => handleRemove(item.id)}\r\n                                            className=\"text-zinc-300 hover:text-red-500 transition-colors p-2 rounded-lg hover:bg-red-50\"\r\n                                            title=\"Remove participant\"\r\n                                        >\r\n                                            <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\r\n                                            </svg>\r\n                                        </button>\r\n                                    </td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(app)\\dashboard\\DashboardTabProposals.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":112,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":112,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4617,4620],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4617,4620],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchProposals'. Either include it or remove the dependency array.","line":126,"column":8,"nodeType":"ArrayExpression","endLine":126,"endColumn":18,"suggestions":[{"desc":"Update the dependencies array to be: [event.id, fetchProposals]","fix":{"range":[4975,4985],"text":"[event.id, fetchProposals]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":197,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":197,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7558,7561],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7558,7561],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react'\r\nimport { EventDetails, EventProposalResponse, EventProposalCreate } from '@/services/api.types'\r\nimport { getEventProposals, createEventProposalWithFile, deleteEventProposal } from '@/services/api'\r\nimport { toast } from 'react-hot-toast'\r\nimport { Dialog, Transition } from '@headlessui/react'\r\n\r\nimport { ConfirmationModal } from '@/components/ui/ConfirmationModal'\r\n\r\ninterface DashboardTabProposalsProps {\r\n    event: EventDetails\r\n}\r\n\r\n// Simple internal component for the template editor\r\nfunction TemplateEditor({ type, initialContent }: { type: string, initialContent: string }) {\r\n    const [content, setContent] = useState(initialContent)\r\n\r\n    const handleCopy = () => {\r\n        navigator.clipboard.writeText(content)\r\n        toast.success('Template copied to clipboard!')\r\n    }\r\n\r\n    return (\r\n        <div className=\"bg-white rounded-2xl border border-zinc-200 p-6 shadow-sm space-y-4 animate-fadeIn\">\r\n            <div className=\"flex items-center justify-between\">\r\n                <div>\r\n                    <h4 className=\"text-lg font-bold text-zinc-900 capitalize\">{type} Template</h4>\r\n                    <p className=\"text-zinc-500 text-sm\">Customize and use this template for your proposals.</p>\r\n                </div>\r\n                <div className=\"flex gap-2\">\r\n                    <button\r\n                        onClick={handleCopy}\r\n                        className=\"px-4 py-2 bg-zinc-100 text-zinc-700 font-bold rounded-xl hover:bg-zinc-200 transition-colors text-sm\"\r\n                    >\r\n                        Copy Text\r\n                    </button>\r\n                    <button\r\n                        onClick={() => toast.success(`${type} template exported (mock)!`)}\r\n                        className=\"px-4 py-2 bg-zinc-900 text-yellow-400 font-bold rounded-xl hover:bg-zinc-800 transition-colors text-sm\"\r\n                    >\r\n                        Export PDF\r\n                    </button>\r\n                </div>\r\n            </div>\r\n            <textarea\r\n                className=\"w-full h-[400px] p-4 rounded-xl border border-zinc-200 bg-zinc-50 focus:bg-white focus:border-yellow-400 focus:ring-yellow-400 font-mono text-sm leading-relaxed resize-none\"\r\n                value={content}\r\n                onChange={(e) => setContent(e.target.value)}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nconst SPEAKER_TEMPLATE_DEFAULT = `Subject: Invitation to Speak at [Event Name]\r\n\r\nDear [Speaker Name],\r\n\r\nI hope this email finds you well.\r\n\r\nMy name is [Your Name] and I am the [Your Role] for [Event Name], taking place on [Date] at [Venue].\r\n\r\nWe have been following your work on [Topic] and would be honored to have you join us as a keynote speaker. Our audience of [Number] [Audience Type] would greatly benefit from your insights.\r\n\r\nCould we schedule a brief call to discuss this opportunity further?\r\n\r\nBest regards,\r\n\r\n[Your Name]\r\n[Organization]`\r\n\r\nconst SPONSOR_TEMPLATE_DEFAULT = `Subject: Partnership Opportunity: [Event Name] x [Company Name]\r\n\r\nDear [Contact Name],\r\n\r\nI am writing to you regarding an exciting partnership opportunity for [Event Name], a premier event for [Event Focus] hosted by [Organization].\r\n\r\nScheduled for [Date], we are expecting over [Number] attendees. We believe [Company Name]'s values align perfectly with our mission.\r\n\r\nWe have drafted a sponsorship proposal (attached) outlining various tiers and benefits. We would love to have [Company Name] as a key partner.\r\n\r\nLooking forward to your thoughts.\r\n\r\nSincerely,\r\n\r\n[Your Name]\r\n[Organization]`\r\n\r\nexport function DashboardTabProposals({ event }: DashboardTabProposalsProps) {\r\n    const [proposals, setProposals] = useState<EventProposalResponse[]>([])\r\n    const [loading, setLoading] = useState(true)\r\n    const [activeTab, setActiveTab] = useState<'all' | 'speaker_template' | 'sponsor_template'>('all')\r\n\r\n    // Upload State\r\n    const [isUploadOpen, setIsUploadOpen] = useState(false)\r\n    const [uploadForm, setUploadForm] = useState<EventProposalCreate & { file: File | null }>({\r\n        title: '',\r\n        description: '',\r\n        file_url: '',\r\n        file: null\r\n    })\r\n    const [uploading, setUploading] = useState(false)\r\n\r\n    // Preview State\r\n    const [previewUrl, setPreviewUrl] = useState<string | null>(null)\r\n\r\n    const [isRestricted, setIsRestricted] = useState(false)\r\n\r\n    const fetchProposals = async () => {\r\n        try {\r\n            const data = await getEventProposals(event.id)\r\n            setProposals(data)\r\n            setIsRestricted(false)\r\n        } catch (error: any) {\r\n            if (error.response?.status === 403) {\r\n                setIsRestricted(true)\r\n            } else {\r\n                console.error(error)\r\n                toast.error('Failed to load proposals')\r\n            }\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        fetchProposals()\r\n    }, [event.id])\r\n\r\n    const handleUpload = async (e: React.FormEvent) => {\r\n        e.preventDefault()\r\n        if (!uploadForm.title || !uploadForm.file) {\r\n            toast.error('Please provide a title and a file')\r\n            return\r\n        }\r\n\r\n        setUploading(true)\r\n        try {\r\n            await createEventProposalWithFile(event.id, {\r\n                title: uploadForm.title,\r\n                description: uploadForm.description\r\n            }, uploadForm.file)\r\n\r\n            toast.success('Proposal uploaded!')\r\n            setIsUploadOpen(false)\r\n            setUploadForm({ title: '', description: '', file_url: '', file: null })\r\n            fetchProposals()\r\n        } catch (error) {\r\n            console.error(error)\r\n            toast.error('Failed to upload proposal')\r\n        } finally {\r\n            setUploading(false)\r\n        }\r\n    }\r\n\r\n    // Delete Modal State\r\n    const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false)\r\n    const [proposalToDelete, setProposalToDelete] = useState<string | null>(null)\r\n    const [isDeleting, setIsDeleting] = useState(false)\r\n\r\n    const handleDeleteClick = (id: string) => {\r\n        setProposalToDelete(id)\r\n        setIsDeleteModalOpen(true)\r\n    }\r\n\r\n    const confirmDelete = async () => {\r\n        if (!proposalToDelete) return\r\n        setIsDeleting(true)\r\n        try {\r\n            await deleteEventProposal(event.id, proposalToDelete)\r\n            setProposals(proposals.filter(p => p.id !== proposalToDelete))\r\n            toast.success('Proposal deleted')\r\n            setIsDeleteModalOpen(false)\r\n        } catch (error) {\r\n            console.error(error)\r\n            toast.error('Failed to delete proposal')\r\n        } finally {\r\n            setIsDeleting(false)\r\n            setProposalToDelete(null)\r\n        }\r\n    }\r\n\r\n    // AI Logic\r\n\r\n\r\n    return (\r\n        <div className=\"max-w-6xl mx-auto animate-fadeIn space-y-6\">\r\n\r\n            {/* Header / Tabs */}\r\n            <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-4\">\r\n                <div className=\"flex gap-2 border-b border-zinc-100 pb-1 overflow-x-auto\">\r\n                    {[\r\n                        { key: 'all', label: 'All Proposals' },\r\n                        { key: 'speaker_template', label: 'Speaker Template' },\r\n                        { key: 'sponsor_template', label: 'Sponsor Template' },\r\n                    ].map((tab) => (\r\n                        <button\r\n                            key={tab.key}\r\n                            onClick={() => setActiveTab(tab.key as any)}\r\n                            className={`px-4 py-2 text-sm font-bold rounded-lg whitespace-nowrap transition-all ${activeTab === tab.key\r\n                                ? 'bg-zinc-900 text-white shadow-md'\r\n                                : 'text-zinc-500 hover:text-zinc-900 hover:bg-zinc-50'\r\n                                }`}\r\n                        >\r\n                            {tab.label}\r\n                        </button>\r\n                    ))}\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-3\">\r\n                    <button\r\n                        onClick={() => toast('AI Generation Coming Soon!', { icon: '' })}\r\n                        className=\"px-4 py-2 bg-indigo-50 text-indigo-600 font-bold rounded-xl hover:bg-indigo-100 transition-colors flex items-center gap-2 text-xs md:text-sm\"\r\n                    >\r\n                        <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z\" />\r\n                        </svg>\r\n                        Generate with AI\r\n                    </button>\r\n\r\n                    <button\r\n                        onClick={() => setIsUploadOpen(true)}\r\n                        className=\"px-5 py-2.5 bg-zinc-900 text-yellow-400 font-bold rounded-xl shadow-md hover:bg-zinc-800 transition-all flex items-center gap-2 text-sm\"\r\n                    >\r\n                        <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\" />\r\n                        </svg>\r\n                        Upload Proposal\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Content Area */}\r\n            {activeTab === 'all' && (\r\n                loading ? (\r\n                    <div className=\"flex justify-center py-12\">\r\n                        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-400\"></div>\r\n                    </div>\r\n                ) : isRestricted ? (\r\n                    <div className=\"bg-zinc-50 rounded-[2rem] p-12 text-center border border-zinc-100 flex flex-col items-center justify-center space-y-4\">\r\n                        <div className=\"w-16 h-16 bg-zinc-200 rounded-full flex items-center justify-center text-zinc-400\">\r\n                            <svg className=\"w-8 h-8\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\r\n                            </svg>\r\n                        </div>\r\n                        <div>\r\n                            <h3 className=\"text-lg font-bold text-zinc-900\">Access Restricted</h3>\r\n                            <p className=\"text-zinc-500\">Only organizers, committee members, and speakers can view proposals.</p>\r\n                        </div>\r\n                    </div>\r\n                ) : proposals.length === 0 ? (\r\n                    <div className=\"bg-zinc-50 rounded-[2rem] p-12 text-center border border-zinc-100 flex flex-col items-center justify-center\">\r\n                        <p className=\"text-zinc-400 font-medium mb-4\">No proposals found.</p>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"bg-white rounded-2xl border border-zinc-200 overflow-hidden shadow-sm animate-fadeIn\">\r\n                        <table className=\"w-full text-left\">\r\n                            <thead className=\"bg-zinc-50 border-b border-zinc-100\">\r\n                                <tr>\r\n                                    <th className=\"px-6 py-4 text-xs font-bold text-zinc-500 uppercase tracking-wider\">Proposal</th>\r\n                                    <th className=\"px-6 py-4 text-xs font-bold text-zinc-500 uppercase tracking-wider hidden md:table-cell\">Description</th>\r\n                                    <th className=\"px-6 py-4 text-right text-xs font-bold text-zinc-500 uppercase tracking-wider\">Actions</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody className=\"divide-y divide-zinc-100\">\r\n                                {proposals.map(proposal => (\r\n                                    <tr key={proposal.id} className=\"hover:bg-zinc-50/50 transition-colors group\">\r\n                                        <td className=\"px-6 py-4\">\r\n                                            <div className=\"flex items-center gap-4\">\r\n                                                <div className=\"w-10 h-10 bg-yellow-100 text-yellow-600 rounded-lg flex items-center justify-center font-bold text-xs\">\r\n                                                    {proposal.file_url?.endsWith('.pdf') ? 'PDF' : 'DOC'}\r\n                                                </div>\r\n                                                <div>\r\n                                                    <div className=\"font-bold text-zinc-900 line-clamp-1 max-w-[200px]\" title={proposal.title || ''}>{proposal.title}</div>\r\n                                                    <div className=\"text-xs text-zinc-400 md:hidden line-clamp-1\">{proposal.description}</div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 hidden md:table-cell\">\r\n                                            <p className=\"text-sm text-zinc-600 line-clamp-2 max-w-sm\" title={proposal.description || ''}>\r\n                                                {proposal.description || '-'}\r\n                                            </p>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 text-right whitespace-nowrap\">\r\n                                            <div className=\"flex items-center justify-end gap-2\">\r\n                                                <button\r\n                                                    onClick={() => setPreviewUrl(proposal.file_url || null)}\r\n                                                    className=\"text-sm font-bold text-zinc-700 hover:text-zinc-900 px-3 py-1.5 rounded-lg hover:bg-zinc-100 transition-colors\"\r\n                                                >\r\n                                                    Preview\r\n                                                </button>\r\n                                                <a\r\n                                                    href={proposal.file_url || '#'}\r\n                                                    download\r\n                                                    target=\"_blank\"\r\n                                                    className=\"text-sm font-bold text-blue-600 hover:text-blue-800 px-3 py-1.5 rounded-lg hover:bg-blue-50 transition-colors\"\r\n                                                >\r\n                                                    Download\r\n                                                </a>\r\n                                                <button\r\n                                                    onClick={() => handleDeleteClick(proposal.id)}\r\n                                                    className=\"p-1.5 text-zinc-300 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all\"\r\n                                                    title=\"Delete\"\r\n                                                >\r\n                                                    <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\r\n                                                    </svg>\r\n                                                </button>\r\n                                            </div>\r\n                                        </td>\r\n                                    </tr>\r\n                                ))}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                )\r\n            )}\r\n\r\n            {activeTab === 'speaker_template' && (\r\n                <TemplateEditor type=\"Speaker\" initialContent={SPEAKER_TEMPLATE_DEFAULT} />\r\n            )}\r\n\r\n            {activeTab === 'sponsor_template' && (\r\n                <TemplateEditor type=\"Sponsor\" initialContent={SPONSOR_TEMPLATE_DEFAULT} />\r\n            )}\r\n\r\n            {/* Upload Modal (Same as before) */}\r\n            <Transition appear show={isUploadOpen} as={Fragment}>\r\n                <Dialog as=\"div\" className=\"relative z-50\" onClose={() => setIsUploadOpen(false)}>\r\n                    <Transition.Child\r\n                        as={Fragment}\r\n                        enter=\"ease-out duration-300\"\r\n                        enterFrom=\"opacity-0\"\r\n                        enterTo=\"opacity-100\"\r\n                        leave=\"ease-in duration-200\"\r\n                        leaveFrom=\"opacity-100\"\r\n                        leaveTo=\"opacity-0\"\r\n                    >\r\n                        <div className=\"fixed inset-0 bg-black/40 backdrop-blur-sm\" />\r\n                    </Transition.Child>\r\n\r\n                    <div className=\"fixed inset-0 overflow-y-auto\">\r\n                        <div className=\"flex min-h-full items-center justify-center p-4\">\r\n                            <Transition.Child\r\n                                as={Fragment}\r\n                                enter=\"ease-out duration-300\"\r\n                                enterFrom=\"opacity-0 scale-95\"\r\n                                enterTo=\"opacity-100 scale-100\"\r\n                                leave=\"ease-in duration-200\"\r\n                                leaveFrom=\"opacity-100 scale-100\"\r\n                                leaveTo=\"opacity-0 scale-95\"\r\n                            >\r\n                                <Dialog.Panel className=\"w-full max-w-lg transform overflow-hidden rounded-[2rem] bg-white p-8 text-left align-middle shadow-xl transition-all\">\r\n                                    <Dialog.Title as=\"h3\" className=\"text-2xl font-black text-zinc-900 mb-6\">\r\n                                        Upload Proposal\r\n                                    </Dialog.Title>\r\n\r\n                                    <form onSubmit={handleUpload} className=\"space-y-4\">\r\n                                        <div>\r\n                                            <label className=\"block text-xs font-bold text-zinc-500 uppercase tracking-wider mb-2\">Title</label>\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                required\r\n                                                value={uploadForm.title || ''}\r\n                                                onChange={(e) => setUploadForm({ ...uploadForm, title: e.target.value })}\r\n                                                className=\"block w-full rounded-xl border-zinc-200 bg-zinc-50 focus:bg-white focus:border-yellow-400 focus:ring-yellow-400 py-3 px-4 font-bold\"\r\n                                                placeholder=\"e.g. Sponsorship Deck 2025\"\r\n                                            />\r\n                                        </div>\r\n\r\n                                        <div>\r\n                                            <label className=\"block text-xs font-bold text-zinc-500 uppercase tracking-wider mb-2\">Description</label>\r\n                                            <textarea\r\n                                                value={uploadForm.description || ''}\r\n                                                onChange={(e) => setUploadForm({ ...uploadForm, description: e.target.value })}\r\n                                                className=\"block w-full rounded-xl border-zinc-200 bg-zinc-50 focus:bg-white focus:border-yellow-400 focus:ring-yellow-400 py-3 px-4\"\r\n                                                rows={3}\r\n                                            />\r\n                                        </div>\r\n\r\n                                        <div>\r\n                                            <label className=\"block text-xs font-bold text-zinc-500 uppercase tracking-wider mb-2\">File (PDF/Image)</label>\r\n                                            <input\r\n                                                type=\"file\"\r\n                                                required\r\n                                                accept=\".pdf,.png,.jpg,.jpeg\"\r\n                                                onChange={(e) => setUploadForm({ ...uploadForm, file: e.target.files?.[0] || null })}\r\n                                                className=\"block w-full text-sm text-zinc-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-yellow-50 file:text-yellow-700 hover:file:bg-yellow-100\"\r\n                                            />\r\n                                        </div>\r\n\r\n                                        <div className=\"pt-4 flex justify-end gap-3\">\r\n                                            <button\r\n                                                type=\"button\"\r\n                                                onClick={() => setIsUploadOpen(false)}\r\n                                                className=\"px-5 py-2.5 rounded-xl text-zinc-500 font-bold hover:bg-zinc-100\"\r\n                                            >\r\n                                                Cancel\r\n                                            </button>\r\n                                            <button\r\n                                                type=\"submit\"\r\n                                                disabled={uploading}\r\n                                                className=\"px-6 py-2.5 bg-zinc-900 text-white rounded-xl font-bold hover:bg-zinc-800 disabled:opacity-50\"\r\n                                            >\r\n                                                {uploading ? 'Uploading...' : 'Upload'}\r\n                                            </button>\r\n                                        </div>\r\n                                    </form>\r\n                                </Dialog.Panel>\r\n                            </Transition.Child>\r\n                        </div>\r\n                    </div>\r\n                </Dialog>\r\n            </Transition>\r\n\r\n            {/* Preview Modal */}\r\n            {previewUrl && (\r\n                <div className=\"fixed inset-0 z-[60] bg-black/90 flex items-center justify-center p-4\" onClick={() => setPreviewUrl(null)}>\r\n                    <button\r\n                        className=\"absolute top-4 right-4 text-white hover:text-yellow-400\"\r\n                        onClick={() => setPreviewUrl(null)}\r\n                    >\r\n                        <svg className=\"w-8 h-8\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\r\n                        </svg>\r\n                    </button>\r\n                    <div className=\"w-full max-w-5xl h-[85vh] bg-white rounded-lg overflow-hidden\" onClick={e => e.stopPropagation()}>\r\n                        <iframe src={previewUrl} className=\"w-full h-full\" />\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            <ConfirmationModal\r\n                isOpen={isDeleteModalOpen}\r\n                onClose={() => setIsDeleteModalOpen(false)}\r\n                onConfirm={confirmDelete}\r\n                title=\"Delete Proposal\"\r\n                message=\"Are you sure you want to delete this proposal? This action cannot be undone.\"\r\n                confirmText=\"Delete\"\r\n                variant=\"danger\"\r\n                isLoading={isDeleting}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(app)\\dashboard\\DashboardTabSettings.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'router' is assigned a value but never used.","line":15,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react'\r\nimport { EventDetails } from '@/services/api.types'\r\nimport { updateEvent, openRegistration, closeRegistration, deleteEvent } from '@/services/api'\r\nimport { toast } from 'react-hot-toast'\r\nimport { useRouter } from 'next/navigation'\r\nimport { DeleteEventModal } from '@/components/modals/DeleteEventModal'\r\n\r\ninterface DashboardTabSettingsProps {\r\n    event: EventDetails\r\n    onUpdate: () => void\r\n    onDelete: () => void\r\n}\r\n\r\nexport function DashboardTabSettings({ event, onUpdate, onDelete }: DashboardTabSettingsProps) {\r\n    const router = useRouter()\r\n    const [loading, setLoading] = useState(false)\r\n    const [showDeleteModal, setShowDeleteModal] = useState(false)\r\n    const [isDeleting, setIsDeleting] = useState(false)\r\n\r\n\r\n    // We can remove form state for title/desc if this tab no longer edits them.\r\n    // Keeping simple state for toggles or direct API calls.\r\n\r\n    const toggleVisibility = async () => {\r\n        setLoading(true)\r\n        const newVisibility = event.visibility === 'public' ? 'private' : 'public'\r\n        try {\r\n            await updateEvent(event.id, { visibility: newVisibility })\r\n            toast.success(`Event is now ${newVisibility}`)\r\n            onUpdate()\r\n        } catch (error) {\r\n            console.error(error)\r\n            toast.error('Failed to change visibility')\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    const toggleRegistration = async () => {\r\n        setLoading(true)\r\n        try {\r\n            if (event.registration_status === 'opened') {\r\n                await closeRegistration(event.id)\r\n                toast.success('Registration closed')\r\n            } else {\r\n                await openRegistration(event.id)\r\n                toast.success('Registration opened')\r\n            }\r\n            onUpdate()\r\n        } catch (error) {\r\n            console.error(error)\r\n            toast.error('Failed to update registration status')\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    const handleDelete = async () => {\r\n        setIsDeleting(true)\r\n        try {\r\n            await deleteEvent(event.id)\r\n            toast.success('Event deleted')\r\n            setShowDeleteModal(false)\r\n            onDelete() // Use callback instead of router.push\r\n        } catch (error) {\r\n            console.error(error)\r\n            toast.error('Failed to delete event')\r\n        } finally {\r\n            setIsDeleting(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"space-y-12 animate-fadeIn max-w-6xl mx-auto\">\r\n\r\n            {/* Visibility Settings */}\r\n            <section>\r\n                <div className=\"bg-white rounded-[2rem] border border-zinc-200 p-8 shadow-sm flex items-center justify-between\">\r\n                    <div>\r\n                        <h4 className=\"text-lg font-bold text-zinc-900 mb-1\">\r\n                            Visibility\r\n                        </h4>\r\n                        <p className=\"text-zinc-500 text-sm font-medium\">\r\n                            {event.visibility === 'public'\r\n                                ? 'Your event is visible to everyone.'\r\n                                : 'Only you can see this event.'}\r\n                        </p>\r\n                    </div>\r\n\r\n                    <button\r\n                        onClick={toggleVisibility}\r\n                        disabled={loading}\r\n                        className={`relative inline-flex h-8 w-14 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:ring-offset-2 ${event.visibility === 'public' ? 'bg-yellow-400' : 'bg-zinc-200'\r\n                            }`}\r\n                    >\r\n                        <span\r\n                            className={`inline-block h-6 w-6 transform rounded-full bg-white transition-transform ${event.visibility === 'public' ? 'translate-x-7' : 'translate-x-1'\r\n                                }`}\r\n                        />\r\n                    </button>\r\n                </div>\r\n            </section>\r\n\r\n            {/* Capacity Settings (Read-only logic for now based on previous impl, or we can move the input here if requested, but user said 'Overview should editing those event information') \r\n               Wait, \"setting is like setting registration, visibility and publishment\". Capacity fits in \"Event Details\" usually, but sometimes limits are settings.\r\n               User said: \"Overview should editing those event information\" -> Title, Desc, Date, Venue, Capacity. \r\n               Settings -> Registration Status, Visibility, Publish/Unpublish (Danger/Actions).\r\n               \r\n               I will NOT put Capacity input here. I will leave Capacity editing in Overview (Event Info form).\r\n            */}\r\n\r\n            {/* Registration Controls */}\r\n            {/* Registration Controls */}\r\n            <section>\r\n                <div className=\"bg-white rounded-[2rem] border border-zinc-200 p-8 shadow-sm flex items-center justify-between\">\r\n                    <div>\r\n                        <h4 className=\"text-lg font-bold text-zinc-900 mb-1\">\r\n                            Registration Status\r\n                        </h4>\r\n                        <p className=\"text-zinc-500 text-sm font-medium\">\r\n                            {event.registration_status === 'opened'\r\n                                ? 'Participants are currently allowed to register.'\r\n                                : 'Registration is closed. No new participants can join.'}\r\n                        </p>\r\n                    </div>\r\n\r\n                    {/* Toggle Switch */}\r\n                    <button\r\n                        onClick={toggleRegistration}\r\n                        disabled={loading}\r\n                        className={`relative inline-flex h-8 w-14 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:ring-offset-2 ${event.registration_status === 'opened' ? 'bg-green-500' : 'bg-zinc-200'\r\n                            }`}\r\n                    >\r\n                        <span\r\n                            className={`inline-block h-6 w-6 transform rounded-full bg-white transition-transform ${event.registration_status === 'opened' ? 'translate-x-7' : 'translate-x-1'\r\n                                }`}\r\n                        />\r\n                    </button>\r\n                </div>\r\n            </section>\r\n\r\n            {/* Danger Zone */}\r\n            <section>\r\n                <div className=\"bg-red-50 rounded-[2rem] border border-red-100 p-8\">\r\n                    <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                            <h4 className=\"text-lg font-bold text-red-900 mb-1\">Delete Event</h4>\r\n                            <p className=\"text-red-700/80 text-sm font-medium\">\r\n                                Once deleted, this event cannot be restored.\r\n                            </p>\r\n                        </div>\r\n                        <button\r\n                            onClick={() => setShowDeleteModal(true)}\r\n                            disabled={loading}\r\n                            className=\"px-6 py-3 bg-white text-red-600 border border-red-200 rounded-xl font-bold hover:bg-red-50 transition-all shadow-sm\"\r\n                        >\r\n                            Delete Event\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </section>\r\n\r\n            {/* Delete Confirmation Modal */}\r\n            <DeleteEventModal\r\n                isOpen={showDeleteModal}\r\n                eventTitle={event.title}\r\n                onClose={() => setShowDeleteModal(false)}\r\n                onConfirm={handleDelete}\r\n                isDeleting={isDeleting}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(app)\\dashboard\\DashboardTabs.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'toast' is defined but never used.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Image' is defined but never used.","line":8,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport React, { useState } from 'react'\r\nimport { Tab } from '@headlessui/react'\r\nimport { EventDetails, ProfileResponse } from '@/services/api.types'\r\nimport { EventInviteModal } from './EventInviteModal'\r\nimport { toast } from 'react-hot-toast'\r\nimport Image from 'next/image'\r\nimport { DashboardTabChecklist } from './DashboardTabChecklist'\r\nimport { DashboardTabProposals } from './DashboardTabProposals'\r\nimport { DashboardTabOverview } from './DashboardTabOverview'\r\nimport { DashboardTabPeople } from './DashboardTabPeople'\r\nimport { DashboardTabSettings } from './DashboardTabSettings'\r\n\r\nfunction classNames(...classes: string[]) {\r\n    return classes.filter(Boolean).join(' ')\r\n}\r\n\r\ninterface DashboardTabsProps {\r\n    event: EventDetails\r\n    user: ProfileResponse | null\r\n    role?: string | null\r\n    onUpdate: () => void // Callback to refresh parent data\r\n    onDelete: () => void // Callback when event is deleted\r\n}\r\n\r\nexport function DashboardTabs({ event, user, role, onUpdate, onDelete }: DashboardTabsProps) {\r\n    const [isInviteOpen, setIsInviteOpen] = useState(false)\r\n    const [refreshPeople, setRefreshPeople] = useState(0)\r\n\r\n    const isOrganizer = user?.user_id === event.organizer_id\r\n    // Roles allowing proposal access: Organizer, Committee, Speaker, Sponsor\r\n    // If exact role strings are needed, update checks. Assuming 'committee', 'speaker', 'sponsor'.\r\n    const canViewProposals = isOrganizer || ['committee', 'speaker', 'sponsor'].includes(role || '')\r\n\r\n    const allTabs = [\r\n        { name: 'Overview', current: true },\r\n        { name: 'People', current: false, hidden: !isOrganizer }, // Organizer only for management\r\n        { name: 'Proposals', current: false, hidden: !canViewProposals },\r\n        { name: 'Checklist', current: false, hidden: !isOrganizer },\r\n        { name: 'Settings', current: false, hidden: !isOrganizer },\r\n    ]\r\n\r\n    const tabs = allTabs.filter(t => !t.hidden)\r\n\r\n    return (\r\n        <div className=\"bg-white rounded-b-[2.5rem] shadow-2xl overflow-hidden min-h-[600px] flex flex-col\">\r\n            <Tab.Group>\r\n                <div className=\"border-b border-zinc-100 px-8\">\r\n                    <Tab.List className=\"-mb-px flex space-x-8 overflow-x-auto scroller-none\">\r\n                        {tabs.map((tab) => (\r\n                            <Tab\r\n                                key={tab.name}\r\n                                className={({ selected }) =>\r\n                                    classNames(\r\n                                        selected\r\n                                            ? 'border-yellow-400 text-zinc-900'\r\n                                            : 'border-transparent text-zinc-500 hover:text-zinc-700 hover:border-zinc-300',\r\n                                        'whitespace-nowrap py-6 px-1 border-b-4 font-bold text-sm focus:outline-none transition-colors'\r\n                                    )\r\n                                }\r\n                            >\r\n                                {tab.name}\r\n                            </Tab>\r\n                        ))}\r\n                    </Tab.List>\r\n                </div>\r\n\r\n                <Tab.Panels className=\"flex-1 p-6 md:p-8 bg-zinc-50/50\">\r\n\r\n                    {/* 1. Overview Tab */}\r\n                    {!allTabs[0].hidden && (\r\n                        <Tab.Panel className=\"focus:outline-none animate-fadeIn\">\r\n                            <DashboardTabOverview event={event} user={user} onUpdate={onUpdate} />\r\n                        </Tab.Panel>\r\n                    )}\r\n\r\n                    {/* 2. People Tab */}\r\n                    {!allTabs[1].hidden && (\r\n                        <Tab.Panel className=\"focus:outline-none animate-fadeIn\">\r\n                            <DashboardTabPeople\r\n                                event={event}\r\n                                onInvite={() => setIsInviteOpen(true)}\r\n                                key={refreshPeople}\r\n                            />\r\n                        </Tab.Panel>\r\n                    )}\r\n\r\n                    {/* 3. Proposals Tab */}\r\n                    {!allTabs[2].hidden && (\r\n                        <Tab.Panel className=\"focus:outline-none\">\r\n                            <DashboardTabProposals event={event} />\r\n                        </Tab.Panel>\r\n                    )}\r\n\r\n                    {/* 4. Checklist Tab */}\r\n                    {!allTabs[3].hidden && (\r\n                        <Tab.Panel className=\"focus:outline-none\">\r\n                            <DashboardTabChecklist event={event} />\r\n                        </Tab.Panel>\r\n                    )}\r\n\r\n                    {/* 5. Settings Tab */}\r\n                    {!allTabs[4].hidden && (\r\n                        <Tab.Panel className=\"focus:outline-none\">\r\n                            <DashboardTabSettings event={event} onUpdate={onUpdate} onDelete={onDelete} />\r\n                        </Tab.Panel>\r\n                    )}\r\n\r\n                </Tab.Panels>\r\n            </Tab.Group>\r\n\r\n\r\n            <EventInviteModal\r\n                isOpen={isInviteOpen}\r\n                onClose={() => setIsInviteOpen(false)}\r\n                eventId={event.id}\r\n                eventTitle={event.title}\r\n                onSuccess={() => setRefreshPeople(prev => prev + 1)}\r\n            />\r\n        </div >\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(app)\\dashboard\\EventInviteModal.tsx","messages":[{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":7,"column":1,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":7,"endColumn":14,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[332,345],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'proposals' is assigned a value but never used.","line":24,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setProposals' is assigned a value but never used.","line":24,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":35},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":24,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1021,1024],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1021,1024],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'doSearch', 'fetchDefaultUsers', and 'search'. Either include them or remove the dependency array.","line":72,"column":8,"nodeType":"ArrayExpression","endLine":72,"endColumn":37,"suggestions":[{"desc":"Update the dependencies array to be: [isOpen, inviteRole, eventId, search, doSearch, fetchDefaultUsers]","fix":{"range":[2733,2762],"text":"[isOpen, inviteRole, eventId, search, doSearch, fetchDefaultUsers]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback received a function whose dependencies are unknown. Pass an inline function instead.","line":74,"column":29,"nodeType":"MemberExpression","endLine":74,"endColumn":46},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchDefaultUsers'. Either include it or remove the dependency array.","line":82,"column":8,"nodeType":"ArrayExpression","endLine":82,"endColumn":41,"suggestions":[{"desc":"Update the dependencies array to be: [search, debouncedSearch, isOpen, fetchDefaultUsers]","fix":{"range":[3037,3070],"text":"[search, debouncedSearch, isOpen, fetchDefaultUsers]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":100,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":100,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3653,3656],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3653,3656],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":250,"column":65,"nodeType":"JSXOpeningElement","endLine":250,"endColumn":153}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react'\r\nimport { Dialog, Transition } from '@headlessui/react'\r\nimport { Fragment } from 'react'\r\nimport { findProfiles, inviteEventParticipant, getEventParticipants } from '@/services/api'\r\nimport { ProfileResponse } from '@/services/api.types'\r\nimport { toast } from 'react-hot-toast'\r\n// @ts-ignore\r\nimport { debounce } from 'lodash'\r\n\r\ninterface EventInviteModalProps {\r\n    isOpen: boolean\r\n    onClose: () => void\r\n    eventId: string\r\n    eventTitle: string\r\n    onSuccess?: () => void\r\n}\r\n\r\nexport function EventInviteModal({ isOpen, onClose, eventId, eventTitle, onSuccess }: EventInviteModalProps) {\r\n    const [inviteRole, setInviteRole] = useState<'speaker' | 'audience'>('speaker')\r\n    const [search, setSearch] = useState('')\r\n    const [loading, setLoading] = useState(false)\r\n    const [results, setResults] = useState<ProfileResponse[]>([])\r\n    const [selectedUsers, setSelectedUsers] = useState<string[]>([])\r\n    const [proposals, setProposals] = useState<any[]>([])\r\n    const [selectedProposalId, setSelectedProposalId] = useState<string>('')\r\n    const [joinedUserIds, setJoinedUserIds] = useState<Set<string>>(new Set())\r\n\r\n    const fetchDefaultUsers = async () => {\r\n        setLoading(true)\r\n        try {\r\n            // Filter by role if needed, e.g. { role: inviteRole === 'speaker' ? 'expert' : 'student' }\r\n            const data = await findProfiles({ role: inviteRole === 'speaker' ? 'expert' : 'student' })\r\n            setResults(data)\r\n        } catch (error) {\r\n            console.error(error)\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    const doSearch = async (query: string) => {\r\n        setLoading(true)\r\n        try {\r\n            const isEmail = query.includes('@')\r\n            const commonParams = { role: inviteRole === 'speaker' ? 'expert' : 'student' }\r\n            const searchParams = isEmail ? { email: query, ...commonParams } : { name: query, ...commonParams }\r\n\r\n            const data = await findProfiles(searchParams)\r\n            setResults(data)\r\n        } catch (error) {\r\n            console.error(error)\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    // Load defaults on open or role change\r\n    useEffect(() => {\r\n        if (isOpen) {\r\n            // Fetch existing participants to exclude\r\n            getEventParticipants(eventId).then(participants => {\r\n                const ids = new Set(participants.map(p => p.user_id))\r\n                setJoinedUserIds(ids)\r\n            }).catch(console.error)\r\n\r\n            if (search) {\r\n                doSearch(search)\r\n            } else {\r\n                fetchDefaultUsers()\r\n            }\r\n        }\r\n    }, [isOpen, inviteRole, eventId])\r\n\r\n    const debouncedSearch = React.useCallback(debounce((q: string) => doSearch(q), 500), [inviteRole])\r\n\r\n    useEffect(() => {\r\n        if (search) {\r\n            debouncedSearch(search)\r\n        } else if (isOpen) {\r\n            fetchDefaultUsers()\r\n        }\r\n    }, [search, debouncedSearch, isOpen])\r\n\r\n    const toggleUser = (userId: string) => {\r\n        if (selectedUsers.includes(userId)) {\r\n            setSelectedUsers(selectedUsers.filter(id => id !== userId))\r\n        } else {\r\n            setSelectedUsers([...selectedUsers, userId])\r\n        }\r\n    }\r\n\r\n    const handleSend = async () => {\r\n        if (selectedUsers.length === 0) return\r\n\r\n        setLoading(true)\r\n        try {\r\n            const promises = selectedUsers.map(userId =>\r\n                inviteEventParticipant(eventId, {\r\n                    user_id: userId,\r\n                    role: inviteRole as any, // Cast to match stricter EventParticipantRole type if needed\r\n                    description: selectedProposalId ? `Proposal Attached: ${selectedProposalId}` : undefined\r\n                })\r\n            )\r\n\r\n            await Promise.all(promises)\r\n\r\n            const action = inviteRole === 'speaker' ? (selectedProposalId ? 'Proposals sent' : 'Invited as Speaker') : 'Invited as Attendee'\r\n            toast.success(`${action} to ${selectedUsers.length} users!`)\r\n            if (onSuccess) onSuccess()\r\n            onClose()\r\n            setSelectedUsers([])\r\n            setSelectedProposalId('')\r\n            setSearch('')\r\n        } catch (error) {\r\n            console.error(error)\r\n            toast.error('Failed to send invitations')\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    const visibleResults = results.filter(user => !joinedUserIds.has(user.user_id))\r\n\r\n    return (\r\n        <Transition appear show={isOpen} as={Fragment}>\r\n            <Dialog as=\"div\" className=\"relative z-50\" onClose={onClose}>\r\n                <Transition.Child\r\n                    as={Fragment}\r\n                    enter=\"ease-out duration-300\"\r\n                    enterFrom=\"opacity-0\"\r\n                    enterTo=\"opacity-100\"\r\n                    leave=\"ease-in duration-200\"\r\n                    leaveFrom=\"opacity-100\"\r\n                    leaveTo=\"opacity-0\"\r\n                >\r\n                    <div className=\"fixed inset-0 bg-black/40 backdrop-blur-sm\" />\r\n                </Transition.Child>\r\n\r\n                <div className=\"fixed inset-0 overflow-y-auto\">\r\n                    <div className=\"flex min-h-full items-center justify-center p-4 text-center\">\r\n                        <Transition.Child\r\n                            as={Fragment}\r\n                            enter=\"ease-out duration-300\"\r\n                            enterFrom=\"opacity-0 scale-95\"\r\n                            enterTo=\"opacity-100 scale-100\"\r\n                            leave=\"ease-in duration-200\"\r\n                            leaveFrom=\"opacity-100 scale-100\"\r\n                            leaveTo=\"opacity-0 scale-95\"\r\n                        >\r\n                            <Dialog.Panel className=\"w-full max-w-2xl transform overflow-hidden rounded-[2rem] bg-white p-8 text-left align-middle shadow-2xl transition-all border border-zinc-100\">\r\n                                <div className=\"flex items-center justify-between mb-2\">\r\n                                    <Dialog.Title as=\"h3\" className=\"text-3xl font-black text-zinc-900 tracking-tight\">\r\n                                        Invite People\r\n                                    </Dialog.Title>\r\n                                    <button onClick={onClose} className=\"p-2 rounded-full hover:bg-zinc-100 text-zinc-400 hover:text-zinc-900 transition-colors\">\r\n                                        <svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\r\n                                        </svg>\r\n                                    </button>\r\n                                </div>\r\n                                <p className=\"text-zinc-500 font-medium mb-6\">\r\n                                    Invite speakers, guests, or students to <span className=\"text-zinc-900 font-bold\">{eventTitle}</span>\r\n                                </p>\r\n\r\n                                <div className=\"space-y-6\">\r\n                                    {/* Role Selection */}\r\n                                    <div className=\"flex items-center gap-4\">\r\n                                        <span className=\"text-xs font-bold text-zinc-500 uppercase tracking-wider\">Invite As:</span>\r\n                                        <div className=\"flex bg-zinc-100 rounded-lg p-1\">\r\n                                            <button\r\n                                                onClick={() => setInviteRole('speaker')}\r\n                                                className={`px-4 py-1.5 rounded-md text-sm font-bold transition-all ${inviteRole === 'speaker' ? 'bg-white shadow text-zinc-900' : 'text-zinc-500 hover:text-zinc-700'}`}\r\n                                            >\r\n                                                Speaker\r\n                                            </button>\r\n                                            <button\r\n                                                onClick={() => setInviteRole('audience')}\r\n                                                className={`px-4 py-1.5 rounded-md text-sm font-bold transition-all ${inviteRole === 'audience' ? 'bg-white shadow text-zinc-900' : 'text-zinc-500 hover:text-zinc-700'}`}\r\n                                            >\r\n                                                Participant\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* Proposal Selector (Conditional) */}\r\n                                    {inviteRole === 'speaker' && (\r\n                                        <div className=\"space-y-2 animate-fadeIn\">\r\n                                            <label className=\"text-xs font-bold text-zinc-500 uppercase tracking-wider\">Attach Proposal (Optional)</label>\r\n                                            <select\r\n                                                value={selectedProposalId}\r\n                                                onChange={(e) => setSelectedProposalId(e.target.value)}\r\n                                                className=\"block w-full px-4 py-3 bg-zinc-50 border border-zinc-200 rounded-xl text-zinc-900 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:bg-white transition-all font-medium appearance-none\"\r\n                                            >\r\n                                                <option value=\"\">No proposal attached (General Invite)</option>\r\n                                                <option value=\"p1\">Sponsorship Proposal v1.pdf</option>\r\n                                                <option value=\"p2\">Speaker Brief.pdf</option>\r\n                                            </select>\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    {/* Search */}\r\n                                    <div className=\"relative\">\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            className=\"block w-full pl-12 pr-4 py-4 bg-zinc-50 border-transparent rounded-xl text-zinc-900 placeholder-zinc-400 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:bg-white transition-all duration-200 font-medium text-lg\"\r\n                                            placeholder={inviteRole === 'speaker' ? \"Search experts by name or email...\" : \"Search students by name or email...\"}\r\n                                            value={search}\r\n                                            onChange={(e) => setSearch(e.target.value)}\r\n                                        />\r\n                                        <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none\">\r\n                                            <svg className=\"h-6 w-6 text-zinc-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\r\n                                            </svg>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* User List */}\r\n                                    <div className=\"h-[300px] overflow-y-auto border border-zinc-100 rounded-2xl bg-white p-2 space-y-2 scrollbar-thin scrollbar-thumb-zinc-200 scrollbar-track-transparent\">\r\n                                        {loading ? (\r\n                                            <div className=\"flex items-center justify-center h-full\">\r\n                                                <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-yellow-400\"></div>\r\n                                            </div>\r\n                                        ) : visibleResults.length === 0 ? (\r\n                                            <div className=\"flex flex-col items-center justify-center h-full text-zinc-400 space-y-2\">\r\n                                                <svg className=\"w-12 h-12 opacity-20\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\" />\r\n                                                </svg>\r\n                                                <p className=\"font-medium\">No users found</p>\r\n                                            </div>\r\n                                        ) : (\r\n                                            visibleResults.map(user => (\r\n                                                <div\r\n                                                    key={user.id}\r\n                                                    onClick={() => toggleUser(user.user_id)}\r\n                                                    className={`flex items-center p-3 rounded-xl cursor-pointer transition-all border group ${selectedUsers.includes(user.user_id)\r\n                                                        ? 'bg-yellow-50 border-yellow-400/50 shadow-sm'\r\n                                                        : 'bg-white border-transparent hover:bg-zinc-50'\r\n                                                        }`}\r\n                                                >\r\n                                                    <div className={`w-10 h-10 rounded-full border-2 flex items-center justify-center mr-4 shrink-0 transition-colors ${selectedUsers.includes(user.user_id)\r\n                                                        ? 'bg-yellow-400 border-yellow-400 text-white'\r\n                                                        : 'bg-zinc-100 border-zinc-100 text-zinc-400 group-hover:border-zinc-200'\r\n                                                        }`}>\r\n                                                        {selectedUsers.includes(user.user_id) ? (\r\n                                                            <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"3\" d=\"M5 13l4 4L19 7\" />\r\n                                                            </svg>\r\n                                                        ) : (\r\n                                                            user.avatar_url ? (\r\n                                                                <img src={user.avatar_url} alt=\"\" className=\"w-full h-full rounded-full object-cover\" />\r\n                                                            ) : (\r\n                                                                <span className=\"text-sm font-bold\">{user.full_name?.charAt(0)}</span>\r\n                                                            )\r\n                                                        )}\r\n                                                    </div>\r\n                                                    <div className=\"flex-1 min-w-0\">\r\n                                                        <h4 className={`text-sm font-bold truncate ${selectedUsers.includes(user.user_id) ? 'text-zinc-900' : 'text-zinc-700'}`}>\r\n                                                            {user.full_name}\r\n                                                        </h4>\r\n                                                        <p className=\"text-xs text-zinc-500 truncate\">\r\n                                                            {user.bio || 'No bio'}  {user.email || 'No email'}\r\n                                                        </p>\r\n                                                    </div>\r\n                                                </div>\r\n                                            ))\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"mt-8 flex justify-end gap-3 pt-6 border-t border-zinc-100\">\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        className=\"px-6 py-3 rounded-xl text-zinc-500 font-bold hover:bg-zinc-100 transition-colors\"\r\n                                        onClick={onClose}\r\n                                    >\r\n                                        Cancel\r\n                                    </button>\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        disabled={selectedUsers.length === 0}\r\n                                        onClick={handleSend}\r\n                                        className=\"px-8 py-3 rounded-xl bg-zinc-900 text-white font-bold shadow-lg hover:bg-zinc-800 transition-all hover:-translate-y-1 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center gap-2\"\r\n                                    >\r\n                                        <span>Send {selectedProposalId ? 'Proposals' : 'Invitations'}</span>\r\n                                        {selectedUsers.length > 0 && (\r\n                                            <span className=\"bg-white/20 px-2 py-0.5 rounded-full text-xs\">\r\n                                                {selectedUsers.length}\r\n                                            </span>\r\n                                        )}\r\n                                    </button>\r\n                                </div>\r\n                            </Dialog.Panel>\r\n                        </Transition.Child>\r\n                    </div>\r\n                </div>\r\n            </Dialog>\r\n        </Transition>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(app)\\dashboard\\EventListItem.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'formatDate' is assigned a value but never used.","line":16,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport React, { Fragment } from 'react'\r\nimport Link from 'next/link'\r\nimport { Menu, Transition } from '@headlessui/react'\r\nimport { MyEventItem } from '@/services/api.types'\r\n\r\ninterface EventListItemProps {\r\n    event: MyEventItem\r\n    onDelete?: (id: string) => void\r\n}\r\n\r\nexport function EventListItem({ event, onDelete }: EventListItemProps) {\r\n    const isOrganizer = event.my_role === 'organizer' || event.my_role === 'committee'\r\n\r\n    const formatDate = (dateString: string) => {\r\n        return new Date(dateString).toLocaleDateString('en-US', {\r\n            month: 'short',\r\n            day: 'numeric',\r\n            year: 'numeric',\r\n            hour: 'numeric',\r\n            minute: 'numeric',\r\n        })\r\n    }\r\n\r\n    const getStatusColor = (status: string) => {\r\n        switch (status) {\r\n            case 'published':\r\n                return 'bg-green-100 text-green-800 border-green-200'\r\n            case 'ended':\r\n                return 'bg-zinc-100 text-zinc-800 border-zinc-200'\r\n            case 'draft':\r\n                return 'bg-yellow-100 text-yellow-800 border-yellow-200'\r\n            default:\r\n                return 'bg-gray-100 text-gray-800 border-gray-200'\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"group bg-white rounded-2xl border border-zinc-100 shadow-sm hover:shadow-md transition-all duration-200 p-4 flex flex-col sm:flex-row items-start sm:items-center gap-4\">\r\n            {/* Date Box */}\r\n            <div className=\"flex-shrink-0 w-16 h-16 bg-zinc-50 rounded-xl flex flex-col items-center justify-center border border-zinc-100\">\r\n                <span className=\"text-xs font-bold text-zinc-400 uppercase\">\r\n                    {new Date(event.start_datetime).toLocaleString('default', { month: 'short' })}\r\n                </span>\r\n                <span className=\"text-xl font-black text-zinc-900\">\r\n                    {new Date(event.start_datetime).getDate()}\r\n                </span>\r\n            </div>\r\n\r\n            {/* Content */}\r\n            <div className=\"flex-1 min-w-0\">\r\n                <div className=\"flex items-center gap-2 mb-1\">\r\n                    <span className={`inline-flex items-center px-2 py-0.5 rounded text-xs font-bold border capitalize ${getStatusColor(event.status)}`}>\r\n                        {event.status}\r\n                    </span>\r\n                    <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-bold bg-zinc-100 text-zinc-600 border border-zinc-200 capitalize\">\r\n                        {event.my_role}\r\n                    </span>\r\n                </div>\r\n                <Link href={`/events/${event.event_id}`} className=\"block\">\r\n                    <h3 className=\"text-lg font-bold text-zinc-900 truncate group-hover:text-yellow-600 transition-colors\">\r\n                        {event.title}\r\n                    </h3>\r\n                </Link>\r\n                <div className=\"flex items-center text-sm text-zinc-500 mt-1 gap-4\">\r\n                    <span className=\"flex items-center\">\r\n                        <svg className=\"w-4 h-4 mr-1 text-zinc-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                        </svg>\r\n                        {new Date(event.start_datetime).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n                    </span>\r\n                    <span className=\"flex items-center capitalize\">\r\n                        <svg className=\"w-4 h-4 mr-1 text-zinc-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\" />\r\n                        </svg>\r\n                        {event.format?.replace('_', ' ') || 'Event'}\r\n                    </span>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Actions */}\r\n            <div className=\"flex items-center gap-2 w-full sm:w-auto mt-2 sm:mt-0 border-t sm:border-t-0 pt-3 sm:pt-0\">\r\n                <Link\r\n                    href={`/events/${event.event_id}`}\r\n                    className=\"flex-1 sm:flex-none text-center px-4 py-2 bg-zinc-900 text-white text-sm font-bold rounded-xl hover:bg-zinc-800 transition-colors\"\r\n                >\r\n                    View\r\n                </Link>\r\n\r\n                <Menu as=\"div\" className=\"relative inline-block text-left\">\r\n                    <Menu.Button className=\"p-2 rounded-xl text-zinc-400 hover:text-zinc-900 hover:bg-zinc-100 transition-colors\">\r\n                        <span className=\"sr-only\">Options</span>\r\n                        <svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z\" />\r\n                        </svg>\r\n                    </Menu.Button>\r\n                    <Transition\r\n                        as={Fragment}\r\n                        enter=\"transition ease-out duration-100\"\r\n                        enterFrom=\"transform opacity-0 scale-95\"\r\n                        enterTo=\"transform opacity-100 scale-100\"\r\n                        leave=\"transition ease-in duration-75\"\r\n                        leaveFrom=\"transform opacity-100 scale-100\"\r\n                        leaveTo=\"transform opacity-0 scale-95\"\r\n                    >\r\n                        <Menu.Items className=\"absolute right-0 mt-2 w-48 origin-top-right divide-y divide-gray-100 rounded-xl bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-10\">\r\n                            <div className=\"px-1 py-1\">\r\n                                {isOrganizer && (\r\n                                    <Menu.Item>\r\n                                        {({ active }: { active: boolean }) => (\r\n                                            <Link\r\n                                                href={`/events/${event.event_id}?edit=true`}\r\n                                                className={`${active ? 'bg-yellow-50 text-zinc-900' : 'text-zinc-700'\r\n                                                    } group flex w-full items-center rounded-lg px-2 py-2 text-sm font-medium`}\r\n                                            >\r\n                                                Edit Event\r\n                                            </Link>\r\n                                        )}\r\n                                    </Menu.Item>\r\n                                )}\r\n                                <Menu.Item>\r\n                                    {({ active }: { active: boolean }) => (\r\n                                        <Link\r\n                                            href={`/events/${event.event_id}/participants`}\r\n                                            className={`${active ? 'bg-yellow-50 text-zinc-900' : 'text-zinc-700'\r\n                                                } group flex w-full items-center rounded-lg px-2 py-2 text-sm font-medium`}\r\n                                        >\r\n                                            Participants\r\n                                        </Link>\r\n                                    )}\r\n                                </Menu.Item>\r\n                                {isOrganizer && onDelete && (\r\n                                    <Menu.Item>\r\n                                        {({ active }: { active: boolean }) => (\r\n                                            <button\r\n                                                onClick={() => onDelete(event.event_id)}\r\n                                                className={`${active ? 'bg-red-50 text-red-700' : 'text-red-600'\r\n                                                    } group flex w-full items-center rounded-lg px-2 py-2 text-sm font-medium`}\r\n                                            >\r\n                                                Delete\r\n                                            </button>\r\n                                        )}\r\n                                    </Menu.Item>\r\n                                )}\r\n                            </div>\r\n                        </Menu.Items>\r\n                    </Transition>\r\n                </Menu>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(app)\\dashboard\\EventPreviewModal.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":89,"column":57,"nodeType":"JSXOpeningElement","endLine":93,"endColumn":59}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport React, { Fragment } from 'react'\r\nimport { Dialog, Transition } from '@headlessui/react'\r\nimport { EventDetails } from '@/services/api.types'\r\nimport { format } from 'date-fns'\r\n\r\ninterface EventPreviewModalProps {\r\n    isOpen: boolean\r\n    onClose: () => void\r\n    event: EventDetails | null\r\n}\r\n\r\nexport function EventPreviewModal({ isOpen, onClose, event }: EventPreviewModalProps) {\r\n    if (!event) return null\r\n\r\n    return (\r\n        <Transition appear show={isOpen} as={Fragment}>\r\n            <Dialog as=\"div\" className=\"relative z-50\" onClose={onClose}>\r\n                <Transition.Child\r\n                    as={Fragment}\r\n                    enter=\"ease-out duration-300\"\r\n                    enterFrom=\"opacity-0\"\r\n                    enterTo=\"opacity-100\"\r\n                    leave=\"ease-in duration-200\"\r\n                    leaveFrom=\"opacity-100\"\r\n                    leaveTo=\"opacity-0\"\r\n                >\r\n                    <div className=\"fixed inset-0 bg-black/90 backdrop-blur-sm\" />\r\n                </Transition.Child>\r\n\r\n                <div className=\"fixed inset-0 overflow-y-auto\">\r\n                    <div className=\"flex min-h-full items-center justify-center p-4 md:p-8\">\r\n                        <Transition.Child\r\n                            as={Fragment}\r\n                            enter=\"ease-out duration-500\"\r\n                            enterFrom=\"opacity-0 translate-y-8 scale-95\"\r\n                            enterTo=\"opacity-100 translate-y-0 scale-100\"\r\n                            leave=\"ease-in duration-300\"\r\n                            leaveFrom=\"opacity-100 translate-y-0 scale-100\"\r\n                            leaveTo=\"opacity-0 translate-y-8 scale-95\"\r\n                        >\r\n                            <Dialog.Panel className=\"w-full max-w-7xl transform transition-all relative\">\r\n\r\n                                {/* Close Button (Outside) */}\r\n                                <button\r\n                                    onClick={onClose}\r\n                                    className=\"absolute -top-12 right-0 text-white/50 hover:text-white transition-colors flex items-center gap-2\"\r\n                                >\r\n                                    <span className=\"text-sm font-medium\">Close Preview</span>\r\n                                    <svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\r\n                                    </svg>\r\n                                </button>\r\n\r\n                                {/* Browser Frame Container */}\r\n                                <div className=\"bg-zinc-100 rounded-[1.5rem] overflow-hidden shadow-2xl ring-8 ring-white/10\">\r\n\r\n                                    {/* Browser Toolbar */}\r\n                                    <div className=\"bg-white border-b border-zinc-200 px-5 py-3.5 flex items-center gap-6 select-none\">\r\n                                        <div className=\"flex gap-2\">\r\n                                            <div className=\"w-3 h-3 rounded-full bg-red-400 border border-red-500/10\" />\r\n                                            <div className=\"w-3 h-3 rounded-full bg-yellow-400 border border-yellow-500/10\" />\r\n                                            <div className=\"w-3 h-3 rounded-full bg-green-400 border border-green-500/10\" />\r\n                                        </div>\r\n                                        <div className=\"flex-1 max-w-2xl mx-auto\">\r\n                                            <div className=\"bg-zinc-100/80 hover:bg-zinc-100 transition-colors rounded-lg px-4 py-1.5 flex items-center justify-center gap-2 text-xs text-zinc-500 font-medium\">\r\n                                                <svg className=\"w-3 h-3 text-zinc-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\r\n                                                </svg>\r\n                                                <span>atas.com/events/{event.id.slice(0, 8)}...</span>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"w-16 flex justify-end\">\r\n                                            <div className=\"w-8 h-8 rounded-full bg-zinc-100\" />\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {/* Scrolable Content Area (Viewport) */}\r\n                                    <div className=\"h-[80vh] overflow-y-auto bg-zinc-50 scrollbar-hide\">\r\n                                        {/* Mocking the actual Event Details Page Layout */}\r\n                                        <div className=\"max-w-[95%] xl:max-w-screen-2xl mx-auto px-4 py-8 pointer-events-none select-none\">\r\n                                            {/* Pointer events none to prevent interaction in preview mode if desired, or remove to allow scrolling/clicking mock buttons */}\r\n\r\n                                            <div className=\"bg-white rounded-[2.5rem] shadow-sm overflow-hidden border border-zinc-100\">\r\n                                                {/* Header Image */}\r\n                                                <div className=\"relative h-[400px] bg-zinc-900\">\r\n                                                    {event.cover_url && (\r\n                                                        <img\r\n                                                            src={event.cover_url}\r\n                                                            alt={event.title}\r\n                                                            className=\"absolute inset-0 w-full h-full object-cover opacity-80\"\r\n                                                        />\r\n                                                    )}\r\n                                                    <div className=\"absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent\" />\r\n\r\n                                                    {/* Badges Top Right */}\r\n                                                    <div className=\"absolute top-6 right-6 z-20 flex gap-2\">\r\n                                                        <span className=\"px-3 py-1 rounded-full bg-white/20 backdrop-blur-md text-white border border-white/20 text-[10px] font-bold uppercase tracking-wider\">\r\n                                                            {event.format.replace('_', ' ')}\r\n                                                        </span>\r\n                                                        <span className=\"px-3 py-1 rounded-full bg-white/20 backdrop-blur-md text-white border border-white/20 text-[10px] font-bold uppercase tracking-wider\">\r\n                                                            {event.type}\r\n                                                        </span>\r\n                                                    </div>\r\n\r\n                                                    <div className=\"absolute bottom-0 left-0 right-0 p-8 md:p-12 w-full\">\r\n                                                        <div className=\"max-w-5xl mx-auto w-full space-y-4\">\r\n                                                            <div className=\"bg-yellow-400 text-zinc-900 inline-block px-3 py-1 rounded-md text-[10px] font-black uppercase tracking-wider mb-2 border border-yellow-300\">\r\n                                                                Guest View\r\n                                                            </div>\r\n                                                            <h1 className=\"text-4xl md:text-6xl font-black text-white leading-tight\">\r\n                                                                {event.title}\r\n                                                            </h1>\r\n                                                            <div className=\"flex flex-wrap items-center gap-6 text-zinc-200 font-medium text-lg pt-2\">\r\n                                                                <div className=\"flex items-center gap-2\">\r\n                                                                    <svg className=\"w-5 h-5 text-yellow-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\r\n                                                                    </svg>\r\n                                                                    {format(new Date(event.start_datetime), 'EEEE, MMMM d, yyyy  h:mm a')}\r\n                                                                </div>\r\n                                                                {(event.venue_remark || event.venue_place_id) ? (\r\n                                                                    <div className=\"flex items-center gap-2\">\r\n                                                                        <svg className=\"w-5 h-5 text-yellow-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                                                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" />\r\n                                                                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n                                                                        </svg>\r\n                                                                        <span className=\"truncate max-w-[250px]\">{event.venue_remark || event.venue_place_id}</span>\r\n                                                                    </div>\r\n                                                                ) : (\r\n                                                                    <div className=\"flex items-center gap-2\">\r\n                                                                        <svg className=\"w-5 h-5 text-yellow-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                                                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" />\r\n                                                                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n                                                                        </svg>\r\n                                                                        <span className=\"truncate max-w-[250px]\">{event.type === 'online' ? 'Online Event' : 'Venue to be announced'}</span>\r\n                                                                    </div>\r\n                                                                )}\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n\r\n                                                {/* Content Body */}\r\n                                                <div className=\"px-6 md:px-12 py-8 bg-white\">\r\n                                                    <div className=\"max-w-5xl mx-auto w-full\">\r\n                                                        <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-12\">\r\n\r\n                                                            {/* Main Column */}\r\n                                                            <div className=\"lg:col-span-8 space-y-8\">\r\n\r\n                                                                <div>\r\n                                                                    <h3 className=\"text-lg font-bold text-zinc-900 mb-4 uppercase tracking-wide\">About Event</h3>\r\n                                                                    <div className=\"prose prose-zinc max-w-none text-zinc-600 whitespace-pre-wrap leading-relaxed\">\r\n                                                                        {event.description || 'No description provided.'}\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </div>\r\n\r\n                                                            {/* Sidebar Column */}\r\n                                                            <div className=\"lg:col-span-4 space-y-6\">\r\n                                                                {/* Registration Card Compact */}\r\n                                                                <div className=\"p-5 bg-white rounded-2xl border border-zinc-200 shadow-sm\">\r\n                                                                    <h3 className=\"text-sm font-bold text-zinc-400 uppercase tracking-wider mb-4\">Registration</h3>\r\n\r\n                                                                    <div className=\"flex items-end justify-between mb-6\">\r\n                                                                        {event.registration_type === 'paid' && (\r\n                                                                            <div>\r\n                                                                                <span className=\"block text-xs text-zinc-400 font-bold mb-1\">Price</span>\r\n                                                                                <span className=\"text-2xl font-black text-zinc-900\">$$$</span>\r\n                                                                            </div>\r\n                                                                        )}\r\n                                                                    </div>\r\n\r\n                                                                    <button className=\"w-full py-3 bg-yellow-400 text-zinc-900 rounded-xl font-bold text-sm shadow-sm hover:bg-yellow-300\">\r\n                                                                        Register Now\r\n                                                                    </button>\r\n                                                                    <p className=\"mt-3 text-center text-[10px] text-zinc-400 font-medium\">Limited spots available</p>\r\n                                                                </div>\r\n\r\n                                                                {/* Organizer Section */}\r\n                                                                <div className=\"space-y-4\">\r\n                                                                    <h3 className=\"text-sm font-bold text-zinc-900 uppercase tracking-widest\">Organizer</h3>\r\n                                                                    <div className=\"p-5 bg-white rounded-2xl border border-zinc-200 shadow-sm flex items-center gap-4\">\r\n                                                                        <div className=\"w-12 h-12 rounded-full bg-zinc-100 flex items-center justify-center text-zinc-500 font-bold text-lg shrink-0 border border-zinc-100\">\r\n                                                                            ?\r\n                                                                        </div>\r\n                                                                        <div className=\"min-w-0\">\r\n                                                                            <div className=\"font-bold text-zinc-900 text-base truncate\">Event Host</div>\r\n                                                                            <div className=\"text-xs text-zinc-500 font-medium truncate\">View Profile</div>\r\n                                                                        </div>\r\n                                                                        <button className=\"ml-auto flex items-center justify-center w-8 h-8 rounded-full bg-zinc-50 text-zinc-400 hover:bg-zinc-100 hover:text-zinc-900 transition-colors\">\r\n                                                                            <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                                                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\r\n                                                                            </svg>\r\n                                                                        </button>\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                </div>\r\n\r\n                            </Dialog.Panel>\r\n                        </Transition.Child>\r\n                    </div>\r\n                </div>\r\n            </Dialog>\r\n        </Transition>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(app)\\dashboard\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Link' is defined but never used.","line":7,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'EmptyState' is defined but never used.","line":9,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'EventInviteModal' is defined but never used.","line":13,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'openChecklistCount' is assigned a value but never used.","line":33,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":33,"endColumn":30},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchEventDetails'. Either include it or remove the dependency array.","line":44,"column":8,"nodeType":"ArrayExpression","endLine":44,"endColumn":25,"suggestions":[{"desc":"Update the dependencies array to be: [fetchEventDetails, selectedEventId]","fix":{"range":[1830,1847],"text":"[fetchEventDetails, selectedEventId]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":82,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":82,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3190,3193],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3190,3193],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport React, { useEffect, useState } from 'react'\r\nimport { getMyEvents, getMyProfile, getEventById, getMe, getMyChecklistItems } from '@/services/api'\r\nimport { EventDetails, ProfileResponse, UserMeResponse } from '@/services/api.types'\r\nimport { useRouter } from 'next/navigation'\r\nimport Link from 'next/link'\r\nimport { Skeleton } from '@/components/ui/Skeleton'\r\nimport { EmptyState } from '@/components/ui/EmptyState'\r\nimport { DashboardHeroCard } from './DashboardHeroCard'\r\nimport { DashboardTabs } from './DashboardTabs'\r\nimport { toast } from 'react-hot-toast'\r\nimport { EventInviteModal } from './EventInviteModal'\r\nimport { EventPreviewModal } from './EventPreviewModal'\r\nimport { DashboardEventList } from './DashboardEventList'\r\nimport { MyEventItem } from '@/services/api.types'\r\n\r\nexport default function DashboardPage() {\r\n    const router = useRouter()\r\n    const [loading, setLoading] = useState(true)\r\n    const [events, setEvents] = useState<MyEventItem[]>([])\r\n    const [view, setView] = useState<'list' | 'detail'>('list')\r\n\r\n    // Detail View State\r\n    const [selectedEventId, setSelectedEventId] = useState<string | null>(null)\r\n    const [nextEvent, setNextEvent] = useState<EventDetails | null>(null)\r\n    const [role, setRole] = useState<string | null>(null)\r\n\r\n    // Global State\r\n    const [user, setUser] = useState<ProfileResponse | null>(null)\r\n    const [isPreviewOpen, setIsPreviewOpen] = useState(false)\r\n    const [me, setMe] = useState<UserMeResponse | null>(null)\r\n    const [openChecklistCount, setOpenChecklistCount] = useState(0)\r\n\r\n    useEffect(() => {\r\n        fetchData()\r\n    }, [])\r\n\r\n    // If an event is selected, fetch its full details\r\n    useEffect(() => {\r\n        if (selectedEventId) {\r\n            fetchEventDetails(selectedEventId)\r\n        }\r\n    }, [selectedEventId])\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n            const [eventsData, profileData, meData, checklistItems] = await Promise.all([\r\n                getMyEvents(),\r\n                getMyProfile(),\r\n                getMe().catch(() => null),\r\n                getMyChecklistItems(true).catch(() => [])\r\n            ])\r\n\r\n            setEvents(eventsData)\r\n            setUser(profileData)\r\n            setMe(meData)\r\n            setOpenChecklistCount((checklistItems || []).length)\r\n\r\n            // Auto-select if only 1 organized event\r\n            const organized = eventsData.filter(e => e.my_role === 'organizer')\r\n            if (organized.length === 1) {\r\n                setSelectedEventId(organized[0].event_id)\r\n            }\r\n        } catch (error) {\r\n            console.error(error)\r\n            toast.error('Failed to load dashboard')\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    const fetchEventDetails = async (eventId: string) => {\r\n        setLoading(true)\r\n        try {\r\n            const fullEvent = await getEventById(eventId)\r\n            // find role from list\r\n            const listItem = events.find(e => e.event_id === eventId)\r\n            setNextEvent(fullEvent)\r\n            setRole(listItem?.my_role || null)\r\n            setView('detail')\r\n        } catch (error: any) {\r\n            console.error(error)\r\n            if (error?.response?.status === 404) {\r\n                toast.error('Event not found or has been deleted')\r\n                // Remove from local list to preventing re-clicking\r\n                setEvents(prev => prev.filter(e => e.event_id !== eventId))\r\n                setSelectedEventId(null)\r\n            } else {\r\n                toast.error('Failed to load event details')\r\n            }\r\n            setView('list')\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    const handleBack = () => {\r\n        setView('list')\r\n        setSelectedEventId(null)\r\n        setNextEvent(null)\r\n    }\r\n\r\n    if (loading && view === 'list' && events.length === 0) {\r\n        return (\r\n            <div className=\"max-w-5xl mx-auto px-4 py-12 space-y-8\">\r\n                <Skeleton height=\"400px\" className=\"rounded-[2.5rem]\" />\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"w-full max-w-[95%] 2xl:max-w-screen-2xl mx-auto px-4 py-8\">\r\n            <div className=\"flex flex-col items-center justify-center\">\r\n\r\n                {view === 'list' ? (\r\n                    <DashboardEventList\r\n                        events={events}\r\n                        user={user}\r\n                        me={me}\r\n                        onSelect={(e) => setSelectedEventId(e.event_id)}\r\n                        onCreate={() => router.push('/events/create')}\r\n                        onProUpgrade={fetchData}\r\n                    />\r\n                ) : (\r\n                    // DETAIL VIEW\r\n                    <>\r\n                        {/* Header Section */}\r\n                        <div className=\"flex flex-col md:flex-row md:items-end justify-between gap-6 mb-10 w-full animate-fadeIn\">\r\n                            <div>\r\n                                {/* Only show back button for Dashboard Pro users */}\r\n                                {me?.is_dashboard_pro && (\r\n                                    <button\r\n                                        onClick={handleBack}\r\n                                        className=\"mb-4 text-sm font-bold text-zinc-500 hover:text-zinc-900 flex items-center gap-1 transition-colors\"\r\n                                    >\r\n                                        <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M10 19l-7-7m0 0l7-7m-7 7h18\" />\r\n                                        </svg>\r\n                                        Back to Events\r\n                                    </button>\r\n                                )}\r\n                            </div>\r\n                            {user?.user_id === nextEvent?.organizer_id && (\r\n                                <div className=\"flex items-center gap-3\">\r\n                                    <button\r\n                                        onClick={() => setIsPreviewOpen(true)}\r\n                                        className=\"px-6 py-2.5 bg-white border-2 border-zinc-200 text-zinc-700 font-bold rounded-xl hover:bg-zinc-50 hover:border-zinc-300 transition-all shadow-sm\"\r\n                                    >\r\n                                        Preview\r\n                                    </button>\r\n                                    <button\r\n                                        onClick={() => toast.success('Event Published!')}\r\n                                        className=\"px-6 py-2.5 bg-zinc-900 text-yellow-400 font-bold rounded-xl hover:bg-zinc-800 transition-all shadow-md flex items-center gap-2\"\r\n                                    >\r\n                                        <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 19l9 2-9-18-9 18 9-2zm0 0v-8\" />\r\n                                        </svg>\r\n                                        Publish\r\n                                    </button>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Event Card Or Empty State */}\r\n                        {nextEvent ? (\r\n                            <div className=\"w-full animate-fadeIn pb-12\">\r\n                                <DashboardHeroCard\r\n                                    event={nextEvent}\r\n                                    onPreview={() => setIsPreviewOpen(true)}\r\n                                />\r\n\r\n                                <DashboardTabs\r\n                                    event={nextEvent}\r\n                                    user={user}\r\n                                    role={role}\r\n                                    onUpdate={() => fetchEventDetails(selectedEventId!)}\r\n                                    onDelete={() => {\r\n                                        setSelectedEventId(null)\r\n                                        setNextEvent(null)\r\n                                        setView('list')\r\n                                        fetchData()\r\n                                    }}\r\n                                />\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"w-full max-w-2xl text-center py-12\">\r\n                                <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-400 mx-auto\"></div>\r\n                            </div>\r\n                        )}\r\n                    </>\r\n                )}\r\n\r\n                <EventPreviewModal\r\n                    isOpen={isPreviewOpen}\r\n                    onClose={() => setIsPreviewOpen(false)}\r\n                    event={nextEvent}\r\n                />\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(app)\\discover\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useCallback' is defined but never used.","line":3,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":49},{"ruleId":"@typescript-eslint/ban-ts-comment","severity":2,"message":"Use \"@ts-expect-error\" instead of \"@ts-ignore\", as \"@ts-ignore\" will do nothing if the following line is error-free.","line":8,"column":1,"nodeType":"Line","messageId":"tsIgnoreInsteadOfExpectError","endLine":8,"endColumn":14,"suggestions":[{"messageId":"replaceTsIgnoreWithTsExpectError","fix":{"range":[478,491],"text":"// @ts-expect-error"},"desc":"Replace \"@ts-ignore\" with \"@ts-expect-error\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'debounce' is defined but never used.","line":9,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'eventError' is assigned a value but never used.","line":20,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":20,"endColumn":22},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadAllEventSections'. Either include it or remove the dependency array.","line":59,"column":8,"nodeType":"ArrayExpression","endLine":59,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [loadAllEventSections]","fix":{"range":[2903,2905],"text":"[loadAllEventSections]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadFilteredEvents'. Either include it or remove the dependency array.","line":80,"column":8,"nodeType":"ArrayExpression","endLine":80,"endColumn":90,"suggestions":[{"desc":"Update the dependencies array to be: [debouncedEventSearch, filterRegType, filterRegStatus, filterEventType, activeTab, loadFilteredEvents]","fix":{"range":[3538,3620],"text":"[debouncedEventSearch, filterRegType, filterRegStatus, filterEventType, activeTab, loadFilteredEvents]"}}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'loadPeople'. Either include it or remove the dependency array.","line":86,"column":8,"nodeType":"ArrayExpression","endLine":86,"endColumn":67,"suggestions":[{"desc":"Update the dependencies array to be: [activeTab, debouncedPeopleSearch, loadPeople, peopleRole, peopleSkill]","fix":{"range":[3731,3790],"text":"[activeTab, debouncedPeopleSearch, loadPeople, peopleRole, peopleSkill]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":142,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":142,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5877,5880],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5877,5880],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":311,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":311,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[17050,17053],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[17050,17053],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":493,"column":53,"nodeType":"JSXOpeningElement","endLine":493,"endColumn":136},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":620,"column":45,"nodeType":"JSXOpeningElement","endLine":620,"endColumn":197}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport React, { useEffect, useState, useCallback, useRef } from 'react'\r\nimport Link from 'next/link'\r\nimport { getPublicEvents, getPublicOrganizations, findProfiles, getMyEvents, semanticSearchEvents, semanticSearchProfiles, getMe } from '@/services/api'\r\nimport { EventDetails, OrganizationResponse, ProfileResponse, EventType, EventRegistrationType, EventRegistrationStatus, MyEventItem } from '@/services/api.types'\r\nimport { toast } from 'react-hot-toast'\r\n// @ts-ignore\r\nimport { debounce } from 'lodash'\r\nimport { EventCard } from '@/components/ui/EventCard'\r\n\r\nexport default function DiscoverPage() {\r\n    const [activeTab, setActiveTab] = useState<'events' | 'organizations' | 'people'>('events')\r\n\r\n    // Events State\r\n    const [events, setEvents] = useState<EventDetails[]>([])\r\n    const [myEvents, setMyEvents] = useState<MyEventItem[]>([])\r\n    const [eventsLoading, setEventsLoading] = useState(true)\r\n    const [eventSearch, setEventSearch] = useState('')\r\n    const [eventError, setEventError] = useState<string | null>(null)\r\n\r\n    // Event Categories State\r\n    const [incomingEvents, setIncomingEvents] = useState<EventDetails[]>([])\r\n    const [fintechEvents, setFintechEvents] = useState<EventDetails[]>([])\r\n    const [aiEvents, setAiEvents] = useState<EventDetails[]>([])\r\n    const [careerEvents, setCareerEvents] = useState<EventDetails[]>([])\r\n\r\n    // Event Filters State\r\n    const [eventFiltersOpen, setEventFiltersOpen] = useState(false)\r\n    const [filterRegType, setFilterRegType] = useState<EventRegistrationType | ''>('')\r\n    const [filterRegStatus, setFilterRegStatus] = useState<EventRegistrationStatus | ''>('')\r\n    const [filterEventType, setFilterEventType] = useState<EventType | ''>('')\r\n\r\n    // Organizations State\r\n    const [orgs, setOrgs] = useState<OrganizationResponse[]>([])\r\n    const [orgsLoading, setOrgsLoading] = useState(true)\r\n    const [orgSearch, setOrgSearch] = useState('')\r\n\r\n    // People State\r\n    const [people, setPeople] = useState<ProfileResponse[]>([])\r\n    const [peopleLoading, setPeopleLoading] = useState(false)\r\n    const [peopleSearch, setPeopleSearch] = useState('')\r\n    const [peopleRole, setPeopleRole] = useState('')\r\n    const [peopleSkill, setPeopleSkill] = useState('')\r\n    const [peopleFiltersOpen, setPeopleFiltersOpen] = useState(false)\r\n    const [debouncedPeopleSearch, setDebouncedPeopleSearch] = useState('')\r\n    const [debouncedEventSearch, setDebouncedEventSearch] = useState('')\r\n    const [useAiEvents, setUseAiEvents] = useState(false)\r\n    const [useAiPeople, setUseAiPeople] = useState(false)\r\n    const [currentEmail, setCurrentEmail] = useState<string | null>(null)\r\n\r\n    const incomingRef = useRef<HTMLDivElement>(null)\r\n\r\n\r\n    useEffect(() => {\r\n        loadAllEventSections()\r\n        loadOrgs()\r\n        getMe().then(me => setCurrentEmail(me.email)).catch(() => {})\r\n    }, [])\r\n\r\n    // Debounce Search\r\n    useEffect(() => {\r\n        const handler = setTimeout(() => {\r\n            setDebouncedEventSearch(eventSearch)\r\n        }, 500)\r\n        return () => clearTimeout(handler)\r\n    }, [eventSearch])\r\n\r\n    useEffect(() => {\r\n        const handler = setTimeout(() => {\r\n            setDebouncedPeopleSearch(peopleSearch)\r\n        }, 500)\r\n        return () => clearTimeout(handler)\r\n    }, [peopleSearch])\r\n\r\n    useEffect(() => {\r\n        if (activeTab === 'events' && (debouncedEventSearch || filterRegType || filterRegStatus || filterEventType)) {\r\n            loadFilteredEvents()\r\n        }\r\n    }, [debouncedEventSearch, filterRegType, filterRegStatus, filterEventType, activeTab])\r\n\r\n    useEffect(() => {\r\n        if (activeTab === 'people') {\r\n            loadPeople()\r\n        }\r\n    }, [activeTab, debouncedPeopleSearch, peopleRole, peopleSkill])\r\n\r\n\r\n    const loadAllEventSections = async () => {\r\n        try {\r\n            setEventsLoading(true)\r\n            const [incoming, fintech, ai, career, myData] = await Promise.all([\r\n                getPublicEvents({ upcoming: true }),\r\n                getPublicEvents({ category_name: 'Fintech' }),\r\n                getPublicEvents({ category_name: 'AI' }),\r\n                getPublicEvents({ category_name: 'Future Career' }),\r\n                getMyEvents().catch(() => []) // Silently fail if not logged in\r\n            ])\r\n            setIncomingEvents(incoming)\r\n            setFintechEvents(fintech)\r\n            setAiEvents(ai)\r\n            setCareerEvents(career)\r\n\r\n            // Filter for events joined (not organized)\r\n            const joinedEvents = myData.filter(e => e.my_role !== 'organizer')\r\n            setMyEvents(joinedEvents)\r\n\r\n            // Also load initial \"all\" events\r\n            loadFilteredEvents()\r\n        } catch (err) {\r\n            console.error('Failed to load event sections', err)\r\n        } finally {\r\n            setEventsLoading(false)\r\n        }\r\n    }\r\n\r\n    const loadFilteredEvents = async () => {\r\n        try {\r\n            setEventsLoading(true)\r\n            setEventError(null)\r\n            const data = useAiEvents\r\n                ? await semanticSearchEvents({ q_text: debouncedEventSearch || undefined, top_k: 24 })\r\n                : await getPublicEvents({\r\n                    q_text: debouncedEventSearch,\r\n                    registration_type: filterRegType || undefined,\r\n                    registration_status: filterRegStatus || undefined,\r\n                    type: filterEventType || undefined,\r\n                })\r\n            setEvents(data)\r\n        } catch (err) {\r\n            console.error('Failed to load events', err)\r\n            setEventError('Failed to load events')\r\n        } finally {\r\n            setEventsLoading(false)\r\n        }\r\n    }\r\n\r\n    const loadOrgs = async () => {\r\n        try {\r\n            const data = await getPublicOrganizations()\r\n            setOrgs(data)\r\n        } catch (err: any) {\r\n            console.error(err)\r\n            toast.error(err?.response?.data?.detail || 'Failed to load organizations')\r\n        } finally {\r\n            setOrgsLoading(false)\r\n        }\r\n    }\r\n\r\n    const loadPeople = async () => {\r\n        try {\r\n            setPeopleLoading(true)\r\n            const profiles = useAiPeople\r\n                ? await semanticSearchProfiles({ q_text: debouncedPeopleSearch || undefined, top_k: 24 })\r\n                : await findProfiles({ name: debouncedPeopleSearch || '' })\r\n            // Client side filter for Role/Skill if API doesn't support\r\n            const filtered = profiles\r\n            if (peopleRole) {\r\n                // This is approximate as we don't have role field on profile response explicitly mapped sometimes\r\n                // But let's assume implementation details or skip complex filtering for now\r\n            }\r\n            setPeople(filtered)\r\n        } catch (err) {\r\n            console.error(err)\r\n        } finally {\r\n            setPeopleLoading(false)\r\n        }\r\n    }\r\n\r\n    const filteredOrgs = orgs.filter(o => o.name.toLowerCase().includes(orgSearch.toLowerCase()))\r\n\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"mb-10 text-center sm:text-left\">\r\n                <h1 className=\"text-4xl font-black text-zinc-900 tracking-tight mb-3\">Discover</h1>\r\n            </div>\r\n\r\n            {/* Tabs */}\r\n            <div className=\"flex items-center gap-6 mb-8 border-b border-zinc-100 overflow-x-auto\">\r\n                <button\r\n                    onClick={() => setActiveTab('events')}\r\n                    className={`pb-4 text-lg font-bold transition-colors relative whitespace-nowrap ${activeTab === 'events' ? 'text-zinc-900' : 'text-zinc-400 hover:text-zinc-600'\r\n                        }`}\r\n                >\r\n                    Events\r\n                    {activeTab === 'events' && (\r\n                        <span className=\"absolute bottom-0 left-0 w-full h-1 bg-yellow-400 rounded-t-full\"></span>\r\n                    )}\r\n                </button>\r\n                <button\r\n                    onClick={() => setActiveTab('organizations')}\r\n                    className={`pb-4 text-lg font-bold transition-colors relative whitespace-nowrap ${activeTab === 'organizations' ? 'text-zinc-900' : 'text-zinc-400 hover:text-zinc-600'\r\n                        }`}\r\n                >\r\n                    Organizations\r\n                    {activeTab === 'organizations' && (\r\n                        <span className=\"absolute bottom-0 left-0 w-full h-1 bg-yellow-400 rounded-t-full\"></span>\r\n                    )}\r\n                </button>\r\n                <button\r\n                    onClick={() => setActiveTab('people')}\r\n                    className={`pb-4 text-lg font-bold transition-colors relative whitespace-nowrap ${activeTab === 'people' ? 'text-zinc-900' : 'text-zinc-400 hover:text-zinc-600'\r\n                        }`}\r\n                >\r\n                    People\r\n                    {activeTab === 'people' && (\r\n                        <span className=\"absolute bottom-0 left-0 w-full h-1 bg-yellow-400 rounded-t-full\"></span>\r\n                    )}\r\n                </button>\r\n            </div>\r\n\r\n            {activeTab === 'events' && (\r\n                <div className=\"animate-fadeIn space-y-12\">\r\n                    {/* Search & Filter */}\r\n                    <div>\r\n                        <div className=\"flex flex-col md:flex-row gap-4\">\r\n                            <div className=\"relative flex-1\">\r\n                                <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none\">\r\n                                    <svg className=\"h-5 w-5 text-zinc-400\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n                                        <path fillRule=\"evenodd\" d=\"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z\" clipRule=\"evenodd\" />\r\n                                    </svg>\r\n                                </div>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    className=\"block w-full pl-11 pr-4 py-4 bg-white border-transparent rounded-2xl text-zinc-900 placeholder-zinc-400 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:bg-white shadow-sm transition-all duration-200 font-medium\"\r\n                                    placeholder=\"Search events...\"\r\n                                    value={eventSearch}\r\n                                    onChange={(e) => setEventSearch(e.target.value)}\r\n                                />\r\n                            </div>\r\n                            <button\r\n                                onClick={() => setEventFiltersOpen(!eventFiltersOpen)}\r\n                                className={`px-6 py-4 rounded-2xl font-bold shadow-sm border border-zinc-100 transition-all duration-200 flex items-center gap-2 ${eventFiltersOpen ? 'bg-yellow-400 text-zinc-900' : 'bg-white text-zinc-700 hover:bg-zinc-50'}`}\r\n                            >\r\n                                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z\" /></svg>\r\n                                Filters\r\n                            </button>\r\n                        </div>\r\n\r\n                        {eventFiltersOpen && (\r\n                            <div className=\"mt-4 p-6 bg-white rounded-3xl shadow-sm border border-zinc-100 animate-fadeIn\">\r\n                                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n                                    <div>\r\n                                        <label className=\"text-xs font-bold text-zinc-900 uppercase mb-2 block\">Registration Status</label>\r\n                                        <select\r\n                                            value={filterRegStatus}\r\n                                            onChange={(e) => setFilterRegStatus(e.target.value as EventRegistrationStatus)}\r\n                                            className=\"w-full px-4 py-3 rounded-xl border border-zinc-200 text-zinc-900 bg-zinc-50 focus:bg-white focus:ring-2 focus:ring-yellow-400 focus:border-transparent outline-none transition-all\"\r\n                                        >\r\n                                            <option value=\"\">All Status</option>\r\n                                            <option value=\"opened\">Open to Register</option>\r\n                                            <option value=\"closed\">Closed</option>\r\n                                        </select>\r\n                                    </div>\r\n                                    <div>\r\n                                        <label className=\"text-xs font-bold text-zinc-900 uppercase mb-2 block\">Cost</label>\r\n                                        <select\r\n                                            value={filterRegType}\r\n                                            onChange={(e) => setFilterRegType(e.target.value as EventRegistrationType)}\r\n                                            className=\"w-full px-4 py-3 rounded-xl border border-zinc-200 text-zinc-900 bg-zinc-50 focus:bg-white focus:ring-2 focus:ring-yellow-400 focus:border-transparent outline-none transition-all\"\r\n                                        >\r\n                                            <option value=\"\">Any Cost</option>\r\n                                            <option value=\"free\">Free</option>\r\n                                            <option value=\"paid\">Paid</option>\r\n                                        </select>\r\n                                    </div>\r\n                                    <div>\r\n                                        <label className=\"text-xs font-bold text-zinc-900 uppercase mb-2 block\">Venue Type</label>\r\n                                        <select\r\n                                            value={filterEventType}\r\n                                            onChange={(e) => setFilterEventType(e.target.value as EventType)}\r\n                                            className=\"w-full px-4 py-3 rounded-xl border border-zinc-200 text-zinc-900 bg-zinc-50 focus:bg-white focus:ring-2 focus:ring-yellow-400 focus:border-transparent outline-none transition-all\"\r\n                                        >\r\n                                            <option value=\"\">All Types</option>\r\n                                            <option value=\"online\">Online</option>\r\n                                            <option value=\"offline\">Physical</option>\r\n                                            <option value=\"hybrid\">Hybrid</option>\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"mt-6 flex justify-end\">\r\n                                    <button\r\n                                        onClick={() => { setFilterRegStatus(''); setFilterRegType(''); setFilterEventType('') }}\r\n                                        className=\"text-sm font-bold text-zinc-400 hover:text-zinc-900 transition-colors\"\r\n                                    >\r\n                                        Reset Filters\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Only show categories if NOT searching/filtering */}\r\n                    {!eventSearch && !filterRegStatus && !filterRegType && !filterEventType && (\r\n                        <>\r\n                            {/* YOUR SCHEDULE - JOINED EVENTS */}\r\n                            {myEvents.length > 0 && (\r\n                                <div>\r\n                                    <div className=\"flex items-center justify-between mb-6\">\r\n                                        <div className=\"flex items-center gap-3\">\r\n                                            <h2 className=\"text-2xl font-black text-zinc-900\">Your Schedule</h2>\r\n                                            <span className=\"px-3 py-1 bg-yellow-100 text-yellow-700 text-xs font-bold rounded-full uppercase tracking-wider\">\r\n                                                Attending\r\n                                            </span>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"flex gap-6 overflow-x-auto pb-8 snap-x snap-mandatory scrollbar-hide -mx-4 px-4 sm:mx-0 sm:px-0\">\r\n                                        {myEvents.map((event) => {\r\n                                            // Map MyEventItem to EventDetails-ish structure for EventCard\r\n                                            const mappedEvent: any = {\r\n                                                ...event,\r\n                                                id: event.event_id,\r\n                                                organizer_id: '', // Not available in MyEventItem\r\n                                                created_at: '',\r\n                                                registration_type: 'free', // Default or fetch if needed\r\n                                                visibility: 'public',\r\n                                                format: event.format || 'other'\r\n                                            }\r\n                                            return (\r\n                                                <div key={event.event_id} className=\"snap-center shrink-0 w-[85vw] sm:w-[320px]\">\r\n                                                    {/* Use standardized EventCard */}\r\n                                                    <EventCard event={mappedEvent} />\r\n                                                </div>\r\n                                            )\r\n                                        })}\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Incoming Events Carousel */}\r\n                            {incomingEvents.length > 0 && (\r\n                                <div className=\"relative group\">\r\n                                    <div className=\"flex items-center justify-between mb-6\">\r\n                                        <h2 className=\"text-2xl font-black text-zinc-900\">Incoming Events</h2>\r\n                                        <div className=\"flex gap-2\">\r\n                                            <button\r\n                                                onClick={() => {\r\n                                                    incomingRef.current?.scrollBy({ left: -320, behavior: 'smooth' })\r\n                                                }}\r\n                                                className=\"w-10 h-10 rounded-full bg-white border border-zinc-100 flex items-center justify-center hover:bg-zinc-50 hover:border-zinc-200 transition-colors shadow-sm\"\r\n                                            >\r\n                                                <svg className=\"w-5 h-5 text-zinc-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15 19l-7-7 7-7\" />\r\n                                                </svg>\r\n                                            </button>\r\n                                            <button\r\n                                                onClick={() => {\r\n                                                    incomingRef.current?.scrollBy({ left: 320, behavior: 'smooth' })\r\n                                                }}\r\n                                                className=\"w-10 h-10 rounded-full bg-white border border-zinc-100 flex items-center justify-center hover:bg-zinc-50 hover:border-zinc-200 transition-colors shadow-sm\"\r\n                                            >\r\n                                                <svg className=\"w-5 h-5 text-zinc-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M9 5l7 7-7 7\" />\r\n                                                </svg>\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div\r\n                                        ref={incomingRef}\r\n                                        className=\"flex gap-6 overflow-x-auto pb-8 snap-x snap-mandatory scrollbar-hide -mx-4 px-4 sm:mx-0 sm:px-0 scroll-smooth\"\r\n                                    >\r\n                                        {incomingEvents.map((event) => (\r\n                                            <div key={event.id} className=\"snap-center shrink-0 w-[85vw] sm:w-[320px]\">\r\n                                                <EventCard event={event} />\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Categories */}\r\n                            {[\r\n                                { title: 'IT in Fintech', data: fintechEvents },\r\n                                { title: 'AI', data: aiEvents },\r\n                                { title: 'Future Career', data: careerEvents }\r\n                            ].map((cat) => cat.data.length > 0 && (\r\n                                <div key={cat.title}>\r\n                                    <div className=\"flex items-center justify-between mb-6\">\r\n                                        <h2 className=\"text-2xl font-black text-zinc-900\">{cat.title}</h2>\r\n                                        <button\r\n                                            onClick={() => {\r\n                                                setEventSearch(cat.title)\r\n                                                window.scrollTo({ top: 0, behavior: 'smooth' })\r\n                                            }}\r\n                                            className=\"text-sm font-bold text-yellow-600 hover:text-yellow-700\"\r\n                                        >\r\n                                            See More\r\n                                        </button>\r\n                                    </div>\r\n                                    <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n                                        {cat.data.slice(0, 4).map((event) => (\r\n                                            <EventCard key={event.id} event={event} />\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                            ))}\r\n                        </>\r\n                    )}\r\n\r\n                    {/* All Events Grid */}\r\n                    <div>\r\n                        <div className=\"flex items-center justify-between mb-6\">\r\n                            <h2 className=\"text-2xl font-black text-zinc-900\">\r\n                                {useAiEvents ? 'AI Match Results' : (eventSearch || filterRegStatus || filterRegType || filterEventType ? 'Search Results' : 'All Events')}\r\n                            </h2>\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <button\r\n                                    onClick={() => setUseAiEvents(!useAiEvents)}\r\n                                    className={`w-8 h-8 rounded-lg border-2 flex items-center justify-center transition-all ${useAiEvents\r\n                                        ? 'bg-green-500 border-green-500 text-white'\r\n                                        : 'bg-zinc-50 border-zinc-300 text-transparent hover:border-yellow-400'\r\n                                        }`}\r\n                                    aria-pressed={useAiEvents}\r\n                                    aria-label=\"Toggle AI Match for events\"\r\n                                >\r\n                                    <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"3\" d=\"M5 13l4 4L19 7\" />\r\n                                    </svg>\r\n                                </button>\r\n                                <span className=\"text-sm font-bold text-zinc-700\">AI Match</span>\r\n                                {useAiEvents && (\r\n                                    <span className=\"text-xs text-zinc-500\">{currentEmail ? `You (${currentEmail}) searched: ${debouncedEventSearch || ''}` : `You searched: ${debouncedEventSearch || ''}`}</span>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {eventsLoading ? (\r\n                            <div className=\"flex justify-center items-center h-64\">\r\n                                <div className=\"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-yellow-400\"></div>\r\n                            </div>\r\n                        ) : events.length === 0 ? (\r\n                            <div className=\"text-center py-20 bg-white rounded-[2.5rem] shadow-sm border border-yellow-100\">\r\n                                <div className=\"mx-auto h-24 w-24 bg-yellow-50 rounded-full flex items-center justify-center mb-4\">\r\n                                    <svg className=\"h-10 w-10 text-yellow-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\r\n                                    </svg>\r\n                                </div>\r\n                                <p className=\"text-zinc-900 text-xl font-bold\">No events found matching your search.</p>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-3\">\r\n                                {events.map((event) => (\r\n                                    <EventCard key={event.id} event={event} />\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {activeTab === 'organizations' && (\r\n                <div className=\"animate-fadeIn\">\r\n                    <div className=\"mb-10\">\r\n                        <div className=\"relative max-w-xl\">\r\n                            <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none\">\r\n                                <svg className=\"h-5 w-5 text-zinc-400\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n                                    <path fillRule=\"evenodd\" d=\"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z\" clipRule=\"evenodd\" />\r\n                                </svg>\r\n                            </div>\r\n                            <input\r\n                                type=\"text\"\r\n                                className=\"block w-full pl-11 pr-4 py-4 bg-white border-transparent rounded-2xl text-zinc-900 placeholder-zinc-400 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:bg-white shadow-sm transition-all duration-200 font-medium\"\r\n                                placeholder=\"Search organizations...\"\r\n                                value={orgSearch}\r\n                                onChange={(e) => setOrgSearch(e.target.value)}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    {orgsLoading ? (\r\n                        <div className=\"flex justify-center items-center h-64\">\r\n                            <div className=\"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-yellow-400\"></div>\r\n                        </div>\r\n                    ) : filteredOrgs.length === 0 ? (\r\n                        <div className=\"text-center py-20 bg-white rounded-[2.5rem] shadow-sm border border-yellow-100\">\r\n                            <div className=\"mx-auto h-24 w-24 bg-yellow-50 rounded-full flex items-center justify-center mb-4\">\r\n                                <svg className=\"h-10 w-10 text-yellow-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\" />\r\n                                </svg>\r\n                            </div>\r\n                            <p className=\"text-zinc-900 text-xl font-bold\">No organizations found.</p>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3\">\r\n                            {filteredOrgs.map((org) => (\r\n                                <Link key={org.id} href={`/main/organizations/${org.id}`} className=\"block group\">\r\n                                    <div className=\"bg-white overflow-hidden shadow-sm rounded-[2rem] hover:shadow-xl transition-all duration-300 border border-zinc-100 group-hover:-translate-y-1\">\r\n                                        <div className=\"h-3 bg-yellow-400\"></div>\r\n                                        <div className=\"px-6 py-6\">\r\n                                            <div className=\"flex items-center gap-3 mb-4\">\r\n                                                {org.logo_url ? (\r\n                                                    <img src={org.logo_url} alt=\"logo\" className=\"h-10 w-10 rounded-lg object-cover\" />\r\n                                                ) : (\r\n                                                    <div className=\"h-10 w-10 rounded-lg bg-zinc-100 flex items-center justify-center font-bold text-zinc-400\">\r\n                                                        {org.name.charAt(0)}\r\n                                                    </div>\r\n                                                )}\r\n                                                <div className=\"min-w-0\">\r\n                                                    <h3 className=\"text-lg font-black text-zinc-900 truncate group-hover:text-yellow-600 transition-colors\">{org.name}</h3>\r\n                                                    {org.type && <span className=\"text-xs font-bold text-zinc-400 uppercase tracking-wider\">{org.type}</span>}\r\n                                                </div>\r\n                                            </div>\r\n                                            {org.description && (\r\n                                                <p className=\"text-sm text-zinc-700 line-clamp-3\">{org.description}</p>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                </Link>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n\r\n            {activeTab === 'people' && (\r\n                <div className=\"animate-fadeIn\">\r\n                    <div className=\"mb-10\">\r\n                        <div className=\"flex flex-col md:flex-row gap-4\">\r\n                            <div className=\"relative flex-1\">\r\n                                <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none\">\r\n                                    <svg className=\"h-5 w-5 text-zinc-400\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n                                        <path fillRule=\"evenodd\" d=\"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z\" clipRule=\"evenodd\" />\r\n                                    </svg>\r\n                                </div>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    className=\"block w-full pl-11 pr-4 py-4 bg-white border-transparent rounded-2xl text-zinc-900 placeholder-zinc-400 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:bg-white shadow-sm transition-all duration-200 font-medium\"\r\n                                    placeholder=\"Search people by name...\"\r\n                                    value={peopleSearch}\r\n                                    onChange={(e) => setPeopleSearch(e.target.value)}\r\n                                />\r\n                            </div>\r\n                            <button\r\n                                onClick={() => setPeopleFiltersOpen(!peopleFiltersOpen)}\r\n                                className={`px-6 py-4 rounded-2xl font-bold shadow-sm border border-zinc-100 transition-all duration-200 flex items-center gap-2 ${peopleFiltersOpen ? 'bg-yellow-400 text-zinc-900' : 'bg-white text-zinc-700 hover:bg-zinc-50'}`}\r\n                            >\r\n                                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z\"/></svg>\r\n                                Filters\r\n                            </button>\r\n                            <div className=\"ml-auto flex items-center gap-2\">\r\n                                <button\r\n                                    onClick={() => setUseAiPeople(!useAiPeople)}\r\n                                    className={`w-8 h-8 rounded-lg border-2 flex items-center justify-center transition-all ${useAiPeople\r\n                                        ? 'bg-green-500 border-green-500 text-white'\r\n                                        : 'bg-zinc-50 border-zinc-300 text-transparent hover:border-yellow-400'\r\n                                        }`}\r\n                                    aria-pressed={useAiPeople}\r\n                                    aria-label=\"Toggle AI Match for people\"\r\n                                >\r\n                                    <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"3\" d=\"M5 13l4 4L19 7\" />\r\n                                    </svg>\r\n                                </button>\r\n                                <span className=\"text-sm font-bold text-zinc-700\">AI Match</span>\r\n                            </div>\r\n                        </div>\r\n                        {useAiPeople && (\r\n                            <div className=\"mt-2 text-xs text-zinc-500\">{currentEmail ? `You (${currentEmail}) searched: ${debouncedPeopleSearch || ''}` : `You searched: ${debouncedPeopleSearch || ''}`}</div>\r\n                        )}\r\n\r\n                        {peopleFiltersOpen && (\r\n                            <div className=\"mt-4 p-6 bg-white rounded-3xl shadow-sm border border-zinc-100 animate-fadeIn\">\r\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                                    <div>\r\n                                        <label className=\"text-xs font-bold text-zinc-900 uppercase mb-2 block\">Role</label>\r\n                                        <select\r\n                                            value={peopleRole}\r\n                                            onChange={(e) => setPeopleRole(e.target.value)}\r\n                                            className=\"w-full px-4 py-3 rounded-xl border border-zinc-200 text-zinc-900 bg-zinc-50 focus:bg-white focus:ring-2 focus:ring-yellow-400 focus:border-transparent outline-none transition-all\"\r\n                                        >\r\n                                            <option value=\"\">All Roles</option>\r\n                                            <option value=\"expert\">Expert</option>\r\n                                            <option value=\"student\">Student</option>\r\n                                            <option value=\"admin\">Admin</option>\r\n                                        </select>\r\n                                    </div>\r\n                                    <div>\r\n                                        <label className=\"text-xs font-bold text-zinc-900 uppercase mb-2 block\">Skill / Specialism</label>\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            value={peopleSkill}\r\n                                            onChange={(e) => setPeopleSkill(e.target.value)}\r\n                                            placeholder=\"e.g. Python, Design, Marketing\"\r\n                                            className=\"w-full px-4 py-3 rounded-xl border border-zinc-200 text-zinc-900 bg-zinc-50 focus:bg-white focus:ring-2 focus:ring-yellow-400 focus:border-transparent outline-none transition-all\"\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"mt-6 flex justify-end\">\r\n                                    <button\r\n                                        onClick={() => { setPeopleRole(''); setPeopleSkill('') }}\r\n                                        className=\"text-sm font-bold text-zinc-400 hover:text-zinc-900 transition-colors\"\r\n                                    >\r\n                                        Reset Filters\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {peopleLoading ? (\r\n                        <div className=\"flex justify-center items-center h-64\">\r\n                            <div className=\"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-yellow-400\"></div>\r\n                        </div>\r\n                    ) : people.length === 0 ? (\r\n                        <div className=\"text-center py-20 bg-white rounded-[2.5rem] shadow-sm border border-yellow-100\">\r\n                            <div className=\"mx-auto h-24 w-24 bg-yellow-50 rounded-full flex items-center justify-center mb-4\">\r\n                                <svg className=\"h-10 w-10 text-yellow-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n                                </svg>\r\n                            </div>\r\n                            <p className=\"text-zinc-900 text-xl font-bold\">No people found.</p>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3\">\r\n                            {people.map((profile) => (\r\n                                <Link key={profile.id} href={`/main/profile/${profile.user_id}`} className=\"block group\">\r\n                                    <div className=\"bg-white p-6 rounded-[2rem] shadow-sm hover:shadow-xl transition-all duration-300 border border-zinc-100 group-hover:-translate-y-1 flex items-center gap-4\">\r\n                                        {profile.avatar_url ? (\r\n                                            <img src={profile.avatar_url} alt=\"\" className=\"w-16 h-16 rounded-full object-cover ring-4 ring-yellow-50 group-hover:ring-yellow-100 transition-all\" />\r\n                                        ) : (\r\n                                            <div className=\"w-16 h-16 rounded-full bg-yellow-100 flex items-center justify-center text-yellow-700 font-black text-xl ring-4 ring-yellow-50 group-hover:ring-yellow-100 transition-all\">\r\n                                                {profile.full_name?.charAt(0) || 'U'}\r\n                                            </div>\r\n                                        )}\r\n                                        <div className=\"min-w-0\">\r\n                                            <h3 className=\"text-lg font-black text-zinc-900 truncate group-hover:text-yellow-600 transition-colors\">{profile.full_name}</h3>\r\n                                            {profile.bio && (\r\n                                                <p className=\"text-sm text-zinc-500 truncate\">{profile.bio}</p>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                </Link>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(app)\\events\\[id]\\page.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchData'. Either include it or remove the dependency array.","line":25,"column":8,"nodeType":"ArrayExpression","endLine":25,"endColumn":12,"suggestions":[{"desc":"Update the dependencies array to be: [fetchData, id]","fix":{"range":[881,885],"text":"[fetchData, id]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":54,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1729,1732],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1729,1732],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleLeave' is assigned a value but never used.","line":61,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":61,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":68,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":68,"endColumn":23},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":68,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":68,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2198,2201],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2198,2201],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isParticipant' is assigned a value but never used.","line":90,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":90,"endColumn":24},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":102,"column":21,"nodeType":"JSXOpeningElement","endLine":106,"endColumn":23}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useParams, useRouter } from 'next/navigation'\r\nimport { getEventById, joinPublicEvent, leaveEvent, getMe } from '@/services/api'\r\nimport { EventDetails, UserMeResponse } from '@/services/api.types'\r\nimport { toast } from 'react-hot-toast'\r\nimport { Skeleton } from '@/components/ui/Skeleton'\r\nimport Link from 'next/link'\r\n\r\nexport default function EventDetailsPage() {\r\n    const params = useParams()\r\n    const router = useRouter()\r\n    const id = params?.id as string\r\n\r\n    const [event, setEvent] = useState<EventDetails | null>(null)\r\n    const [loading, setLoading] = useState(true)\r\n    const [user, setUser] = useState<UserMeResponse | null>(null)\r\n    const [registering, setRegistering] = useState(false)\r\n\r\n    useEffect(() => {\r\n        if (id) {\r\n            fetchData()\r\n        }\r\n    }, [id])\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n            const [eventData, userData] = await Promise.all([\r\n                getEventById(id),\r\n                getMe().catch(() => null)\r\n            ])\r\n            setEvent(eventData)\r\n            setUser(userData)\r\n        } catch (error) {\r\n            console.error(error)\r\n            toast.error('Failed to load event details')\r\n            router.push('/dashboard')\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    const handleJoin = async () => {\r\n        if (!user) {\r\n            router.push(`/login?redirect=/events/${id}`)\r\n            return\r\n        }\r\n        setRegistering(true)\r\n        try {\r\n            await joinPublicEvent(id)\r\n            toast.success('Successfully registered!')\r\n            fetchData()\r\n        } catch (error: any) {\r\n            toast.error(error.response?.data?.detail || 'Failed to join event')\r\n        } finally {\r\n            setRegistering(false)\r\n        }\r\n    }\r\n\r\n    const handleLeave = async () => {\r\n        if (!confirm('Are you sure you want to cancel your registration?')) return\r\n        setRegistering(true)\r\n        try {\r\n            await leaveEvent(id)\r\n            toast.success('Registration cancelled')\r\n            fetchData()\r\n        } catch (error: any) {\r\n            toast.error('Failed to leave event')\r\n        } finally {\r\n            setRegistering(false)\r\n        }\r\n    }\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"max-w-5xl mx-auto px-4 py-8 space-y-8\">\r\n                <Skeleton height=\"300px\" className=\"rounded-3xl\" />\r\n                <div className=\"space-y-4\">\r\n                    <Skeleton height=\"40px\" width=\"60%\" className=\"rounded-xl\" />\r\n                    <Skeleton height=\"20px\" width=\"40%\" className=\"rounded-lg\" />\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    if (!event) return null\r\n\r\n    const isOrganizer = user?.id === event.organizer_id\r\n    const isParticipant = false // You would check this if the API returned participation status, assuming it does or we check separate endpoint. \r\n    // For now, let's assume getEventById might return 'is_participant' or similar if the backend supports it, \r\n    // OR we ignore the \"Unregister\" button state for MVP if the data isn't easily available without another call.\r\n    // Actually, createEvent returns EventDetails. \r\n\r\n    // Let's rely on basic display first.\r\n\r\n    return (\r\n        <div className=\"w-full min-h-screen bg-white\">\r\n            {/* Hero Image Section - Full Width */}\r\n            <div className=\"relative h-[50vh] min-h-[400px] w-full bg-zinc-900 group overflow-hidden\">\r\n                {event.cover_url && (\r\n                    <img\r\n                        src={event.cover_url}\r\n                        alt={event.title}\r\n                        className=\"absolute inset-0 w-full h-full object-cover opacity-80 transition-transform duration-700 group-hover:scale-105\"\r\n                    />\r\n                )}\r\n                <div className=\"absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent pointer-events-none\" />\r\n\r\n                <div className=\"absolute top-8 right-8 z-20 flex gap-3\">\r\n                    <span className=\"px-4 py-1.5 rounded-full bg-white/20 backdrop-blur-md text-white border border-white/20 text-xs font-bold uppercase tracking-wider shadow-lg\">\r\n                        {event.format.replace('_', ' ')}\r\n                    </span>\r\n                    <span className=\"px-4 py-1.5 rounded-full bg-white/20 backdrop-blur-md text-white border border-white/20 text-xs font-bold uppercase tracking-wider shadow-lg\">\r\n                        {event.type}\r\n                    </span>\r\n                </div>\r\n\r\n                {/* Title and Meta Section - Bottom Left */}\r\n                <div className=\"absolute bottom-0 left-0 right-0 p-6 md:p-12 z-10 w-full bg-gradient-to-t from-black via-black/80 to-transparent pt-32\">\r\n                    <div className=\"max-w-7xl mx-auto w-full space-y-4\">\r\n                        <h1 className=\"text-4xl md:text-6xl lg:text-7xl font-black text-white leading-tight tracking-tight shadow-sm max-w-4xl\">\r\n                            {event.title}\r\n                        </h1>\r\n\r\n                        <div className=\"flex flex-wrap items-center gap-6 text-zinc-200 font-medium text-lg pt-2\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <svg className=\"w-5 h-5 text-yellow-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\r\n                                </svg>\r\n                                {new Date(event.start_datetime).toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric' })}  {new Date(event.start_datetime).toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' })}\r\n                            </div>\r\n                            {(event.venue_remark || event.venue_place_id) ? (\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <svg className=\"w-5 h-5 text-yellow-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" />\r\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n                                    </svg>\r\n                                    <span className=\"truncate max-w-[300px]\">{event.venue_remark || event.venue_place_id}</span>\r\n                                </div>\r\n                            ) : (\r\n                                <div className=\"flex items-center gap-2\">\r\n                                    <svg className=\"w-5 h-5 text-yellow-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" />\r\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n                                    </svg>\r\n                                    <span className=\"truncate max-w-[300px]\">{event.type === 'online' ? 'Online Event' : 'Venue to be announced'}</span>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Main Content Area */}\r\n            <div className=\"max-w-7xl mx-auto px-6 md:px-12 py-12\">\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-12 lg:gap-16\">\r\n\r\n                    {/* Left Column: Description & Details (Span 8) */}\r\n                    <div className=\"lg:col-span-8 space-y-12\">\r\n                        <div>\r\n                            <h3 className=\"text-xl font-black text-zinc-900 mb-6 uppercase tracking-wider flex items-center gap-3\">\r\n                                <span className=\"w-8 h-1 bg-yellow-400 rounded-full\"></span>\r\n                                About This Event\r\n                            </h3>\r\n                            <div className=\"prose prose-lg prose-zinc max-w-none text-zinc-600 leading-loose\">\r\n                                {event.description ? (\r\n                                    <div className=\"whitespace-pre-wrap\">{event.description}</div>\r\n                                ) : (\r\n                                    <p className=\"italic text-zinc-400\">No description provided.</p>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Right Column: Sticky Action Sidebar (Span 4) */}\r\n                    <div className=\"lg:col-span-4 relative\">\r\n                        <div className=\"sticky top-8 space-y-6\">\r\n\r\n                            {/* Action Card */}\r\n                            <div className=\"bg-white rounded-[2rem] p-8 shadow-[0_8px_30px_rgb(0,0,0,0.08)] border border-zinc-100 relative overflow-hidden\">\r\n                                <div className=\"absolute top-0 right-0 w-32 h-32 bg-yellow-50 rounded-full blur-3xl -mr-16 -mt-16 opacity-50\"></div>\r\n\r\n                                {/* Action Button */}\r\n                                {isOrganizer ? (\r\n                                    <Link\r\n                                        href={`/dashboard`}\r\n                                        className=\"block w-full py-4 bg-zinc-900 text-white rounded-2xl font-bold text-center text-lg hover:bg-zinc-800 transition-all shadow-xl hover:shadow-2xl hover:-translate-y-1\"\r\n                                    >\r\n                                        Manage Event\r\n                                    </Link>\r\n                                ) : (\r\n                                    <div className=\"space-y-6\">\r\n                                        {event.registration_type === 'paid' && (\r\n                                            <div className=\"flex items-baseline justify-between\">\r\n                                                <span className=\"text-zinc-400 font-bold uppercase tracking-wider text-xs\">Price</span>\r\n                                                <span className=\"text-4xl font-black text-zinc-900 tracking-tight\">$$$</span>\r\n                                            </div>\r\n                                        )}\r\n\r\n                                        <button\r\n                                            onClick={handleJoin}\r\n                                            disabled={registering}\r\n                                            className=\"block w-full py-4 bg-yellow-400 text-zinc-900 rounded-2xl font-bold text-center text-lg hover:bg-yellow-300 transition-all shadow-xl hover:shadow-2xl hover:-translate-y-1 disabled:opacity-70 disabled:transform-none\"\r\n                                        >\r\n                                            {registering ? 'Registering...' : 'Register Now'}\r\n                                        </button>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* Organizer Section */}\r\n                            <div className=\"space-y-4\">\r\n                                <h3 className=\"text-sm font-bold text-zinc-900 uppercase tracking-widest\">Organizer</h3>\r\n                                <div className=\"p-5 bg-white rounded-2xl border border-zinc-200 shadow-sm flex items-center gap-4\">\r\n                                    <div className=\"w-12 h-12 rounded-full bg-zinc-100 flex items-center justify-center text-zinc-500 font-bold text-lg shrink-0 border border-zinc-100\">\r\n                                        {event.organizer_id ? event.organizer_id.charAt(0).toUpperCase() : '?'}\r\n                                    </div>\r\n                                    <div className=\"min-w-0\">\r\n                                        <div className=\"font-bold text-zinc-900 text-base truncate\">Event Host</div>\r\n                                        <div className=\"text-xs text-zinc-500 font-medium truncate\">View Profile</div>\r\n                                    </div>\r\n                                    <button className=\"ml-auto flex items-center justify-center w-8 h-8 rounded-full bg-zinc-50 text-zinc-400 hover:bg-zinc-100 hover:text-zinc-900 transition-colors\">\r\n                                        <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\r\n                                        </svg>\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(app)\\events\\create\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'EventType' is defined but never used.","line":7,"column":23,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":32},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getLatLng' is defined but never used.","line":9,"column":48,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":57},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":82,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":82,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2975,2978],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2975,2978],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'formData.venue_remark'. Either include it or remove the dependency array.","line":112,"column":8,"nodeType":"ArrayExpression","endLine":112,"endColumn":25,"suggestions":[{"desc":"Update the dependencies array to be: [formData.format, formData.venue_remark]","fix":{"range":[4046,4063],"text":"[formData.format, formData.venue_remark]"}}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'key' is assigned a value but never used.","line":293,"column":57,"nodeType":null,"messageId":"unusedVar","endLine":293,"endColumn":60}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport { createEvent, pingApi } from '@/services/api'\r\nimport { FormInput } from '@/components/auth/FormInput'\r\nimport { EventCreate, EventType } from '@/services/api.types'\r\nimport { toast } from 'react-hot-toast'\r\nimport PlacesAutocomplete, { geocodeByAddress, getLatLng } from 'react-places-autocomplete'\r\nimport { useLoadScript } from '@react-google-maps/api'\r\n\r\nconst libraries: (\"places\")[] = [\"places\"]\r\n\r\nexport default function CreateEventPage() {\r\n    const router = useRouter()\r\n    const [loading, setLoading] = useState(false)\r\n    const [error, setError] = useState('')\r\n\r\n    const { isLoaded } = useLoadScript({\r\n        googleMapsApiKey: process.env.NEXT_PUBLIC_GOOGLE_MAPS_API_KEY || '',\r\n        libraries,\r\n    })\r\n\r\n    const [formData, setFormData] = useState<EventCreate>({\r\n        title: '',\r\n        description: '',\r\n        format: 'workshop',\r\n        type: 'offline',\r\n        start_datetime: '',\r\n        end_datetime: '',\r\n        registration_type: 'free',\r\n        visibility: 'public',\r\n        venue_remark: 'Asia Pacific University',\r\n        venue_place_id: '',\r\n    })\r\n\r\n    const handleSelect = async (address: string) => {\r\n        setFormData(prev => ({ ...prev, venue_remark: address }))\r\n        try {\r\n            const results = await geocodeByAddress(address)\r\n            const placeId = results[0].place_id\r\n            setFormData(prev => ({ ...prev, venue_place_id: placeId }))\r\n        } catch (error) {\r\n            console.error('Error selecting place', error)\r\n        }\r\n    }\r\n\r\n    const toLocalInputValue = (d: Date) => {\r\n        const pad = (n: number) => n.toString().padStart(2, '0')\r\n        const year = d.getFullYear()\r\n        const month = pad(d.getMonth() + 1)\r\n        const day = pad(d.getDate())\r\n        const hours = pad(d.getHours())\r\n        const minutes = pad(d.getMinutes())\r\n        return `${year}-${month}-${day}T${hours}:${minutes}`\r\n    }\r\n\r\n    const minStart = toLocalInputValue(new Date())\r\n    const minEnd = formData.start_datetime || minStart\r\n\r\n    const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>) => {\r\n        const { name, value } = e.target\r\n        setFormData((prev) => ({ ...prev, [name]: value }))\r\n    }\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault()\r\n        setError('')\r\n        setLoading(true)\r\n\r\n        try {\r\n            if (new Date(formData.end_datetime) <= new Date(formData.start_datetime)) {\r\n                toast.error('End date must be after start date')\r\n                setLoading(false)\r\n                return\r\n            }\r\n\r\n            await pingApi()\r\n            const newEvent = await createEvent(formData)\r\n            toast.success('Event created successfully')\r\n            router.push(`/events/${newEvent.id}`)\r\n        } catch (err: any) {\r\n            console.error(err)\r\n            if (err.response?.status === 401) {\r\n                localStorage.removeItem('atas_token')\r\n                router.push('/login')\r\n                return\r\n            }\r\n            if (err.response?.data?.detail) {\r\n                toast.error(err.response.data.detail)\r\n            } else if (err.message) {\r\n                toast.error(err.message)\r\n            } else {\r\n                toast.error('Failed to create event')\r\n            }\r\n        }\r\n        finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    // Auto-matching logic\r\n    useEffect(() => {\r\n        if (formData.format === 'webinar') {\r\n            setFormData(prev => ({ ...prev, type: 'online', venue_remark: 'Zoom / Google Meet' }))\r\n        } else if (formData.format === 'panel_discussion') {\r\n            setFormData(prev => ({ ...prev, type: 'offline' }))\r\n            if (!formData.venue_remark) {\r\n                setFormData(prev => ({ ...prev, venue_remark: 'Asia Pacific University' }))\r\n            }\r\n        }\r\n    }, [formData.format])\r\n\r\n    return (\r\n        <div className=\"max-w-3xl mx-auto bg-white p-10 rounded-[2.5rem] shadow-sm border border-yellow-100\">\r\n            <div className=\"mb-10 text-center\">\r\n                <h1 className=\"text-3xl font-black text-zinc-900 tracking-tight\">Create New Event</h1>\r\n                <p className=\"text-zinc-500 mt-2 font-medium\">Fill in the details to host your awesome event.</p>\r\n            </div>\r\n\r\n            <form onSubmit={handleSubmit} className=\"space-y-8\">\r\n                <FormInput\r\n                    id=\"title\"\r\n                    label=\"Event Title\"\r\n                    placeholder=\"e.g. Intro to React Workshop\"\r\n                    value={formData.title}\r\n                    onChange={handleChange}\r\n                />\r\n\r\n                <div>\r\n                    <label htmlFor=\"description\" className=\"block text-sm font-bold text-zinc-900 mb-2 ml-1\">\r\n                        Description\r\n                    </label>\r\n                    <div className=\"mt-1\">\r\n                        <textarea\r\n                            id=\"description\"\r\n                            name=\"description\"\r\n                            rows={4}\r\n                            className=\"block w-full rounded-2xl bg-gray-50 border-transparent focus:border-yellow-400 focus:bg-white focus:ring-0 text-zinc-900 font-medium py-4 px-5 transition-all duration-200\"\r\n                            placeholder=\"Describe your event...\"\r\n                            value={formData.description || ''}\r\n                            onChange={handleChange}\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-1 gap-y-8 gap-x-6 sm:grid-cols-2\">\r\n                    <div>\r\n                        <label htmlFor=\"start_datetime\" className=\"block text-sm font-bold text-zinc-900 mb-2 ml-1\">\r\n                            Start Date & Time\r\n                        </label>\r\n                        <div className=\"mt-1\">\r\n                            <input\r\n                                type=\"datetime-local\"\r\n                                name=\"start_datetime\"\r\n                                id=\"start_datetime\"\r\n                                required\r\n                                className=\"block w-full rounded-2xl bg-gray-50 border-transparent focus:border-yellow-400 focus:bg-white focus:ring-0 text-zinc-900 font-medium py-4 px-5 transition-all duration-200\"\r\n                                min={minStart}\r\n                                value={formData.start_datetime}\r\n                                onChange={(e) => {\r\n                                    const v = e.target.value\r\n                                    const clamped = v && v < minStart ? minStart : v\r\n                                    setFormData(prev => ({ ...prev, start_datetime: clamped }))\r\n                                    if (formData.end_datetime && clamped && formData.end_datetime < clamped) {\r\n                                        setFormData(prev => ({ ...prev, end_datetime: clamped }))\r\n                                    }\r\n                                }}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label htmlFor=\"end_datetime\" className=\"block text-sm font-bold text-zinc-900 mb-2 ml-1\">\r\n                            End Date & Time\r\n                        </label>\r\n                        <div className=\"mt-1\">\r\n                            <input\r\n                                type=\"datetime-local\"\r\n                                name=\"end_datetime\"\r\n                                id=\"end_datetime\"\r\n                                required\r\n                                className=\"block w-full rounded-2xl bg-gray-50 border-transparent focus:border-yellow-400 focus:bg-white focus:ring-0 text-zinc-900 font-medium py-4 px-5 transition-all duration-200\"\r\n                                min={minEnd}\r\n                                value={formData.end_datetime}\r\n                                onChange={(e) => {\r\n                                    const v = e.target.value\r\n                                    const minV = minEnd\r\n                                    const clamped = v && v < minV ? minV : v\r\n                                    setFormData(prev => ({ ...prev, end_datetime: clamped }))\r\n                                }}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label htmlFor=\"format\" className=\"block text-sm font-bold text-zinc-900 mb-2 ml-1\">\r\n                            Format\r\n                        </label>\r\n                        <select\r\n                            id=\"format\"\r\n                            name=\"format\"\r\n                            className=\"block w-full rounded-2xl bg-gray-50 border-transparent focus:border-yellow-400 focus:bg-white focus:ring-0 text-zinc-900 font-medium py-4 px-5 transition-all duration-200\"\r\n                            value={formData.format}\r\n                            onChange={handleChange}\r\n                        >\r\n                            <option value=\"workshop\">Workshop</option>\r\n                            <option value=\"seminar\">Seminar</option>\r\n                            <option value=\"webinar\">Webinar</option>\r\n                            <option value=\"panel_discussion\">Panel Discussion</option>\r\n                            <option value=\"club_event\">Club Event</option>\r\n                            <option value=\"other\">Other</option>\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label htmlFor=\"type\" className=\"block text-sm font-bold text-zinc-900 mb-2 ml-1\">\r\n                            Type\r\n                        </label>\r\n                        <select\r\n                            id=\"type\"\r\n                            name=\"type\"\r\n                            className=\"block w-full rounded-2xl bg-gray-50 border-transparent focus:border-yellow-400 focus:bg-white focus:ring-0 text-zinc-900 font-medium py-4 px-5 transition-all duration-200\"\r\n                            value={formData.type}\r\n                            onChange={handleChange}\r\n                        >\r\n                            <option value=\"offline\">Offline (Physical)</option>\r\n                            <option value=\"online\">Online</option>\r\n                            <option value=\"hybrid\">Hybrid</option>\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label htmlFor=\"registration_type\" className=\"block text-sm font-bold text-zinc-900 mb-2 ml-1\">\r\n                            Registration\r\n                        </label>\r\n                        <select\r\n                            id=\"registration_type\"\r\n                            name=\"registration_type\"\r\n                            className=\"block w-full rounded-2xl bg-gray-50 border-transparent focus:border-yellow-400 focus:bg-white focus:ring-0 text-zinc-900 font-medium py-4 px-5 transition-all duration-200\"\r\n                            value={formData.registration_type}\r\n                            onChange={handleChange}\r\n                        >\r\n                            <option value=\"free\">Free</option>\r\n                            <option value=\"paid\">Paid</option>\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label htmlFor=\"visibility\" className=\"block text-sm font-bold text-zinc-900 mb-2 ml-1\">\r\n                            Visibility\r\n                        </label>\r\n                        <select\r\n                            id=\"visibility\"\r\n                            name=\"visibility\"\r\n                            className=\"block w-full rounded-2xl bg-gray-50 border-transparent focus:border-yellow-400 focus:bg-white focus:ring-0 text-zinc-900 font-medium py-4 px-5 transition-all duration-200\"\r\n                            value={formData.visibility}\r\n                            onChange={handleChange}\r\n                        >\r\n                            <option value=\"public\">Public</option>\r\n                            <option value=\"private\">Private</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"relative z-20\">\r\n                    <label htmlFor=\"venue_remark\" className=\"block text-sm font-bold text-zinc-900 mb-2 ml-1\">\r\n                        Venue / Location\r\n                    </label>\r\n                    {isLoaded ? (\r\n                        <PlacesAutocomplete\r\n                            value={formData.venue_remark || ''}\r\n                            onChange={(address) => setFormData(prev => ({ ...prev, venue_remark: address }))}\r\n                            onSelect={handleSelect}\r\n                        >\r\n                            {({ getInputProps, suggestions, getSuggestionItemProps, loading }) => (\r\n                                <div className=\"relative\">\r\n                                    <input\r\n                                        {...getInputProps({\r\n                                            placeholder: 'Search for a location...',\r\n                                            className: \"block w-full rounded-2xl bg-gray-50 border-transparent focus:border-yellow-400 focus:bg-white focus:ring-0 text-zinc-900 font-medium py-4 px-5 transition-all duration-200\"\r\n                                        })}\r\n                                    />\r\n                                    {suggestions.length > 0 && (\r\n                                        <div className=\"absolute z-50 w-full mt-2 bg-white rounded-xl shadow-xl border border-zinc-100 overflow-hidden\">\r\n                                            {loading && <div className=\"p-3 text-sm text-zinc-500\">Loading...</div>}\r\n                                            {suggestions.map((suggestion) => {\r\n                                                const className = suggestion.active\r\n                                                    ? 'px-4 py-3 bg-yellow-50 cursor-pointer'\r\n                                                    : 'px-4 py-3 bg-white cursor-pointer hover:bg-gray-50';\r\n\r\n                                                // Create a div wrapper to hold props and content to avoid duplicate key issues or spread issues\r\n                                                const { key, ...optionProps } = getSuggestionItemProps(suggestion, { className });\r\n\r\n                                                return (\r\n                                                    <div\r\n                                                        key={suggestion.placeId}\r\n                                                        {...optionProps}\r\n                                                    >\r\n                                                        <div className=\"font-bold text-zinc-900 text-sm\">{suggestion.formattedSuggestion.mainText}</div>\r\n                                                        <div className=\"text-xs text-zinc-500\">{suggestion.formattedSuggestion.secondaryText}</div>\r\n                                                    </div>\r\n                                                );\r\n                                            })}\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n                        </PlacesAutocomplete>\r\n                    ) : (\r\n                        <div className=\"w-full px-5 py-4 bg-zinc-100 rounded-2xl text-zinc-500 font-medium\">\r\n                            Loading Maps...\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {error && (\r\n                    <div className=\"rounded-2xl bg-red-50 p-4 border border-red-100\">\r\n                        <div className=\"flex\">\r\n                            <div className=\"ml-3\">\r\n                                <h3 className=\"text-sm font-bold text-red-800\">Error</h3>\r\n                                <div className=\"mt-1 text-sm text-red-700 font-medium\">\r\n                                    <p>{error}</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                <div className=\"flex justify-end gap-4 pt-4\">\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={() => router.back()}\r\n                        className=\"px-6 py-3 bg-white text-zinc-900 rounded-full font-bold shadow-sm hover:bg-gray-50 transition-all duration-200 border border-gray-200\"\r\n                    >\r\n                        Cancel\r\n                    </button>\r\n                    <button\r\n                        type=\"submit\"\r\n                        disabled={loading}\r\n                        className=\"px-8 py-3 bg-yellow-400 text-zinc-900 rounded-full shadow-lg font-bold hover:bg-yellow-300 hover:scale-105 transition-all duration-200 disabled:opacity-70 disabled:cursor-not-allowed\"\r\n                    >\r\n                        {loading ? 'Creating...' : 'Create Event'}\r\n                    </button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(app)\\events\\page.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":114,"column":41,"nodeType":"JSXOpeningElement","endLine":118,"endColumn":43}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport React, { useEffect, useState } from 'react'\r\nimport Link from 'next/link'\r\nimport { getPublicEvents } from '@/services/api'\r\nimport { EventDetails } from '@/services/api.types'\r\n\r\nexport default function EventsPage() {\r\n    const [events, setEvents] = useState<EventDetails[]>([])\r\n    const [loading, setLoading] = useState(true)\r\n    const [searchTerm, setSearchTerm] = useState('')\r\n\r\n    const [error, setError] = useState<string | null>(null)\r\n\r\n    useEffect(() => {\r\n        loadEvents()\r\n    }, [])\r\n\r\n    const loadEvents = async () => {\r\n        try {\r\n            setError(null)\r\n            const data = await getPublicEvents()\r\n            setEvents(data)\r\n        } catch (err: unknown) {\r\n            console.error('Failed to load events', err)\r\n            setError('Failed to load events. Please try again later.')\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    const filteredEvents = events\r\n        .filter((event) => event.visibility === 'public' && event.status === 'published' && event.registration_status === 'opened')\r\n        .filter((event) => event.title.toLowerCase().includes(searchTerm.toLowerCase()))\r\n\r\n    const formatDate = (dateString: string) => {\r\n        return new Date(dateString).toLocaleDateString('en-US', {\r\n            month: 'short',\r\n            day: 'numeric',\r\n            year: 'numeric',\r\n            hour: 'numeric',\r\n            minute: 'numeric',\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"mb-10 text-center sm:text-left\">\r\n                <h1 className=\"text-4xl font-black text-zinc-900 tracking-tight mb-3\">Explore Events</h1>\r\n                <p className=\"text-lg text-zinc-600 max-w-2xl\">\r\n                    Discover workshops, seminars, and club events happening around you. Join the fun!\r\n                </p>\r\n            </div>\r\n\r\n            {/* Search and Filter */}\r\n            <div className=\"mb-10\">\r\n                <div className=\"relative max-w-xl\">\r\n                    <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none\">\r\n                        <svg\r\n                            className=\"h-5 w-5 text-zinc-400\"\r\n                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                            viewBox=\"0 0 20 20\"\r\n                            fill=\"currentColor\"\r\n                            aria-hidden=\"true\"\r\n                        >\r\n                            <path\r\n                                fillRule=\"evenodd\"\r\n                                d=\"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z\"\r\n                                clipRule=\"evenodd\"\r\n                            />\r\n                        </svg>\r\n                    </div>\r\n                    <input\r\n                        type=\"text\"\r\n                        className=\"block w-full pl-11 pr-4 py-4 bg-white border-transparent rounded-2xl text-zinc-900 placeholder-zinc-400 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:bg-white shadow-sm transition-all duration-200 font-medium\"\r\n                        placeholder=\"Search events...\"\r\n                        value={searchTerm}\r\n                        onChange={(e) => setSearchTerm(e.target.value)}\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            {loading ? (\r\n                <div className=\"flex justify-center items-center h-64\">\r\n                    <div className=\"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-yellow-400\"></div>\r\n                </div>\r\n            ) : error ? (\r\n                <div className=\"text-center py-20 bg-red-50 rounded-[2.5rem] shadow-sm border border-red-100\">\r\n                    <p className=\"text-red-600 text-xl font-bold\">{error}</p>\r\n                    <button\r\n                        onClick={() => loadEvents()}\r\n                        className=\"mt-4 px-6 py-2 bg-white border border-red-200 text-red-600 rounded-full font-bold hover:bg-red-50 transition-colors\"\r\n                    >\r\n                        Try Again\r\n                    </button>\r\n                </div>\r\n            ) : filteredEvents.length === 0 ? (\r\n                <div className=\"text-center py-20 bg-white rounded-[2.5rem] shadow-sm border border-yellow-100\">\r\n                    <div className=\"mx-auto h-24 w-24 bg-yellow-50 rounded-full flex items-center justify-center mb-4\">\r\n                        <svg className=\"h-10 w-10 text-yellow-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\r\n                        </svg>\r\n                    </div>\r\n                    <p className=\"text-zinc-900 text-xl font-bold\">No events found matching your search.</p>\r\n                    <p className=\"text-zinc-500 mt-2\">Try adjusting your search terms.</p>\r\n                </div>\r\n            ) : (\r\n                <div className=\"grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-3\">\r\n                    {filteredEvents.map((event) => (\r\n                        <Link key={event.id} href={`/events/${event.id}`} className=\"group\">\r\n                            <div className=\"flex flex-col h-full bg-white rounded-[2rem] shadow-sm overflow-hidden hover:shadow-xl transition-all duration-300 border border-zinc-100 group-hover:-translate-y-2\">\r\n                                <div className=\"h-56 bg-zinc-100 relative overflow-hidden\">\r\n                                    {event.cover_url ? (\r\n                                        <img\r\n                                            src={event.cover_url}\r\n                                            alt={event.title}\r\n                                            className=\"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110\"\r\n                                        />\r\n                                    ) : (\r\n                                        <div className=\"w-full h-full bg-yellow-400 flex items-center justify-center\">\r\n                                            <span className=\"text-zinc-900 text-6xl font-black opacity-20 select-none\">\r\n                                                {event.title.charAt(0)}\r\n                                            </span>\r\n                                        </div>\r\n                                    )}\r\n                                    <div className=\"absolute top-4 right-4 bg-white/90 backdrop-blur-md px-3 py-1.5 rounded-lg text-xs font-bold text-zinc-900 shadow-sm uppercase tracking-wide\">\r\n                                        {event.format.replace('_', ' ')}\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"flex-1 p-8 flex flex-col justify-between\">\r\n                                    <div>\r\n                                        <div className=\"flex items-center justify-between mb-3\">\r\n                                            <span className=\"text-xs font-bold text-yellow-600 bg-yellow-50 px-3 py-1 rounded-full uppercase tracking-wide\">\r\n                                                {event.type}\r\n                                            </span>\r\n                                            <span className=\"text-xs font-bold text-zinc-400 uppercase tracking-wider\">\r\n                                                {event.registration_type}\r\n                                            </span>\r\n                                        </div>\r\n                                        <h3 className=\"text-2xl font-black text-zinc-900 group-hover:text-yellow-500 transition-colors mb-3 leading-tight\">\r\n                                            {event.title}\r\n                                        </h3>\r\n                                        <p className=\"text-zinc-500 text-sm line-clamp-3 font-medium leading-relaxed\">\r\n                                            {event.description || 'No description provided.'}\r\n                                        </p>\r\n                                    </div>\r\n                                    <div className=\"mt-6 pt-6 border-t border-zinc-50 flex items-center text-sm font-bold text-zinc-600\">\r\n                                        <svg\r\n                                            className=\"flex-shrink-0 mr-2 h-5 w-5 text-yellow-400\"\r\n                                            fill=\"none\"\r\n                                            viewBox=\"0 0 24 24\"\r\n                                            stroke=\"currentColor\"\r\n                                        >\r\n                                            <path\r\n                                                strokeLinecap=\"round\"\r\n                                                strokeLinejoin=\"round\"\r\n                                                strokeWidth=\"2\"\r\n                                                d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"\r\n                                            />\r\n                                        </svg>\r\n                                        {formatDate(event.start_datetime)}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </Link>\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(app)\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(app)\\notifications\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'formatDistanceToNow' is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Link' is defined but never used.","line":6,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":12},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":22,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport React, { useEffect, useState } from 'react'\r\nimport { getNotifications, markNotificationRead, NotificationItem } from '@/services/api'\r\nimport { formatDistanceToNow } from 'date-fns' // You might need to install date-fns or use basic formatter\r\nimport Link from 'next/link'\r\nimport { Skeleton } from '@/components/ui/Skeleton'\r\nimport { EmptyState } from '@/components/ui/EmptyState'\r\n\r\nexport default function NotificationsPage() {\r\n    const [notifications, setNotifications] = useState<NotificationItem[]>([])\r\n    const [loading, setLoading] = useState(true)\r\n\r\n    useEffect(() => {\r\n        loadNotifications()\r\n    }, [])\r\n\r\n    const loadNotifications = async () => {\r\n        try {\r\n            const data = await getNotifications()\r\n            setNotifications(data)\r\n        } catch (error) {\r\n            console.error('Failed to load notifications')\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    const handleMarkAsRead = async (id: string) => {\r\n        // Optimistic update\r\n        setNotifications(prev => prev.map(n => n.id === id ? { ...n, read: true } : n))\r\n        await markNotificationRead(id)\r\n    }\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"max-w-3xl mx-auto px-4 py-8 space-y-4\">\r\n                <Skeleton height=\"80px\" className=\"rounded-2xl\" />\r\n                <Skeleton height=\"80px\" className=\"rounded-2xl\" />\r\n                <Skeleton height=\"80px\" className=\"rounded-2xl\" />\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"max-w-3xl mx-auto px-4 py-8\">\r\n            <div className=\"flex items-center justify-between mb-8\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-black text-zinc-900 tracking-tight\">Notifications</h1>\r\n                </div>\r\n                {/* Optional: 'Mark all as read' button could go here */}\r\n            </div>\r\n\r\n            {notifications.length === 0 ? (\r\n                <EmptyState\r\n                    title=\"No notifications yet\"\r\n                    description=\"We will let you know when something important happens.\"\r\n                />\r\n            ) : (\r\n                <div className=\"space-y-4\">\r\n                    {notifications.map((notification) => (\r\n                        <div\r\n                            key={notification.id}\r\n                            onClick={() => !notification.read && handleMarkAsRead(notification.id)}\r\n                            className={`group relative flex items-start p-5 rounded-2xl border transition-all ${notification.read\r\n                                ? 'bg-white border-zinc-100'\r\n                                : 'bg-blue-50/50 border-blue-100 hover:bg-blue-50'\r\n                                }`}\r\n                        >\r\n                            <div className={`mt-1 h-2.5 w-2.5 rounded-full flex-shrink-0 ${notification.read ? 'bg-transparent' : 'bg-blue-500'\r\n                                }`} />\r\n\r\n                            <div className=\"ml-4 flex-1\">\r\n                                <div className=\"flex justify-between items-start\">\r\n                                    <h3 className={`text-base font-bold ${notification.read ? 'text-zinc-900' : 'text-blue-900'}`}>\r\n                                        {notification.title}\r\n                                    </h3>\r\n                                    <span className=\"text-xs font-medium text-zinc-400 whitespace-nowrap ml-2\">\r\n                                        {/* Simple relative time if date-fns not avail, or just string */}\r\n                                        {new Date(notification.created_at).toLocaleDateString()}\r\n                                    </span>\r\n                                </div>\r\n                                <p className={`mt-1 text-sm ${notification.read ? 'text-zinc-500' : 'text-blue-800/80'}`}>\r\n                                    {notification.message}\r\n                                </p>\r\n                                {notification.link && (\r\n                                    <div className=\"mt-2 text-xs text-blue-500 font-bold hidden\">\r\n                                        Link: {notification.link}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(app)\\onboarding\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'adminService' is defined but never used.","line":7,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Listbox' is defined but never used.","line":9,"column":32,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":39},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":158,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":158,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6926,6929],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6926,6929],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'selected' is defined but never used.","line":191,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":191,"endColumn":33},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'active' is defined but never used.","line":191,"column":35,"nodeType":null,"messageId":"unusedVar","endLine":191,"endColumn":41},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'router' is assigned a value but never used.","line":209,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":209,"endColumn":15},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'form.can_be_speaker' and 'form.intents'. Either include them or remove the dependency array.","line":231,"column":6,"nodeType":"ArrayExpression","endLine":231,"endColumn":17,"suggestions":[{"desc":"Update the dependencies array to be: [form.can_be_speaker, form.intents, form.role]","fix":{"range":[10020,10031],"text":"[form.can_be_speaker, form.intents, form.role]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":233,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":233,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[10093,10096],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[10093,10096],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":289,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":289,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[11715,11718],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[11715,11718],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":460,"column":100,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[21365,21378],"text":"I&apos;m from here"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[21365,21378],"text":"I&lsquo;m from here"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[21365,21378],"text":"I&#39;m from here"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[21365,21378],"text":"I&rsquo;m from here"},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport React, { useState, useEffect, Fragment } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport { completeOnboarding, getMyProfile, getTags } from '@/services/api'\r\nimport type { OnboardingData } from '@/services/api.types'\r\nimport { adminService } from '@/services/admin.service'\r\nimport { toast } from 'react-hot-toast'\r\nimport { Combobox, Transition, Listbox, Switch } from '@headlessui/react'\r\nimport { CheckIcon, ChevronDownIcon, MagnifyingGlassIcon, ClockIcon } from '@radix-ui/react-icons'\r\n\r\nimport { APU_DEGREES } from '@/lib/constants'\r\nimport { getData } from 'country-list'\r\n\r\nconst COUNTRIES = getData().map(c => c.name).sort()\r\n\r\n// --- Components ---\r\n\r\nfunction CountryCombobox({ value, onChange, disabled, placeholder }: { value: string, onChange: (val: string | null) => void, disabled?: boolean, placeholder?: string }) {\r\n  const [query, setQuery] = useState('')\r\n  const filtered = query === ''\r\n    ? COUNTRIES\r\n    : COUNTRIES.filter((c) => c.toLowerCase().includes(query.toLowerCase()))\r\n\r\n  return (\r\n    <Combobox value={value} onChange={onChange} disabled={disabled}>\r\n      <div className=\"relative mt-1\">\r\n        <Combobox.Input\r\n          className={`block w-full px-4 py-3 rounded-xl border-zinc-200 bg-zinc-50 text-black focus:bg-white focus:ring-2 focus:ring-yellow-400/50 outline-none ${disabled ? 'opacity-50 cursor-not-allowed' : ''}`}\r\n          placeholder={placeholder || \"Select Country...\"}\r\n          onChange={(event) => setQuery(event.target.value)}\r\n        />\r\n        {!disabled && (\r\n          <Combobox.Options className=\"absolute z-10 w-full py-1 mt-1 overflow-auto text-base bg-white rounded-md shadow-lg max-h-60 ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm\">\r\n            {filtered.length === 0 && query !== '' ? (\r\n              <div className=\"cursor-default select-none relative py-2 px-4 text-gray-700\">Nothing found.</div>\r\n            ) : (\r\n              filtered.map((c) => (\r\n                <Combobox.Option\r\n                  key={c}\r\n                  value={c}\r\n                  className={({ active }) =>\r\n                    `cursor-default select-none relative py-2 pl-4 pr-4 ${active ? 'text-white bg-yellow-500' : 'text-black'\r\n                    }`\r\n                  }\r\n                >\r\n                  {c}\r\n                </Combobox.Option>\r\n              ))\r\n            )}\r\n          </Combobox.Options>\r\n        )}\r\n      </div>\r\n    </Combobox>\r\n  )\r\n}\r\n\r\nfunction DegreeSelector({ value, onChange }: { value: string, onChange: (val: string) => void }) {\r\n  const [query, setQuery] = useState('')\r\n  const filtered = query === ''\r\n    ? APU_DEGREES\r\n    : APU_DEGREES.filter((d) => d.toLowerCase().includes(query.toLowerCase()))\r\n\r\n  return (\r\n    <div className=\"relative\">\r\n      <Combobox value={value} onChange={(val) => onChange(val || '')}>\r\n        <div className=\"relative mt-1\">\r\n          <div className=\"relative w-full cursor-default overflow-hidden rounded-xl bg-white text-left border border-zinc-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-yellow-300 sm:text-sm\">\r\n            <Combobox.Input\r\n              className=\"w-full border-none py-3 pl-4 pr-10 text-sm leading-5 text-black focus:ring-0 outline-none\"\r\n              displayValue={(val: string) => val}\r\n              onChange={(event) => setQuery(event.target.value)}\r\n              placeholder=\"Search your degree...\"\r\n            />\r\n            <Combobox.Button className=\"absolute inset-y-0 right-0 flex items-center pr-2\">\r\n              <ChevronDownIcon className=\"h-5 w-5 text-zinc-400\" aria-hidden=\"true\" />\r\n            </Combobox.Button>\r\n          </div>\r\n          <Transition\r\n            as={Fragment}\r\n            leave=\"transition ease-in duration-100\"\r\n            leaveFrom=\"opacity-100\"\r\n            leaveTo=\"opacity-0\"\r\n            afterLeave={() => setQuery('')}\r\n          >\r\n            <Combobox.Options className=\"absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm z-50\">\r\n              {filtered.length === 0 && query !== '' ? (\r\n                <div className=\"relative cursor-default select-none py-2 px-4 text-zinc-700\">\r\n                  Nothing found.\r\n                </div>\r\n              ) : (\r\n                filtered.map((degree) => (\r\n                  <Combobox.Option\r\n                    key={degree}\r\n                    className={({ active }) =>\r\n                      `relative cursor-default select-none py-2 pl-10 pr-4 ${active ? 'bg-yellow-100 text-yellow-900' : 'text-black'\r\n                      }`\r\n                    }\r\n                    value={degree}\r\n                  >\r\n                    {({ selected, active }) => (\r\n                      <>\r\n                        <span className={`block truncate ${selected ? 'font-medium' : 'font-normal'}`}>\r\n                          {degree}\r\n                        </span>\r\n                        {selected ? (\r\n                          <span className={`absolute inset-y-0 left-0 flex items-center pl-3 ${active ? 'text-yellow-600' : 'text-yellow-600'}`}>\r\n                            <CheckIcon className=\"h-5 w-5\" aria-hidden=\"true\" />\r\n                          </span>\r\n                        ) : null}\r\n                      </>\r\n                    )}\r\n                  </Combobox.Option>\r\n                ))\r\n              )}\r\n            </Combobox.Options>\r\n          </Transition>\r\n        </div>\r\n      </Combobox>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction TagSelector({ selectedIds, onChange }: { selectedIds: string[], onChange: (ids: string[]) => void }) {\r\n  const [tags, setTags] = useState<{ id: string, name: string }[]>([])\r\n  const [query, setQuery] = useState('')\r\n\r\n  useEffect(() => {\r\n    getTags().then(setTags).catch(() => { })\r\n  }, [])\r\n\r\n  const filtered = query === ''\r\n    ? tags\r\n    : tags.filter((t) => t.name.toLowerCase().includes(query.toLowerCase()))\r\n\r\n  const toggleTag = (id: string) => {\r\n    if (selectedIds.includes(id)) {\r\n      onChange(selectedIds.filter(i => i !== id))\r\n    } else {\r\n      onChange([...selectedIds, id])\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      <div className=\"flex flex-wrap gap-2 mb-2\">\r\n        {selectedIds.map(id => {\r\n          const t = tags.find(x => x.id === id)\r\n          return t ? (\r\n            <span key={id} onClick={() => toggleTag(id)} className=\"cursor-pointer inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 hover:bg-red-100 hover:text-red-800 transition-colors\">\r\n              {t.name} \r\n            </span>\r\n          ) : null\r\n        })}\r\n      </div>\r\n\r\n      <div className=\"relative\">\r\n        <Combobox value={null} onChange={(t: any) => t && toggleTag(t.id)}>\r\n          <div className=\"relative w-full cursor-default overflow-hidden rounded-xl bg-white text-left border border-zinc-200 sm:text-sm\">\r\n            <div className=\"flex items-center pl-3\">\r\n              <MagnifyingGlassIcon className=\"w-4 h-4 text-zinc-400\" />\r\n              <Combobox.Input\r\n                className=\"w-full border-none py-3 pl-2 pr-10 text-sm leading-5 text-black focus:ring-0 outline-none\"\r\n                onChange={(event) => setQuery(event.target.value)}\r\n                placeholder=\"Search specialities (e.g. AI, Blockchain)...\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <Transition\r\n            as={Fragment}\r\n            leave=\"transition ease-in duration-100\"\r\n            leaveFrom=\"opacity-100\"\r\n            leaveTo=\"opacity-0\"\r\n            afterLeave={() => setQuery('')}\r\n          >\r\n            <Combobox.Options className=\"absolute mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm z-50\">\r\n              {filtered.length === 0 && query !== '' ? (\r\n                <div className=\"relative cursor-default select-none py-2 px-4 text-zinc-700\">\r\n                  No tags found.\r\n                </div>\r\n              ) : (\r\n                filtered.map((tag) => (\r\n                  <Combobox.Option\r\n                    key={tag.id}\r\n                    className={({ active }) =>\r\n                      `relative cursor-default select-none py-2 pl-4 pr-4 ${active ? 'bg-yellow-50 text-yellow-900' : 'text-black'\r\n                      }`\r\n                    }\r\n                    value={tag}\r\n                  >\r\n                    {({ selected, active }) => (\r\n                      <span className={`block truncate ${selectedIds.includes(tag.id) ? 'font-bold' : 'font-normal'}`}>\r\n                        {tag.name}\r\n                      </span>\r\n                    )}\r\n                  </Combobox.Option>\r\n                ))\r\n              )}\r\n            </Combobox.Options>\r\n          </Transition>\r\n        </Combobox>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nexport default function OnboardingPage() {\r\n  const router = useRouter()\r\n  const [loading, setLoading] = useState(false)\r\n  const [step, setStep] = useState(1)\r\n  const [otherIntent, setOtherIntent] = useState('')\r\n\r\n  // Form State\r\n  const [form, setForm] = useState<OnboardingData>({ full_name: '', role: 'student', country: 'Malaysia', origin_country: 'Malaysia', same_as_origin: true })\r\n\r\n  // Initialize defaults based on role\r\n  useEffect(() => {\r\n    if (form.role === 'student' && (!form.intents || form.intents.length === 0)) {\r\n      updateField('intents', ['Find Expert / Speaker'])\r\n    }\r\n    if (form.role === 'expert') {\r\n      const currentIntents = form.intents || [];\r\n      if (!currentIntents.includes('Open to Speaking')) {\r\n        updateField('intents', [...currentIntents, 'Open to Speaking'])\r\n      }\r\n      if (!form.can_be_speaker) {\r\n        updateField('can_be_speaker', true)\r\n      }\r\n    }\r\n  }, [form.role])\r\n\r\n  const updateField = (key: keyof OnboardingData, value: any) => {\r\n    setForm(prev => ({ ...prev, [key]: value }))\r\n  }\r\n\r\n  // Nested updates\r\n  const updateEducation = (key: string, value: string) => {\r\n    setForm(prev => ({\r\n      ...prev,\r\n      education: { ...prev.education, [key]: value }\r\n    }))\r\n  }\r\n\r\n  const toggleIntent = (intent: string) => {\r\n    const current = form.intents || []\r\n    if (current.includes(intent)) {\r\n      updateField('intents', current.filter(i => i !== intent))\r\n    } else {\r\n      updateField('intents', [...current, intent])\r\n    }\r\n  }\r\n\r\n  const handleNext = (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    if (!form.full_name) {\r\n      toast.error('Please enter your name')\r\n      return\r\n    }\r\n    setStep(2)\r\n  }\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    setLoading(true)\r\n    try {\r\n      // Logic for Specialist mapping\r\n      const payload = { ...form }\r\n\r\n      if (form.role === 'student' && form.education?.field_of_study) {\r\n        payload.specialist = form.education.field_of_study\r\n      }\r\n\r\n      // Handle Other Intent\r\n      if (payload.intents?.includes('Other') && otherIntent.trim()) {\r\n        payload.intents = payload.intents.filter(i => i !== 'Other')\r\n        payload.intents.push(`Other: ${otherIntent}`)\r\n      }\r\n\r\n      if (form.role === 'expert') {\r\n        const intents = form.intents || []\r\n        payload.can_be_speaker = intents.includes('Open to Speaking')\r\n      }\r\n\r\n      await completeOnboarding(payload)\r\n      await getMyProfile()\r\n      toast.success('Welcome to ATAS!')\r\n      window.location.href = '/dashboard'\r\n    } catch (error: any) {\r\n      toast.error(error.response?.data?.detail || 'Failed to complete onboarding')\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 bg-[#FFFDF5] flex flex-col justify-center py-12 px-4 sm:px-6 lg:px-8 font-sans overflow-y-auto\">\r\n      {/* Background Decor */}\r\n      <div className=\"fixed top-0 left-0 w-full h-2 bg-gradient-to-r from-yellow-300 via-orange-300 to-red-300\" />\r\n\r\n      <div className=\"fixed top-6 right-6 flex items-center gap-2 bg-white px-4 py-2 rounded-full shadow-sm border border-zinc-100 text-xs font-semibold text-zinc-500 z-10 rotate-3 transition-transform hover:rotate-0\">\r\n        <ClockIcon className=\"w-3.5 h-3.5\" />\r\n        <span>5 min  Quick form only</span>\r\n      </div>\r\n\r\n      <div className=\"sm:mx-auto sm:w-full sm:max-w-xl\">\r\n        <div className=\"text-center mb-8\">\r\n          <h2 className=\"text-3xl font-extrabold text-zinc-900 tracking-tight\">\r\n            {step === 1 ? \"Let's get you started\" : \"Tell us a bit more\"}\r\n          </h2>\r\n          <p className=\"mt-2 text-sm text-zinc-500\">\r\n            Step {step} of 2\r\n          </p>\r\n          {/* Progress Bar */}\r\n          <div className=\"w-24 h-1.5 bg-zinc-100 rounded-full mx-auto mt-4 overflow-hidden\">\r\n            <div className={`h-full bg-yellow-400 transition-all duration-500 ease-out ${step === 1 ? 'w-1/2' : 'w-full'}`} />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"bg-white py-10 px-8 shadow-xl shadow-zinc-200/50 rounded-3xl border border-zinc-100/50 relative overflow-hidden\">\r\n          {/* Decor */}\r\n          <div className=\"absolute top-0 right-0 -mr-16 -mt-16 w-32 h-32 rounded-full bg-yellow-50 blur-2xl opacity-50\" />\r\n\r\n          <form onSubmit={step === 1 ? handleNext : handleSubmit} className=\"space-y-6 relative\">\r\n\r\n            {/* STEP 1 */}\r\n            {step === 1 && (\r\n              <div className=\"space-y-8 animate-in fade-in slide-in-from-right-4 duration-500\">\r\n                <div>\r\n                  <label className=\"block text-sm font-bold text-black mb-2\">What should we call you?</label>\r\n                  <input\r\n                    type=\"text\"\r\n                    required\r\n                    maxLength={50}\r\n                    value={form.full_name}\r\n                    onChange={(e) => updateField('full_name', e.target.value)}\r\n                    className=\"block w-full px-4 py-3 rounded-xl border-zinc-200 bg-zinc-50 text-black focus:bg-white focus:ring-2 focus:ring-yellow-400/50 focus:border-yellow-400 transition-all outline-none\"\r\n                    placeholder=\"e.g. Alex Chen\"\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <label className=\"block text-sm font-bold text-black mb-3\">Which describes you best?</label>\r\n                  <div className=\"grid grid-cols-1 gap-4\">\r\n                    {[\r\n                      { id: 'student', title: 'Student', icon: '', desc: 'I am studying and looking for opportunities' },\r\n                      { id: 'expert', title: 'Expert', icon: '', desc: 'I want to share knowledge or mentor' },\r\n                      { id: 'sponsor', title: 'Sponsor', icon: '', desc: 'I want to support events and students' },\r\n                    ].map((roleOption) => (\r\n                      <div\r\n                        key={roleOption.id}\r\n                        onClick={() => updateField('role', roleOption.id)}\r\n                        className={`cursor-pointer group relative flex items-center p-4 rounded-2xl border-2 transition-all duration-200 ${form.role === roleOption.id\r\n                          ? 'border-yellow-400 bg-yellow-50/50'\r\n                          : 'border-zinc-100 hover:border-zinc-200 bg-white'\r\n                          }`}\r\n                      >\r\n                        <span className=\"text-2xl mr-4 group-hover:scale-110 transition-transform\">{roleOption.icon}</span>\r\n                        <div className=\"flex-1\">\r\n                          <h3 className={`font-bold ${form.role === roleOption.id ? 'text-black' : 'text-zinc-700'}`}>\r\n                            {roleOption.title}\r\n                          </h3>\r\n                          <p className=\"text-xs text-zinc-500 mt-0.5\">{roleOption.desc}</p>\r\n                        </div>\r\n                        <div className={`w-5 h-5 rounded-full border-2 flex items-center justify-center ${form.role === roleOption.id ? 'border-yellow-500' : 'border-zinc-200'\r\n                          }`}>\r\n                          {form.role === roleOption.id && <div className=\"w-2.5 h-2.5 rounded-full bg-yellow-500\" />}\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* STEP 2 */}\r\n            {step === 2 && (\r\n              <div className=\"space-y-6 animate-in fade-in slide-in-from-right-4 duration-500\">\r\n\r\n                {/* STUDENT FIELDS */}\r\n                {form.role === 'student' && (\r\n                  <>\r\n                    <div>\r\n                      <label className=\"block text-xs font-bold text-zinc-500 uppercase tracking-wide mb-2\">Education</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        value=\"Asia Pacific University\"\r\n                        readOnly\r\n                        className=\"block w-full px-4 py-3 rounded-xl border-zinc-200 bg-zinc-100 text-black cursor-not-allowed mb-3\"\r\n                      />\r\n                      <div className=\"grid grid-cols-2 gap-3\">\r\n                        <select\r\n                          className=\"block w-full px-4 py-3 rounded-xl border-zinc-200 bg-zinc-50 text-black focus:bg-white focus:ring-2 focus:ring-yellow-400/50 focus:border-yellow-400 outline-none p-2.5\"\r\n                          value={form.education?.remark || \"Year 2\"}\r\n                          onChange={(e) => updateEducation('remark', e.target.value)}\r\n                        >\r\n                          <option value=\"Foundation (Year 1)\">Foundation (Year 1)</option>\r\n                          <option value=\"Year 2\">Year 2</option>\r\n                          <option value=\"Year 3\">Year 3</option>\r\n                        </select>\r\n                        {/* Default Sem logic can go here if needed, keeping it simple for now */}\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                      <label className=\"block text-sm font-bold text-black mb-2\">Degree / Specialism</label>\r\n                      <DegreeSelector\r\n                        value={form.education?.field_of_study || ''}\r\n                        onChange={(val) => updateEducation('field_of_study', val)}\r\n                      />\r\n                    </div>\r\n\r\n                    <div>\r\n                      <label className=\"block text-sm font-bold text-black mb-3\">I am looking for...</label>\r\n                      <div className=\"space-y-2\">\r\n                        {['Find Expert / Speaker', 'Find Sponsorship', 'Join Events', 'Other'].map(intent => (\r\n                          <div key={intent}>\r\n                            <label className=\"flex items-center space-x-3 p-3 rounded-xl border border-zinc-100 hover:bg-zinc-50 cursor-pointer\">\r\n                              <input\r\n                                type=\"checkbox\"\r\n                                className=\"w-5 h-5 text-yellow-500 rounded focus:ring-yellow-500 border-gray-300\"\r\n                                checked={!!form.intents?.includes(intent)}\r\n                                onChange={() => toggleIntent(intent)}\r\n                              />\r\n                              <span className=\"text-sm font-medium text-black\">{intent}</span>\r\n                            </label>\r\n                            {intent === 'Other' && form.intents?.includes('Other') && (\r\n                              <input\r\n                                type=\"text\"\r\n                                placeholder=\"Please specify...\"\r\n                                value={otherIntent}\r\n                                onChange={(e) => setOtherIntent(e.target.value)}\r\n                                className=\"mt-2 block w-full px-4 py-2 rounded-xl border-zinc-200 bg-white text-black text-sm outline-none border focus:border-yellow-400\"\r\n                              />\r\n                            )}\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  </>\r\n                )}\r\n\r\n                {/* EXPERT FIELDS */}\r\n                {form.role === 'expert' && (\r\n                  <>\r\n                    <div>\r\n                      <label className=\"block text-sm font-bold text-black mb-2\">Area of Expertise</label>\r\n                      <p className=\"text-xs text-zinc-600 mb-2\">Select tags that describe your skills.</p>\r\n                      <TagSelector\r\n                        selectedIds={form.tag_ids || []}\r\n                        onChange={(ids) => updateField('tag_ids', ids)}\r\n                      />\r\n                    </div>\r\n\r\n                    <div className=\"space-y-4\">\r\n                      <div>\r\n                        <div className=\"flex justify-between items-center mb-2 h-6\">\r\n                          <label className=\"block text-sm font-bold text-black\">Current Location</label>\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <span className=\"text-xs text-zinc-500 font-medium whitespace-nowrap\">I'm from here</span>\r\n                            <Switch\r\n                              checked={!!form.same_as_origin}\r\n                              onChange={(checked) => {\r\n                                updateField('same_as_origin', checked);\r\n                                if (checked) updateField('origin_country', form.country || '');\r\n                              }}\r\n                              className={`${form.same_as_origin ? 'bg-yellow-500' : 'bg-zinc-200'\r\n                                } relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2`}\r\n                            >\r\n                              <span\r\n                                className={`${form.same_as_origin ? 'translate-x-6' : 'translate-x-1'\r\n                                  } inline-block h-4 w-4 transform rounded-full bg-white transition-transform`}\r\n                              />\r\n                            </Switch>\r\n                          </div>\r\n                        </div>\r\n                        <CountryCombobox\r\n                          value={form.country || ''}\r\n                          onChange={(val) => {\r\n                            updateField('country', val);\r\n                            if (form.same_as_origin) updateField('origin_country', val);\r\n                          }}\r\n                          placeholder=\"Select Current Location...\"\r\n                        />\r\n                      </div>\r\n\r\n                      {!form.same_as_origin && (\r\n                        <div>\r\n                          <div className=\"flex justify-between items-center mb-2 h-6\">\r\n                            <label className=\"block text-sm font-bold text-black\">Origin Country</label>\r\n                          </div>\r\n                          <CountryCombobox\r\n                            value={form.origin_country || ''}\r\n                            onChange={(val) => updateField('origin_country', val)}\r\n                            placeholder=\"Select Origin...\"\r\n                          />\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n\r\n\r\n                    <div>\r\n                      <label className=\"block text-sm font-bold text-black mb-2\">Preferred Speaking Time</label>\r\n                      <div className=\"block w-full px-4 py-3 rounded-xl border border-zinc-200 bg-zinc-50\">\r\n                        <div className=\"flex flex-wrap gap-2\">\r\n                          {['Prefer Weekend', 'Weekdays after 6pm', 'Flexible', 'TBD (To be Discussed)'].map(opt => {\r\n                            const isSelected = form.availability?.includes(opt);\r\n                            return (\r\n                              <span\r\n                                key={opt}\r\n                                onClick={() => {\r\n                                  let current = form.availability || '';\r\n                                  if (isSelected) {\r\n                                    // Remove\r\n                                    current = current.replace(opt, '').replace(', ,', ',').replace(/^, /, '').replace(/, $/, '');\r\n                                  } else {\r\n                                    // Add\r\n                                    current = current ? current + ', ' + opt : opt;\r\n                                  }\r\n                                  updateField('availability', current);\r\n                                }}\r\n                                className={`flex items-center gap-1 px-3 py-1 rounded-full text-xs cursor-pointer border transition-colors select-none ${isSelected\r\n                                  ? 'bg-yellow-100 border-yellow-400 text-yellow-800'\r\n                                  : 'bg-white border-zinc-200 text-zinc-600 hover:border-yellow-400 hover:text-yellow-600'\r\n                                  }`}\r\n                              >\r\n                                {isSelected ? <CheckIcon className=\"w-3 h-3\" /> : <span className=\"text-lg leading-none\">+</span>}\r\n                                {opt}\r\n                              </span>\r\n                            );\r\n                          })}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div>\r\n                      <label className=\"block text-sm font-bold text-black mb-3\">I am open to...</label>\r\n                      <div className=\"grid grid-cols-2 gap-4\">\r\n                        {['Open to Speaking', 'Judging Hackathons', 'Hiring Talents', 'Other'].map(intent => {\r\n                          const isOther = intent === 'Other';\r\n                          const isSelected = form.intents?.includes(intent);\r\n\r\n                          return (\r\n                            <div key={intent} className=\"h-full\">\r\n                              <label className={`flex items-center space-x-3 p-3 rounded-xl border transition-colors cursor-pointer h-full ${isSelected ? 'bg-yellow-50 border-yellow-400' : 'border-zinc-100 hover:bg-zinc-50'\r\n                                }`}>\r\n                                <input\r\n                                  type=\"checkbox\"\r\n                                  className=\"w-5 h-5 text-yellow-500 rounded focus:ring-yellow-500 border-gray-300 flex-shrink-0\"\r\n                                  checked={!!isSelected}\r\n                                  onChange={() => toggleIntent(intent)}\r\n                                />\r\n                                {isOther && isSelected ? (\r\n                                  <input\r\n                                    type=\"text\"\r\n                                    autoFocus\r\n                                    placeholder=\"Please specify...\"\r\n                                    value={otherIntent}\r\n                                    onChange={(e) => setOtherIntent(e.target.value)}\r\n                                    onClick={(e) => e.stopPropagation()}\r\n                                    className=\"block w-full bg-transparent border-none p-0 text-sm text-black placeholder-zinc-400 focus:ring-0 outline-none\"\r\n                                  />\r\n                                ) : (\r\n                                  <span className=\"text-sm font-medium text-black\">{intent}</span>\r\n                                )}\r\n                              </label>\r\n                            </div>\r\n                          );\r\n                        })}\r\n                      </div>\r\n                    </div>\r\n                  </>\r\n                )\r\n                }\r\n\r\n                {/* SPONSOR FIELDS */}\r\n                {\r\n                  form.role === 'sponsor' && (\r\n                    <>\r\n                      <div>\r\n                        <div className=\"flex justify-between items-baseline mb-2\">\r\n                          <label className=\"block text-sm font-bold text-black\">Company Name</label>\r\n                          <span className=\"text-xs text-zinc-500\">(Can be edited later)</span>\r\n                        </div>\r\n                        <input\r\n                          type=\"text\"\r\n                          placeholder=\"e.g. Coca-Cola\"\r\n                          value={form.specialist || ''}\r\n                          onChange={(e) => updateField('specialist', e.target.value)}\r\n                          className=\"block w-full px-4 py-3 rounded-xl border-zinc-200 bg-zinc-50 text-black focus:bg-white focus:ring-2 focus:ring-yellow-400/50 outline-none\"\r\n                        />\r\n                      </div>\r\n\r\n                      <div>\r\n                        <label className=\"block text-sm font-bold text-black mb-3\">Our goals...</label>\r\n                        <div className=\"space-y-2\">\r\n                          {['Sponsor Event', 'Provide Drinks / Food', 'Hiring Talents', 'Other'].map(intent => (\r\n                            <div key={intent}>\r\n                              <label className=\"flex items-center space-x-3 p-3 rounded-xl border border-zinc-100 hover:bg-zinc-50 cursor-pointer\">\r\n                                <input\r\n                                  type=\"checkbox\"\r\n                                  className=\"w-5 h-5 text-yellow-500 rounded focus:ring-yellow-500 border-gray-300\"\r\n                                  checked={!!form.intents?.includes(intent)}\r\n                                  onChange={() => toggleIntent(intent)}\r\n                                />\r\n                                <span className=\"text-sm font-medium text-black\">{intent}</span>\r\n                              </label>\r\n                              {intent === 'Other' && form.intents?.includes('Other') && (\r\n                                <input\r\n                                  type=\"text\"\r\n                                  placeholder=\"Please specify...\"\r\n                                  value={otherIntent}\r\n                                  onChange={(e) => setOtherIntent(e.target.value)}\r\n                                  className=\"mt-2 block w-full px-4 py-2 rounded-xl border-zinc-200 bg-white text-black text-sm outline-none border focus:border-yellow-400\"\r\n                                />\r\n                              )}\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      </div>\r\n                    </>\r\n                  )\r\n                }\r\n\r\n              </div >\r\n            )}\r\n\r\n            <div className=\"pt-6 flex items-center justify-between gap-4\">\r\n              {step === 2 && (\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setStep(1)}\r\n                  className=\"px-6 py-3 rounded-xl text-zinc-500 font-bold hover:bg-zinc-50 transition-colors\"\r\n                >\r\n                  Back\r\n                </button>\r\n              )}\r\n              <button\r\n                type=\"submit\"\r\n                disabled={loading}\r\n                className={`flex-1 py-3.5 rounded-xl font-bold text-zinc-900 shadow-lg shadow-yellow-200 transition-all transform active:scale-[0.98] ${loading ? 'bg-zinc-100 text-zinc-400' : 'bg-yellow-400 hover:bg-yellow-300 hover:shadow-yellow-300 hover:-translate-y-0.5'\r\n                  }`}\r\n              >\r\n                {loading ? 'Saving...' : step === 1 ? 'Continue' : 'Complete Setup'}\r\n              </button>\r\n            </div>\r\n\r\n          </form >\r\n        </div >\r\n\r\n        {step === 2 && (\r\n          <p className=\"text-center text-xs text-zinc-400 mt-6\">\r\n            You can edit these details later in your profile.\r\n          </p>\r\n        )}\r\n      </div >\r\n    </div >\r\n  )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(app)\\profile\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'EducationResponse' is defined but never used.","line":11,"column":22,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":39},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":20,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[966,969],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[966,969],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":21,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1025,1028],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1025,1028],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":223,"column":25,"nodeType":"JSXOpeningElement","endLine":227,"endColumn":27},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":256,"column":33,"nodeType":"JSXOpeningElement","endLine":260,"endColumn":35},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":326,"column":57,"nodeType":"JSXOpeningElement","endLine":326,"endColumn":131},{"ruleId":"jsx-a11y/alt-text","severity":1,"message":"img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","line":326,"column":57,"nodeType":"JSXOpeningElement","endLine":326,"endColumn":131},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":340,"column":61,"nodeType":"JSXOpeningElement","endLine":340,"endColumn":135},{"ruleId":"jsx-a11y/alt-text","severity":1,"message":"img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","line":340,"column":61,"nodeType":"JSXOpeningElement","endLine":340,"endColumn":135},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":627,"column":69,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":627,"endColumn":72,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[39712,39715],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[39712,39715],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport React, { useEffect, useState, useRef } from 'react'\r\nimport {\r\n    getMyProfile, updateProfile, updateAvatar, updateCoverPicture, getMe, getMyEvents,\r\n    getTags, attachMyTag, detachMyTag, addMyEducation, deleteMyEducation, getMyFollows, getMyFollowers, unfollowUser,\r\n    addMyJobExperience, deleteMyJobExperience\r\n} from '@/services/api'\r\nimport {\r\n    ProfileResponse, ProfileUpdate, UserMeResponse, MyEventItem,\r\n    EducationCreate, EducationResponse, JobExperienceCreate\r\n} from '@/services/api.types'\r\nimport { toast } from 'react-hot-toast'\r\n\r\nexport default function ProfilePage() {\r\n    const [profile, setProfile] = useState<ProfileResponse | null>(null)\r\n    const [userInfo, setUserInfo] = useState<UserMeResponse | null>(null)\r\n    const [events, setEvents] = useState<MyEventItem[]>([])\r\n    const [availableTags, setAvailableTags] = useState<{ id: string, name: string }[]>([])\r\n    const [followers, setFollowers] = useState<any[]>([])\r\n    const [following, setFollowing] = useState<any[]>([])\r\n    const [newEducation, setNewEducation] = useState<EducationCreate>({ qualification: '', field_of_study: '' })\r\n    const [newJob, setNewJob] = useState<JobExperienceCreate>({ title: '', description: '' })\r\n    const [viewFriends, setViewFriends] = useState<'none' | 'followers' | 'following'>('none')\r\n\r\n    const [loading, setLoading] = useState(true)\r\n    const [editing, setEditing] = useState(false)\r\n    const [saving, setSaving] = useState(false)\r\n    const [addingEdu, setAddingEdu] = useState(false)\r\n    const [addingJob, setAddingJob] = useState(false)\r\n    const [formData, setFormData] = useState<ProfileUpdate>({})\r\n\r\n    const avatarInputRef = useRef<HTMLInputElement>(null)\r\n    const coverInputRef = useRef<HTMLInputElement>(null)\r\n\r\n    useEffect(() => {\r\n        loadProfile()\r\n    }, [])\r\n\r\n    const loadProfile = async () => {\r\n        try {\r\n            const [profileData, userData, eventsData, tagsData, followersData, followingData] = await Promise.all([\r\n                getMyProfile(),\r\n                getMe(),\r\n                getMyEvents(),\r\n                getTags(),\r\n                getMyFollowers(),\r\n                getMyFollows()\r\n            ])\r\n\r\n            setProfile(profileData)\r\n            setUserInfo(userData)\r\n            setEvents(eventsData)\r\n            setAvailableTags(tagsData)\r\n            setFollowers(followersData)\r\n            setFollowing(followingData)\r\n\r\n            setFormData({\r\n                full_name: profileData.full_name,\r\n                bio: profileData.bio,\r\n                linkedin_url: profileData.linkedin_url,\r\n                github_url: profileData.github_url,\r\n                instagram_url: profileData.instagram_url,\r\n                twitter_url: profileData.twitter_url,\r\n                website_url: profileData.website_url,\r\n                visibility: profileData.visibility,\r\n                title: profileData.title,\r\n                availability: profileData.availability,\r\n            })\r\n        } catch (error) {\r\n            console.error('Failed to load profile', error)\r\n            toast.error('Failed to load profile')\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    const handleTagToggle = async (tagId: string) => {\r\n        const hasTag = profile?.tags?.some(t => t.id === tagId)\r\n        try {\r\n            if (hasTag) {\r\n                await detachMyTag(tagId)\r\n                setProfile(prev => prev ? { ...prev, tags: prev.tags?.filter(t => t.id !== tagId) } : null)\r\n                toast.success('Tag removed')\r\n            } else {\r\n                await attachMyTag(tagId)\r\n                const tag = availableTags.find(t => t.id === tagId)\r\n                if (tag) {\r\n                    setProfile(prev => prev ? { ...prev, tags: [...(prev.tags || []), tag] } : null)\r\n                    toast.success('Tag added')\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.error(error)\r\n            toast.error('Failed to update tags')\r\n        }\r\n    }\r\n\r\n    const handleAddEducation = async (e: React.FormEvent) => {\r\n        e.preventDefault()\r\n        setAddingEdu(true)\r\n        try {\r\n            const edu = await addMyEducation(newEducation)\r\n            setProfile(prev => prev ? { ...prev, educations: [...(prev.educations || []), edu] } : null)\r\n            setNewEducation({ qualification: '', field_of_study: '' })\r\n            toast.success('Education added')\r\n        } catch (error) {\r\n            console.error(error)\r\n            toast.error('Failed to add education')\r\n        } finally {\r\n            setAddingEdu(false)\r\n        }\r\n    }\r\n\r\n    const handleDeleteEducation = async (id: string) => {\r\n        if (!confirm('Delete this education?')) return\r\n        try {\r\n            await deleteMyEducation(id)\r\n            setProfile(prev => prev ? { ...prev, educations: prev.educations?.filter(e => e.id !== id) } : null)\r\n            toast.success('Education deleted')\r\n        } catch (error) {\r\n            console.error(error)\r\n            toast.error('Failed to delete education')\r\n        }\r\n    }\r\n\r\n    const handleAddJob = async (e: React.FormEvent) => {\r\n        e.preventDefault()\r\n        setAddingJob(true)\r\n        try {\r\n            const job = await addMyJobExperience(newJob)\r\n            setProfile(prev => prev ? { ...prev, job_experiences: [...(prev.job_experiences || []), job] } : null)\r\n            setNewJob({ title: '', description: '' })\r\n            toast.success('Experience added')\r\n        } catch (error) {\r\n            console.error(error)\r\n            toast.error('Failed to add experience')\r\n        } finally {\r\n            setAddingJob(false)\r\n        }\r\n    }\r\n\r\n    const handleDeleteJob = async (id: string) => {\r\n        if (!confirm('Delete this experience?')) return\r\n        try {\r\n            await deleteMyJobExperience(id)\r\n            setProfile(prev => prev ? { ...prev, job_experiences: prev.job_experiences?.filter(j => j.id !== id) } : null)\r\n            toast.success('Experience deleted')\r\n        } catch (error) {\r\n            console.error(error)\r\n            toast.error('Failed to delete experience')\r\n        }\r\n    }\r\n\r\n    const handleUnfollow = async (userId: string) => {\r\n        if (!confirm('Unfollow this user?')) return\r\n        try {\r\n            await unfollowUser(userId)\r\n            setFollowing(prev => prev.filter(f => f.followee_id !== userId))\r\n            toast.success('Unfollowed')\r\n        } catch (error) {\r\n            console.error(error)\r\n            toast.error('Failed to unfollow')\r\n        }\r\n    }\r\n\r\n    const handleSave = async (e: React.FormEvent) => {\r\n        e.preventDefault()\r\n        setSaving(true)\r\n        try {\r\n            const updated = await updateProfile(formData)\r\n            setProfile(updated)\r\n            setEditing(false)\r\n            toast.success('Profile updated!')\r\n        } catch (error) {\r\n            console.error('Failed to update profile', error)\r\n            toast.error('Failed to update profile')\r\n        } finally {\r\n            setSaving(false)\r\n        }\r\n    }\r\n\r\n    const handleFileChange = async (e: React.ChangeEvent<HTMLInputElement>, type: 'avatar' | 'cover') => {\r\n        const file = e.target.files?.[0]\r\n        if (!file) return\r\n\r\n        const loadingToast = toast.loading(`Updating ${type}...`)\r\n\r\n        try {\r\n            if (type === 'avatar') {\r\n                const updated = await updateAvatar(file)\r\n                setProfile(updated)\r\n            } else {\r\n                const updated = await updateCoverPicture(file)\r\n                setProfile(updated)\r\n            }\r\n            toast.success(`${type === 'avatar' ? 'Avatar' : 'Cover'} updated!`, { id: loadingToast })\r\n        } catch (error) {\r\n            console.error(`Failed to update ${type}`, error)\r\n            toast.error(`Failed to update ${type}`, { id: loadingToast })\r\n        }\r\n    }\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"min-h-screen flex items-center justify-center bg-amber-50\">\r\n                <div className=\"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-yellow-400\"></div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    if (!profile) {\r\n        return <div className=\"p-8 text-center text-zinc-900\">Profile not found.</div>\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-amber-50 pb-20\">\r\n            <div className=\"max-w-4xl mx-auto pt-6 px-4 sm:px-6 lg:px-8\">\r\n\r\n                {/* Cover Image */}\r\n                <div className=\"relative h-64 sm:h-80 rounded-[2.5rem] overflow-hidden shadow-sm group\">\r\n                    {profile.cover_url ? (\r\n                        <img\r\n                            src={profile.cover_url}\r\n                            alt=\"Cover\"\r\n                            className=\"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105\"\r\n                        />\r\n                    ) : (\r\n                        <div className=\"w-full h-full bg-yellow-400 flex items-center justify-center\">\r\n                            <div className=\"text-zinc-900/10 text-9xl font-black select-none\">ATAS</div>\r\n                        </div>\r\n                    )}\r\n\r\n                    <div className=\"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-all duration-300 flex items-center justify-center\">\r\n                        <button\r\n                            onClick={() => coverInputRef.current?.click()}\r\n                            className=\"opacity-0 group-hover:opacity-100 bg-white text-zinc-900 px-6 py-3 rounded-full font-bold shadow-lg transform translate-y-4 group-hover:translate-y-0 transition-all duration-300 hover:scale-105\"\r\n                        >\r\n                            Change Cover\r\n                        </button>\r\n                        <input\r\n                            ref={coverInputRef}\r\n                            type=\"file\"\r\n                            className=\"hidden\"\r\n                            accept=\"image/*\"\r\n                            onChange={(e) => handleFileChange(e, 'cover')}\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"relative px-6 -mt-20 flex flex-col items-start px-8 max-w-7xl mx-auto\">\r\n                    {/* Avatar */}\r\n                    <div className=\"relative group mb-6\">\r\n                        <div className=\"h-40 w-40 rounded-[2.5rem] ring-8 ring-amber-50 bg-white overflow-hidden shadow-2xl\">\r\n                            {profile.avatar_url ? (\r\n                                <img\r\n                                    src={profile.avatar_url}\r\n                                    alt={profile.full_name}\r\n                                    className=\"w-full h-full object-cover\"\r\n                                />\r\n                            ) : (\r\n                                <div className=\"w-full h-full bg-zinc-900 flex items-center justify-center text-5xl text-yellow-400 font-bold\">\r\n                                    {profile.full_name.charAt(0)}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                        <button\r\n                            onClick={() => avatarInputRef.current?.click()}\r\n                            className=\"absolute bottom-2 right-2 bg-white text-zinc-900 p-2.5 rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-all duration-200 hover:scale-110\"\r\n                            title=\"Change Avatar\"\r\n                        >\r\n                            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z\" />\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15 13a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n                            </svg>\r\n                        </button>\r\n                        <input\r\n                            ref={avatarInputRef}\r\n                            type=\"file\"\r\n                            className=\"hidden\"\r\n                            accept=\"image/*\"\r\n                            onChange={(e) => handleFileChange(e, 'avatar')}\r\n                        />\r\n                    </div>\r\n\r\n                    {/* View Mode Info */}\r\n                    {!editing && (\r\n                        <div className=\"flex flex-col items-start text-left pb-8 w-full\">\r\n                            <h1 className=\"text-4xl sm:text-5xl font-black text-zinc-900 tracking-tight mb-2\">{profile.full_name}</h1>\r\n                            {userInfo && (\r\n                                <div className=\"text-sm font-bold text-zinc-400 mb-4 font-mono\">\r\n                                    {userInfo.email}\r\n                                </div>\r\n                            )}\r\n\r\n                            {/* Followers/Following */}\r\n                            <div className=\"flex gap-6 mb-6 text-sm font-bold select-none\">\r\n                                <span\r\n                                    onClick={() => setViewFriends(viewFriends === 'followers' ? 'none' : 'followers')}\r\n                                    className={`cursor-pointer hover:underline transition-colors ${viewFriends === 'followers' ? 'text-zinc-900 decoration-yellow-400 decoration-4 underline-offset-4' : 'text-zinc-900'}`}\r\n                                >\r\n                                    {followers.length} <span className=\"text-zinc-500 font-medium\">Followers</span>\r\n                                </span>\r\n                                <span\r\n                                    onClick={() => setViewFriends(viewFriends === 'following' ? 'none' : 'following')}\r\n                                    className={`cursor-pointer hover:underline transition-colors ${viewFriends === 'following' ? 'text-zinc-900 decoration-yellow-400 decoration-4 underline-offset-4' : 'text-zinc-900'}`}\r\n                                >\r\n                                    {following.length} <span className=\"text-zinc-500 font-medium\">Following</span>\r\n                                </span>\r\n                            </div>\r\n\r\n                            {/* Friends List Panel */}\r\n                            {viewFriends !== 'none' && (\r\n                                <div className=\"mb-8 p-6 bg-white rounded-[2rem] shadow-sm border border-gray-100 animate-fadeIn\">\r\n                                    <div className=\"flex justify-between items-center mb-4 border-b border-gray-100 pb-2\">\r\n                                        <h3 className=\"font-bold text-lg capitalize text-zinc-900\">{viewFriends}</h3>\r\n                                        <button onClick={() => setViewFriends('none')} className=\"text-zinc-400 hover:text-zinc-600 p-1 hover:bg-gray-100 rounded-full transition-colors\">\r\n                                            <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\" /></svg>\r\n                                        </button>\r\n                                    </div>\r\n                                    <div className=\"space-y-4 max-h-60 overflow-y-auto pr-2 custom-scrollbar\">\r\n                                        {viewFriends === 'followers' ? followers.map(f => (\r\n                                            <div key={f.id} className=\"flex items-center gap-3 p-2 hover:bg-gray-50 rounded-xl transition-colors\">\r\n                                                <div className=\"w-10 h-10 rounded-full bg-gray-200 overflow-hidden flex-shrink-0 border border-gray-100\">\r\n                                                    {f.follower?.avatar_url ? (\r\n                                                        <img src={f.follower.avatar_url} className=\"w-full h-full object-cover\" />\r\n                                                    ) : (\r\n                                                        <div className=\"w-full h-full flex items-center justify-center text-xs font-bold text-gray-400 bg-gray-100\">{f.follower?.full_name?.charAt(0) || '?'}</div>\r\n                                                    )}\r\n                                                </div>\r\n                                                <div className=\"flex-1 min-w-0\">\r\n                                                    <div className=\"font-bold text-sm text-zinc-900 truncate\">{f.follower?.full_name || 'Unknown User'}</div>\r\n                                                </div>\r\n                                            </div>\r\n                                        )) : following.map(f => (\r\n                                            <div key={f.id} className=\"flex items-center justify-between p-2 hover:bg-gray-50 rounded-xl transition-colors\">\r\n                                                <div className=\"flex items-center gap-3 flex-1 min-w-0\">\r\n                                                    <div className=\"w-10 h-10 rounded-full bg-gray-200 overflow-hidden flex-shrink-0 border border-gray-100\">\r\n                                                        {f.followee?.avatar_url ? (\r\n                                                            <img src={f.followee.avatar_url} className=\"w-full h-full object-cover\" />\r\n                                                        ) : (\r\n                                                            <div className=\"w-full h-full flex items-center justify-center text-xs font-bold text-gray-400 bg-gray-100\">{f.followee?.full_name?.charAt(0) || '?'}</div>\r\n                                                        )}\r\n                                                    </div>\r\n                                                    <div className=\"font-bold text-sm text-zinc-900 truncate\">{f.followee?.full_name || 'Unknown User'}</div>\r\n                                                </div>\r\n                                                <button\r\n                                                    onClick={() => handleUnfollow(f.followee_id)}\r\n                                                    className=\"ml-3 text-xs font-bold bg-white border border-gray-200 hover:bg-red-50 hover:text-red-600 hover:border-red-200 px-3 py-1.5 rounded-full text-zinc-600 transition-all shadow-sm\"\r\n                                                >\r\n                                                    Unfollow\r\n                                                </button>\r\n                                            </div>\r\n                                        ))}\r\n                                        {((viewFriends === 'followers' && followers.length === 0) || (viewFriends === 'following' && following.length === 0)) && (\r\n                                            <p className=\"text-zinc-400 text-sm italic text-center py-4\">No one to show here yet.</p>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n\r\n                            <p className=\"text-lg text-zinc-600 font-medium leading-relaxed max-w-3xl mb-6\">\r\n                                {profile.bio || 'No bio yet. Click Edit Profile to add one!'}\r\n                            </p>\r\n\r\n                            <div className=\"flex flex-wrap gap-3 mb-8\">\r\n                                {profile.title && (\r\n                                    <div className=\"px-4 py-2 bg-zinc-900 text-yellow-400 rounded-xl text-sm font-bold shadow-sm inline-flex items-center gap-2\">\r\n                                        <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\r\n                                        </svg>\r\n                                        {profile.title}\r\n                                    </div>\r\n                                )}\r\n                                {profile.educations?.map((edu, i) => (\r\n                                    <div key={i} className=\"px-4 py-2 bg-white text-zinc-700 border border-zinc-200 rounded-xl text-sm font-bold inline-flex items-center gap-2 shadow-sm\">\r\n                                        <svg className=\"w-4 h-4 text-zinc-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                            <path d=\"M12 14l9-5-9-5-9 5 9 5z\" />\r\n                                            <path d=\"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z\" />\r\n                                        </svg>\r\n                                        <span>\r\n                                            {edu.qualification} in {edu.field_of_study}\r\n                                        </span>\r\n                                    </div>\r\n                                ))}\r\n                                {profile.job_experiences?.map((job, i) => (\r\n                                    <div key={i} className=\"px-4 py-2 bg-white text-zinc-700 border border-zinc-200 rounded-xl text-sm font-bold inline-flex items-center gap-2 shadow-sm\">\r\n                                        <svg className=\"w-4 h-4 text-zinc-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\r\n                                        </svg>\r\n                                        <span>\r\n                                            {job.title}\r\n                                            {job.description && <span className=\"text-zinc-400 font-normal ml-1\">- {job.description}</span>}\r\n                                        </span>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n\r\n                            {profile.tags && profile.tags.length > 0 && (\r\n                                <div className=\"flex flex-wrap gap-2 mb-8\">\r\n                                    {profile.tags.map(tag => (\r\n                                        <span key={tag.id} className=\"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-bold uppercase tracking-wider\">\r\n                                            #{tag.name}\r\n                                        </span>\r\n                                    ))}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )\r\n                    }\r\n\r\n                    {/* Actions */}\r\n                    <div className=\"pb-8 w-full\">\r\n                        {!editing ? (\r\n                            <div className=\"flex gap-4\">\r\n                                <button\r\n                                    onClick={() => setEditing(true)}\r\n                                    className=\"px-8 py-3 bg-zinc-900 text-yellow-400 rounded-full shadow-lg font-bold hover:bg-zinc-800 hover:scale-105 transition-all duration-200\"\r\n                                >\r\n                                    Edit Profile\r\n                                </button>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"flex gap-3\">\r\n                                <button\r\n                                    onClick={() => setEditing(false)}\r\n                                    className=\"px-6 py-3 bg-white text-zinc-900 rounded-full font-bold shadow-sm hover:bg-gray-50 transition-all duration-200\"\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                                <button\r\n                                    onClick={handleSave}\r\n                                    disabled={saving}\r\n                                    className=\"px-8 py-3 bg-yellow-400 text-zinc-900 rounded-full shadow-lg font-bold hover:bg-yellow-300 hover:scale-105 transition-all duration-200 disabled:opacity-70\"\r\n                                >\r\n                                    {saving ? 'Saving...' : 'Save Changes'}\r\n                                </button>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Edit Form */}\r\n                    {editing && (\r\n                        <div className=\"mt-8 animate-fadeIn max-w-3xl mx-auto space-y-8\">\r\n                            {/* Basic Info */}\r\n                            <form onSubmit={handleSave} className=\"space-y-8\">\r\n                                <div className=\"bg-white p-8 rounded-[2.5rem] shadow-sm border border-gray-100\">\r\n                                    <h3 className=\"text-2xl font-black text-zinc-900 mb-6\">Basic Info</h3>\r\n                                    <div className=\"space-y-6\">\r\n                                        <div>\r\n                                            <label className=\"block text-sm font-bold text-zinc-900 mb-2 ml-1\">Full Name</label>\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                value={formData.full_name || ''}\r\n                                                onChange={(e) => setFormData({ ...formData, full_name: e.target.value })}\r\n                                                className=\"block w-full rounded-2xl bg-gray-50 border-transparent focus:border-yellow-400 focus:bg-white focus:ring-0 text-zinc-900 font-medium py-4 px-5 transition-all duration-200\"\r\n                                                placeholder=\"Your Name\"\r\n                                            />\r\n                                        </div>\r\n                                        <div>\r\n                                            <label className=\"block text-sm font-bold text-zinc-900 mb-2 ml-1\">Professional Title</label>\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                value={formData.title || ''}\r\n                                                onChange={(e) => setFormData({ ...formData, title: e.target.value })}\r\n                                                className=\"block w-full rounded-2xl bg-gray-50 border-transparent focus:border-yellow-400 focus:bg-white focus:ring-0 text-zinc-900 font-medium py-4 px-5 transition-all duration-200\"\r\n                                                placeholder=\"e.g. Graphic Designer\"\r\n                                            />\r\n                                        </div>\r\n                                        <div>\r\n                                            <label className=\"block text-sm font-bold text-zinc-900 mb-2 ml-1\">Bio</label>\r\n                                            <textarea\r\n                                                rows={4}\r\n                                                value={formData.bio || ''}\r\n                                                onChange={(e) => setFormData({ ...formData, bio: e.target.value })}\r\n                                                className=\"block w-full rounded-2xl bg-gray-50 border-transparent focus:border-yellow-400 focus:bg-white focus:ring-0 text-zinc-900 font-medium py-4 px-5 transition-all duration-200\"\r\n                                                placeholder=\"Tell us about yourself\"\r\n                                            />\r\n                                        </div>\r\n                                        <div>\r\n                                            <label className=\"block text-sm font-bold text-zinc-900 mb-2 ml-1\">Availability</label>\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                value={formData.availability || ''}\r\n                                                onChange={(e) => setFormData({ ...formData, availability: e.target.value })}\r\n                                                className=\"block w-full rounded-2xl bg-gray-50 border-transparent focus:border-yellow-400 focus:bg-white focus:ring-0 text-zinc-900 font-medium py-4 px-5 transition-all duration-200\"\r\n                                                placeholder=\"e.g. Weekends only\"\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </form>\r\n\r\n                            {/* Education Management */}\r\n                            <div className=\"bg-white p-8 rounded-[2.5rem] shadow-sm border border-gray-100\">\r\n                                <h3 className=\"text-2xl font-black text-zinc-900 mb-6\">Education</h3>\r\n                                {profile.educations && profile.educations.length > 0 && (\r\n                                    <div className=\"space-y-4 mb-8\">\r\n                                        {profile.educations.map(edu => (\r\n                                            <div key={edu.id} className=\"flex items-center justify-between p-4 bg-gray-50 rounded-2xl\">\r\n                                                <div>\r\n                                                    <div className=\"font-bold text-zinc-900\">{edu.qualification}</div>\r\n                                                    <div className=\"text-sm text-zinc-500\">{edu.field_of_study}</div>\r\n                                                </div>\r\n                                                <button onClick={() => handleDeleteEducation(edu.id)} className=\"text-red-500 hover:text-red-700 font-bold text-sm\">Delete</button>\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                )}\r\n                                <div className=\"p-6 bg-amber-50 rounded-2xl\">\r\n                                    <h4 className=\"font-bold text-zinc-900 mb-4\">Add Education</h4>\r\n                                    <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4\">\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            placeholder=\"Degree / Qualification\"\r\n                                            value={newEducation.qualification}\r\n                                            onChange={e => setNewEducation({ ...newEducation, qualification: e.target.value })}\r\n                                            className=\"rounded-xl border-zinc-200\"\r\n                                        />\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            placeholder=\"Field of Study / School\"\r\n                                            value={newEducation.field_of_study}\r\n                                            onChange={e => setNewEducation({ ...newEducation, field_of_study: e.target.value })}\r\n                                            className=\"rounded-xl border-zinc-200\"\r\n                                        />\r\n                                    </div>\r\n                                    <button\r\n                                        onClick={handleAddEducation}\r\n                                        disabled={addingEdu || !newEducation.qualification || !newEducation.field_of_study}\r\n                                        className=\"bg-zinc-900 text-white px-6 py-2 rounded-xl text-sm font-bold disabled:opacity-50\"\r\n                                    >\r\n                                        {addingEdu ? 'Adding...' : 'Add Education'}\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Job Experience Management */}\r\n                            <div className=\"bg-white p-8 rounded-[2.5rem] shadow-sm border border-gray-100\">\r\n                                <h3 className=\"text-2xl font-black text-zinc-900 mb-6\">Work Experience</h3>\r\n                                {profile.job_experiences && profile.job_experiences.length > 0 && (\r\n                                    <div className=\"space-y-4 mb-8\">\r\n                                        {profile.job_experiences.map(job => (\r\n                                            <div key={job.id} className=\"flex items-center justify-between p-4 bg-gray-50 rounded-2xl\">\r\n                                                <div>\r\n                                                    <div className=\"font-bold text-zinc-900\">{job.title}</div>\r\n                                                    <div className=\"text-sm text-zinc-500\">{job.description}</div>\r\n                                                </div>\r\n                                                <button onClick={() => handleDeleteJob(job.id)} className=\"text-red-500 hover:text-red-700 font-bold text-sm\">Delete</button>\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                )}\r\n                                {addingJob ? (\r\n                                    <div className=\"animate-pulse bg-gray-50 p-4 rounded-2xl flex items-center justify-center text-zinc-400 font-bold\">\r\n                                        Adding...\r\n                                    </div>\r\n                                ) : (\r\n                                    <form onSubmit={handleAddJob} className=\"bg-gray-50 p-6 rounded-2xl space-y-4\">\r\n                                        <div>\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                placeholder=\"Job Title / Role\"\r\n                                                required\r\n                                                className=\"w-full bg-white border-0 rounded-xl px-4 py-3 font-bold text-zinc-900 placeholder:text-zinc-400 focus:ring-2 focus:ring-yellow-400\"\r\n                                                value={newJob.title}\r\n                                                onChange={e => setNewJob({ ...newJob, title: e.target.value })}\r\n                                            />\r\n                                        </div>\r\n                                        <div>\r\n                                            <input\r\n                                                type=\"text\"\r\n                                                placeholder=\"Description (Company, Years, etc.)\"\r\n                                                className=\"w-full bg-white border-0 rounded-xl px-4 py-3 font-medium text-zinc-900 placeholder:text-zinc-400 focus:ring-2 focus:ring-yellow-400\"\r\n                                                value={newJob.description || ''}\r\n                                                onChange={e => setNewJob({ ...newJob, description: e.target.value })}\r\n                                            />\r\n                                        </div>\r\n                                        <button\r\n                                            type=\"submit\"\r\n                                            className=\"w-full py-3 bg-zinc-900 text-yellow-400 rounded-xl font-bold hover:bg-zinc-800 transition-colors\"\r\n                                        >\r\n                                            Add Experience\r\n                                        </button>\r\n                                    </form>\r\n                                )}\r\n                            </div>\r\n\r\n                            {/* Specialist Tags */}\r\n                            <div className=\"bg-white p-8 rounded-[2.5rem] shadow-sm border border-gray-100\">\r\n                                <h3 className=\"text-2xl font-black text-zinc-900 mb-6\">Specialist Tags</h3>\r\n                                <div className=\"flex flex-wrap gap-2\">\r\n                                    {availableTags.length === 0 && <p className=\"text-zinc-500 italic\">No tags available.</p>}\r\n                                    {availableTags.map(tag => {\r\n                                        const isSelected = profile.tags?.some(t => t.id === tag.id)\r\n                                        return (\r\n                                            <button\r\n                                                key={tag.id}\r\n                                                onClick={() => handleTagToggle(tag.id)}\r\n                                                className={`px-4 py-2 rounded-full text-sm font-bold transition-all ${isSelected\r\n                                                    ? 'bg-zinc-900 text-yellow-400 shadow-md ring-2 ring-zinc-900'\r\n                                                    : 'bg-gray-100 text-gray-500 hover:bg-gray-200'\r\n                                                    }`}\r\n                                            >\r\n                                                {tag.name} {isSelected && ''}\r\n                                            </button>\r\n                                        )\r\n                                    })}\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Social Links Form */}\r\n                            <div className=\"bg-white p-8 rounded-[2.5rem] shadow-sm border border-gray-100\">\r\n                                <h3 className=\"text-2xl font-black text-zinc-900 mb-6\">Social Links</h3>\r\n                                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                                    {[\r\n                                        { key: 'website_url', label: 'Website', placeholder: 'https://example.com' },\r\n                                        { key: 'github_url', label: 'GitHub', placeholder: 'https://github.com/username' },\r\n                                        { key: 'linkedin_url', label: 'LinkedIn', placeholder: 'https://linkedin.com/in/username' },\r\n                                        { key: 'twitter_url', label: 'Twitter', placeholder: 'https://twitter.com/username' },\r\n                                        { key: 'instagram_url', label: 'Instagram', placeholder: 'https://instagram.com/username' },\r\n                                    ].map((field) => (\r\n                                        <div key={field.key}>\r\n                                            <label className=\"block text-sm font-bold text-zinc-900 mb-2 ml-1\">{field.label}</label>\r\n                                            <input\r\n                                                type=\"url\"\r\n                                                value={(formData as any)[field.key] || ''}\r\n                                                onChange={(e) => setFormData({ ...formData, [field.key]: e.target.value })}\r\n                                                className=\"block w-full rounded-2xl bg-gray-50 border-transparent focus:border-yellow-400 focus:bg-white focus:ring-0 text-zinc-900 font-medium py-4 px-5 transition-all duration-200\"\r\n                                                placeholder={field.placeholder}\r\n                                            />\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Social Links (View Mode) */}\r\n                    {!editing && (\r\n                        <div className=\"mt-0 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-12\">\r\n                            {[\r\n                                { url: profile.website_url, label: 'Website', icon: 'M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9' },\r\n                                { url: profile.github_url, label: 'GitHub', icon: 'M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z' },\r\n                                { url: profile.linkedin_url, label: 'LinkedIn', icon: 'M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z' },\r\n                                { url: profile.twitter_url, label: 'Twitter', icon: 'M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z' },\r\n                                { url: profile.instagram_url, label: 'Instagram', icon: 'M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z' },\r\n                            ].map((social) => (\r\n                                <a\r\n                                    key={social.label}\r\n                                    href={social.url || '#'}\r\n                                    target={social.url ? \"_blank\" : undefined}\r\n                                    rel=\"noopener noreferrer\"\r\n                                    className={`group flex items-center p-4 rounded-2xl border transition-all duration-200 ${social.url\r\n                                        ? 'bg-white border-gray-100 shadow-sm hover:shadow-md hover:border-yellow-400'\r\n                                        : 'bg-gray-50 border-transparent opacity-60 cursor-default'\r\n                                        }`}\r\n                                    onClick={e => !social.url && e.preventDefault()}\r\n                                >\r\n                                    <div className={`h-12 w-12 rounded-full flex items-center justify-center transition-transform ${social.url ? 'bg-amber-50 text-zinc-900 group-hover:scale-110' : 'bg-gray-100 text-gray-400'}`}>\r\n                                        <svg className=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                            <path d={social.icon} />\r\n                                        </svg>\r\n                                    </div>\r\n                                    <div className=\"ml-4 overflow-hidden\">\r\n                                        <p className={`text-sm font-bold ${social.url ? 'text-zinc-900' : 'text-gray-500'}`}>{social.label}</p>\r\n                                        <p className=\"text-xs text-zinc-500 truncate\">{social.url ? social.url.replace(/^https?:\\/\\//, '') : 'Not connected'}</p>\r\n                                    </div>\r\n                                </a>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Events Section */}\r\n                    {!editing && events.length > 0 && (\r\n                        <div className=\"mb-12\">\r\n                            <h2 className=\"text-2xl font-black text-zinc-900 mb-6 text-center\">Current Events</h2>\r\n                            <div className=\"grid gap-6 sm:grid-cols-2 lg:grid-cols-3\">\r\n                                {events.map((evt) => (\r\n                                    <a key={evt.event_id} href={`/main/events/${evt.event_id}`} className=\"bg-white p-6 rounded-[2rem] shadow-sm border border-gray-100 hover:shadow-md transition-all block group\">\r\n                                        <div className=\"flex justify-between items-start mb-4\">\r\n                                            <span className={`px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide ${evt.status === 'published' ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-600'}`}>\r\n                                                {evt.status}\r\n                                            </span>\r\n                                            <span className=\"text-xs font-bold text-gray-400\">{new Date(evt.start_datetime).toLocaleDateString()}</span>\r\n                                        </div>\r\n                                        <h3 className=\"text-xl font-bold text-zinc-900 mb-2 group-hover:text-yellow-600 transition-colors\">{evt.title}</h3>\r\n                                        <div className=\"text-sm text-gray-500 font-medium\">\r\n                                            {evt.my_role ? (\r\n                                                <span className=\"capitalize\">Role: {evt.my_role}</span>\r\n                                            ) : 'Participant'}\r\n                                        </div>\r\n                                    </a>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(public)\\admin\\login\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":47,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":47,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport React, { useState, useEffect } from 'react'\r\nimport Link from 'next/link'\r\nimport { useRouter } from 'next/navigation'\r\nimport { toast } from 'react-hot-toast'\r\nimport { login, getMe } from '@/services/api'\r\n\r\nconst ADMIN_ROLES = ['admin', 'customer_support', 'content_moderator']\r\n\r\nexport default function AdminLoginPage() {\r\n  const router = useRouter()\r\n  const [email, setEmail] = useState('')\r\n  const [password, setPassword] = useState('')\r\n  const [isLoading, setIsLoading] = useState(false)\r\n\r\n  useEffect(() => {\r\n    const token = typeof window !== 'undefined' ? localStorage.getItem('atas_token') : null\r\n    if (!token) return\r\n    ;(async () => {\r\n      try {\r\n        const me = await getMe()\r\n        const ok = (me.roles || []).some(r => ADMIN_ROLES.includes(r))\r\n        if (ok) {\r\n          router.replace('/admin')\r\n        }\r\n      } catch {}\r\n    })()\r\n  }, [router])\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    if (isLoading) return\r\n    setIsLoading(true)\r\n    try {\r\n      const { access_token } = await login({ email, password })\r\n      localStorage.setItem('atas_token', access_token)\r\n      const me = await getMe()\r\n      const ok = (me.roles || []).some(r => ADMIN_ROLES.includes(r))\r\n      if (!ok) {\r\n        toast.error('This account does not have admin access')\r\n        router.push('/dashboard')\r\n        return\r\n      }\r\n      toast.success('Welcome, admin')\r\n      router.push('/admin')\r\n    } catch (error) {\r\n      toast.error('Invalid credentials.')\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex bg-amber-50\">\r\n      <div className=\"w-full flex items-center justify-center p-8 sm:p-12 bg-white\">\r\n        <div className=\"w-full max-w-md space-y-10\">\r\n          <div className=\"text-center\">\r\n            <h2 className=\"text-4xl font-black text-zinc-900 mb-3\">Admin Login</h2>\r\n            <p className=\"text-gray-500 font-medium\">For ATAS administrators only</p>\r\n          </div>\r\n\r\n          <form className=\"space-y-6\" onSubmit={handleSubmit}>\r\n            <div className=\"space-y-5\">\r\n              <div>\r\n                <label htmlFor=\"email\" className=\"block text-sm font-bold text-zinc-900 mb-2 ml-1\">Email address</label>\r\n                <input\r\n                  id=\"email\"\r\n                  name=\"email\"\r\n                  type=\"email\"\r\n                  required\r\n                  placeholder=\"admin@atas.com\"\r\n                  value={email}\r\n                  onChange={(e) => setEmail(e.target.value)}\r\n                  className=\"block w-full rounded-2xl bg-gray-100 border-transparent focus:border-yellow-400 focus:bg-white focus:ring-0 text-zinc-900 font-medium py-4 px-5 transition-all duration-200 placeholder-gray-400\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <div className=\"flex items-center justify-between mb-2 ml-1\">\r\n                  <label htmlFor=\"password\" className=\"block text-sm font-bold text-zinc-900\">Password</label>\r\n                  <Link href=\"/forgot-password\" className=\"text-xs font-bold text-gray-400 hover:text-zinc-900 transition-colors\">Forgot?</Link>\r\n                </div>\r\n                <input\r\n                  id=\"password\"\r\n                  name=\"password\"\r\n                  type=\"password\"\r\n                  required\r\n                  placeholder=\"\"\r\n                  value={password}\r\n                  onChange={(e) => setPassword(e.target.value)}\r\n                  className=\"block w-full rounded-2xl bg-gray-100 border-transparent focus:border-yellow-400 focus:bg-white focus:ring-0 text-zinc-900 font-medium py-4 px-5 transition-all duration-200 placeholder-gray-400\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <button\r\n              type=\"submit\"\r\n              disabled={isLoading}\r\n              className=\"w-full py-4 rounded-full bg-yellow-400 text-zinc-900 font-black text-lg shadow-[0_4px_0_rgb(0,0,0)] hover:shadow-[0_2px_0_rgb(0,0,0)] hover:translate-y-[2px] active:shadow-none active:translate-y-[4px] transition-all duration-150 disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none disabled:translate-y-0\"\r\n            >\r\n              {isLoading ? 'Logging in...' : 'Login as Admin'}\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(public)\\auth\\register\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":31,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":31,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[976,979],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[976,979],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport React, { useState } from 'react'\r\nimport Link from 'next/link'\r\nimport { register } from '@/services/api'\r\nimport { FormInput } from '@/components/auth/FormInput'\r\nimport { FormButton } from '@/components/auth/FormButton'\r\n\r\nexport default function RegisterPage() {\r\n    const [email, setEmail] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const [confirmPassword, setConfirmPassword] = useState('')\r\n    const [error, setError] = useState('')\r\n    const [success, setSuccess] = useState(false)\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault()\r\n        setError('')\r\n\r\n        if (password !== confirmPassword) {\r\n            setError('Passwords do not match')\r\n            return\r\n        }\r\n\r\n        setLoading(true)\r\n\r\n        try {\r\n            await register({ email, password })\r\n            setSuccess(true)\r\n        } catch (err: any) {\r\n            console.error(err)\r\n            if (err.response?.data?.detail) {\r\n                setError(err.response.data.detail)\r\n            } else {\r\n                setError('Registration failed. Please try again.')\r\n            }\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    if (success) {\r\n        return (\r\n            <div className=\"flex min-h-screen flex-col justify-center bg-gradient-to-br from-indigo-50 via-white to-cyan-50 py-12 sm:px-6 lg:px-8\">\r\n                <div className=\"sm:mx-auto sm:w-full sm:max-w-md\">\r\n                    <div className=\"bg-white py-8 px-4 shadow-xl shadow-indigo-100 sm:rounded-xl sm:px-10 border border-gray-100 text-center\">\r\n                        <div className=\"mx-auto flex h-12 w-12 items-center justify-center rounded-full bg-green-100\">\r\n                            <svg className=\"h-6 w-6 text-green-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M5 13l4 4L19 7\" />\r\n                            </svg>\r\n                        </div>\r\n                        <h3 className=\"mt-3 text-lg font-medium text-gray-900\">Registration Successful!</h3>\r\n                        <p className=\"mt-2 text-sm text-gray-500\">\r\n                            Please check your email to verify your account before logging in.\r\n                        </p>\r\n                        <div className=\"mt-6\">\r\n                            <Link\r\n                                href=\"/login\"\r\n                                className=\"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\r\n                            >\r\n                                Go to Login\r\n                            </Link>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex min-h-screen flex-col justify-center bg-gradient-to-br from-indigo-50 via-white to-cyan-50 py-12 sm:px-6 lg:px-8\">\r\n            <div className=\"sm:mx-auto sm:w-full sm:max-w-md\">\r\n                <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900 tracking-tight\">\r\n                    Join the Community\r\n                </h2>\r\n                <p className=\"mt-2 text-center text-sm text-gray-600\">\r\n                    Already have an account?{' '}\r\n                    <Link\r\n                        href=\"/login\"\r\n                        className=\"font-medium text-indigo-600 hover:text-indigo-500 transition-colors\"\r\n                    >\r\n                        Sign in\r\n                    </Link>\r\n                </p>\r\n            </div>\r\n\r\n            <div className=\"mt-8 sm:mx-auto sm:w-full sm:max-w-md\">\r\n                <div className=\"bg-white py-8 px-4 shadow-xl shadow-indigo-100 sm:rounded-xl sm:px-10 border border-gray-100\">\r\n                    <form className=\"space-y-6\" onSubmit={handleSubmit}>\r\n                        <FormInput\r\n                            id=\"email\"\r\n                            label=\"Email address\"\r\n                            type=\"email\"\r\n                            placeholder=\"you@student.uni.edu\"\r\n                            value={email}\r\n                            onChange={(e) => setEmail(e.target.value)}\r\n                        />\r\n\r\n                        <FormInput\r\n                            id=\"password\"\r\n                            label=\"Password\"\r\n                            type=\"password\"\r\n                            placeholder=\"\"\r\n                            value={password}\r\n                            onChange={(e) => setPassword(e.target.value)}\r\n                        />\r\n\r\n                        <FormInput\r\n                            id=\"confirmPassword\"\r\n                            label=\"Confirm Password\"\r\n                            type=\"password\"\r\n                            placeholder=\"\"\r\n                            value={confirmPassword}\r\n                            onChange={(e) => setConfirmPassword(e.target.value)}\r\n                        />\r\n\r\n                        {error && (\r\n                            <div className=\"rounded-md bg-red-50 p-4\">\r\n                                <div className=\"flex\">\r\n                                    <div className=\"ml-3\">\r\n                                        <h3 className=\"text-sm font-medium text-red-800\">\r\n                                            Error\r\n                                        </h3>\r\n                                        <div className=\"mt-2 text-sm text-red-700\">\r\n                                            <p>{error}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        <div>\r\n                            <FormButton>\r\n                                {loading ? 'Creating account...' : 'Create account'}\r\n                            </FormButton>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(public)\\auth\\verify\\[token]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":21,"column":27,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":21,"endColumn":30,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[723,726],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[723,726],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport React, { useEffect, useState } from 'react'\r\nimport Link from 'next/link'\r\nimport { useParams } from 'next/navigation'\r\nimport { verifyEmail } from '@/services/api'\r\n\r\nexport default function VerifyEmailPage() {\r\n    const params = useParams()\r\n    const token = params.token as string\r\n    const [status, setStatus] = useState<'verifying' | 'success' | 'error'>(token ? 'verifying' : 'error')\r\n    const [message, setMessage] = useState(token ? '' : 'Invalid verification link.')\r\n\r\n    useEffect(() => {\r\n        if (!token) return\r\n\r\n        const verify = async () => {\r\n            try {\r\n                await verifyEmail(token)\r\n                setStatus('success')\r\n            } catch (err: any) {\r\n                console.error(err)\r\n                setStatus('error')\r\n                if (err.response?.data?.detail) {\r\n                    setMessage(err.response.data.detail)\r\n                } else {\r\n                    setMessage('Verification failed. The link may be invalid or expired.')\r\n                }\r\n            }\r\n        }\r\n\r\n        verify()\r\n    }, [token])\r\n\r\n    return (\r\n        <div className=\"flex min-h-screen flex-col justify-center bg-amber-50 py-12 sm:px-6 lg:px-8\">\r\n            <div className=\"sm:mx-auto sm:w-full sm:max-w-md\">\r\n                <div className=\"bg-white py-10 px-6 shadow-sm sm:rounded-[2.5rem] sm:px-12 border border-yellow-100 text-center\">\r\n                    {status === 'verifying' && (\r\n                        <>\r\n                            <div className=\"mx-auto flex h-20 w-20 items-center justify-center rounded-full bg-yellow-100 animate-pulse mb-6\">\r\n                                <svg className=\"h-10 w-10 text-yellow-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                                </svg>\r\n                            </div>\r\n                            <h3 className=\"text-2xl font-black text-zinc-900 mb-2\">Verifying your email...</h3>\r\n                            <p className=\"text-zinc-500 font-medium\">\r\n                                Please wait while we verify your account.\r\n                            </p>\r\n                        </>\r\n                    )}\r\n\r\n                    {status === 'success' && (\r\n                        <>\r\n                            <div className=\"mx-auto flex h-20 w-20 items-center justify-center rounded-full bg-green-100 mb-6\">\r\n                                <svg className=\"h-10 w-10 text-green-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M5 13l4 4L19 7\" />\r\n                                </svg>\r\n                            </div>\r\n                            <h3 className=\"text-2xl font-black text-zinc-900 mb-2\">Email Verified!</h3>\r\n                            <p className=\"text-zinc-500 font-medium mb-8\">\r\n                                Your account has been successfully verified.\r\n                            </p>\r\n                            <div>\r\n                                <Link\r\n                                    href=\"/login\"\r\n                                    className=\"w-full flex justify-center py-4 px-6 border border-transparent rounded-full shadow-lg text-base font-bold text-zinc-900 bg-yellow-400 hover:bg-yellow-300 hover:scale-105 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-400\"\r\n                                >\r\n                                    Continue to Login\r\n                                </Link>\r\n                            </div>\r\n                        </>\r\n                    )}\r\n\r\n                    {status === 'error' && (\r\n                        <>\r\n                            <div className=\"mx-auto flex h-20 w-20 items-center justify-center rounded-full bg-red-100 mb-6\">\r\n                                <svg className=\"h-10 w-10 text-red-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\r\n                                </svg>\r\n                            </div>\r\n                            <h3 className=\"text-2xl font-black text-zinc-900 mb-2\">Verification Failed</h3>\r\n                            <p className=\"text-red-600 font-bold mb-8 bg-red-50 py-3 px-4 rounded-xl border border-red-100\">\r\n                                {message}\r\n                            </p>\r\n                            <div>\r\n                                <Link\r\n                                    href=\"/login\"\r\n                                    className=\"font-bold text-zinc-900 hover:text-yellow-600 transition-colors underline decoration-2 decoration-yellow-400 underline-offset-4\"\r\n                                >\r\n                                    Back to Login\r\n                                </Link>\r\n                            </div>\r\n                        </>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(public)\\forgot-password\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":22,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[776,779],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[776,779],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":51,"column":28,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[2463,2615],"text":"\r\n                        Don&apos;t worry, it happens to the best of us. We'll help you get back to booking amazing events in no time.\r\n                    "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[2463,2615],"text":"\r\n                        Don&lsquo;t worry, it happens to the best of us. We'll help you get back to booking amazing events in no time.\r\n                    "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[2463,2615],"text":"\r\n                        Don&#39;t worry, it happens to the best of us. We'll help you get back to booking amazing events in no time.\r\n                    "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[2463,2615],"text":"\r\n                        Don&rsquo;t worry, it happens to the best of us. We'll help you get back to booking amazing events in no time.\r\n                    "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":51,"column":70,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[2463,2615],"text":"\r\n                        Don't worry, it happens to the best of us. We&apos;ll help you get back to booking amazing events in no time.\r\n                    "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[2463,2615],"text":"\r\n                        Don't worry, it happens to the best of us. We&lsquo;ll help you get back to booking amazing events in no time.\r\n                    "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[2463,2615],"text":"\r\n                        Don't worry, it happens to the best of us. We&#39;ll help you get back to booking amazing events in no time.\r\n                    "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[2463,2615],"text":"\r\n                        Don't worry, it happens to the best of us. We&rsquo;ll help you get back to booking amazing events in no time.\r\n                    "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":59,"column":33,"nodeType":"JSXOpeningElement","endLine":59,"endColumn":111},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":67,"column":29,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3567,3706],"text":"\r\n                            &quot;Security is our top priority. Resetting your password is quick, easy, and secure.\"\r\n                        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3567,3706],"text":"\r\n                            &ldquo;Security is our top priority. Resetting your password is quick, easy, and secure.\"\r\n                        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3567,3706],"text":"\r\n                            &#34;Security is our top priority. Resetting your password is quick, easy, and secure.\"\r\n                        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3567,3706],"text":"\r\n                            &rdquo;Security is our top priority. Resetting your password is quick, easy, and secure.\"\r\n                        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":67,"column":111,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3567,3706],"text":"\r\n                            \"Security is our top priority. Resetting your password is quick, easy, and secure.&quot;\r\n                        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3567,3706],"text":"\r\n                            \"Security is our top priority. Resetting your password is quick, easy, and secure.&ldquo;\r\n                        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3567,3706],"text":"\r\n                            \"Security is our top priority. Resetting your password is quick, easy, and secure.&#34;\r\n                        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3567,3706],"text":"\r\n                            \"Security is our top priority. Resetting your password is quick, easy, and secure.&rdquo;\r\n                        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":85,"column":35,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[4922,4991],"text":"\r\n                                We&apos;ve sent a password reset link to"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[4922,4991],"text":"\r\n                                We&lsquo;ve sent a password reset link to"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[4922,4991],"text":"\r\n                                We&#39;ve sent a password reset link to"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[4922,4991],"text":"\r\n                                We&rsquo;ve sent a password reset link to"},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport React, { useState } from 'react'\r\nimport Link from 'next/link'\r\nimport { toast } from 'react-hot-toast'\r\nimport { forgotPassword } from '@/services/api'\r\nimport { FormInput } from '@/components/auth/FormInput'\r\nimport { FormButton } from '@/components/auth/FormButton'\r\n\r\nexport default function ForgotPasswordPage() {\r\n    const [email, setEmail] = useState('')\r\n    const [status, setStatus] = useState<'idle' | 'loading' | 'success' | 'error'>('idle')\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault()\r\n        setStatus('loading')\r\n\r\n        try {\r\n            await forgotPassword(email)\r\n            setStatus('success')\r\n            toast.success('Reset link sent! Check your email.')\r\n        } catch (err: any) {\r\n            console.error(err)\r\n            setStatus('error')\r\n            const errorMsg = err.response?.data?.detail || 'Failed to send reset link. Please try again.'\r\n            toast.error(errorMsg, { id: 'forgot-password-error' })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen flex bg-amber-50 font-sans\">\r\n            {/* Left Side - Playful Yellow */}\r\n            <div className=\"hidden lg:flex lg:w-1/2 bg-yellow-400 relative flex-col justify-between p-12 lg:p-16 overflow-hidden\">\r\n                {/* Abstract Shapes */}\r\n                <div className=\"absolute top-[-10%] right-[-10%] w-64 h-64 bg-white rounded-full opacity-20 blur-3xl\" />\r\n                <div className=\"absolute bottom-[-10%] left-[-10%] w-80 h-80 bg-orange-400 rounded-full opacity-20 blur-3xl\" />\r\n\r\n                <div className=\"relative z-10\">\r\n                    <div className=\"flex items-center gap-3 mb-12\">\r\n                        <div className=\"h-12 w-12 bg-zinc-900 rounded-full flex items-center justify-center text-yellow-400 font-bold text-2xl\">\r\n                            A\r\n                        </div>\r\n                        <span className=\"text-3xl font-black text-zinc-900 tracking-tight\">ATAS</span>\r\n                    </div>\r\n\r\n                    <h1 className=\"text-6xl font-black text-zinc-900 leading-[1.1] mb-6\">\r\n                        Recover <br />\r\n                        Your <span className=\"text-white inline-block transform -rotate-2 bg-zinc-900 px-4 py-1 rounded-lg shadow-xl\">Access</span>\r\n                    </h1>\r\n                    <p className=\"text-xl text-zinc-900/80 font-medium max-w-md leading-relaxed\">\r\n                        Don't worry, it happens to the best of us. We'll help you get back to booking amazing events in no time.\r\n                    </p>\r\n                </div>\r\n\r\n                <div className=\"relative z-10\">\r\n                    <div className=\"bg-white/30 backdrop-blur-md rounded-3xl p-6 border border-white/20 shadow-xl max-w-sm transform rotate-2 hover:rotate-0 transition-all duration-300\">\r\n                        <div className=\"flex items-center gap-4 mb-3\">\r\n                            <div className=\"h-10 w-10 rounded-full bg-gray-200 overflow-hidden\">\r\n                                <img src=\"https://api.dicebear.com/7.x/avataaars/svg?seed=Felix\" alt=\"User\" />\r\n                            </div>\r\n                            <div>\r\n                                <p className=\"font-bold text-zinc-900 text-sm\">System Support</p>\r\n                                <p className=\"text-xs text-zinc-900/60\">ATAS Team</p>\r\n                            </div>\r\n                        </div>\r\n                        <p className=\"text-zinc-900/80 text-sm font-medium\">\r\n                            \"Security is our top priority. Resetting your password is quick, easy, and secure.\"\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Right Side - Forgot Password Form */}\r\n            <div className=\"w-full lg:w-1/2 flex items-center justify-center p-8 sm:p-12 bg-white rounded-l-[3rem] shadow-[-20px_0_60px_rgba(0,0,0,0.05)] z-20\">\r\n                <div className=\"w-full max-w-md space-y-10\">\r\n                    {status === 'success' ? (\r\n                        <div className=\"text-center lg:text-left animate-fade-in\">\r\n                            <div className=\"inline-flex h-20 w-20 items-center justify-center rounded-full bg-green-100 mb-6\">\r\n                                <svg className=\"h-10 w-10 text-green-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\r\n                                </svg>\r\n                            </div>\r\n                            <h3 className=\"text-2xl font-black text-zinc-900 mb-2\">Check your email</h3>\r\n                            <p className=\"text-zinc-500 font-medium mb-8\">\r\n                                We've sent a password reset link to{' '}\r\n                                {(() => {\r\n                                    const domain = email.split('@')[1]?.toLowerCase()\r\n                                    let inboxUrl = null\r\n\r\n                                    if (domain === 'gmail.com') inboxUrl = 'https://mail.google.com'\r\n                                    else if (['outlook.com', 'hotmail.com', 'live.com'].includes(domain)) inboxUrl = 'https://outlook.live.com'\r\n                                    else if (domain === 'yahoo.com') inboxUrl = 'https://mail.yahoo.com'\r\n\r\n                                    return inboxUrl ? (\r\n                                        <a\r\n                                            href={inboxUrl}\r\n                                            target=\"_blank\"\r\n                                            rel=\"noopener noreferrer\"\r\n                                            className=\"font-bold text-zinc-900 hover:text-yellow-600 transition-colors underline decoration-2 decoration-yellow-400 underline-offset-2\"\r\n                                        >\r\n                                            {email}\r\n                                        </a>\r\n                                    ) : (\r\n                                        <span className=\"font-bold text-zinc-900\">{email}</span>\r\n                                    )\r\n                                })()}.\r\n                            </p>\r\n                            <Link\r\n                                href=\"/login\"\r\n                                className=\"w-full flex justify-center py-4 px-6 border border-transparent rounded-full shadow-lg text-base font-bold text-zinc-900 bg-yellow-400 hover:bg-yellow-300 hover:scale-105 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-400\"\r\n                            >\r\n                                Back to Login\r\n                            </Link>\r\n                        </div>\r\n                    ) : (\r\n                        <>\r\n                            <div className=\"text-center lg:text-left\">\r\n                                <h2 className=\"text-4xl font-black text-zinc-900 mb-3\">\r\n                                    Forgot <br />Password?\r\n                                </h2>\r\n                                <p className=\"text-gray-500 font-medium\">\r\n                                    Remember your password? <Link href=\"/login\" className=\"text-zinc-900 font-bold hover:underline decoration-yellow-400 decoration-4 underline-offset-2\">Login Now</Link>\r\n                                </p>\r\n                            </div>\r\n\r\n                            <form className=\"space-y-6\" onSubmit={handleSubmit}>\r\n                                <div className=\"space-y-5\">\r\n                                    <FormInput\r\n                                        id=\"email\"\r\n                                        label=\"Email address\"\r\n                                        type=\"email\"\r\n                                        placeholder=\"name@university.edu.my\"\r\n                                        value={email}\r\n                                        onChange={(e) => setEmail(e.target.value)}\r\n                                    />\r\n                                </div>\r\n\r\n                                <FormButton disabled={status === 'loading'}>\r\n                                    {status === 'loading' ? 'Sending...' : 'Send Reset Link'}\r\n                                </FormButton>\r\n                            </form>\r\n                        </>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(public)\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(public)\\login\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ApiErrorResponse' is defined but never used.","line":14,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":26},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":69,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":69,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2395,2398],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2395,2398],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":170,"column":33,"nodeType":"JSXOpeningElement","endLine":170,"endColumn":111},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":178,"column":29,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[9073,9211],"text":"\r\n                            &quot;ATAS made finding a speaker for our tech week incredibly easy. Highly recommend!\"\r\n                        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[9073,9211],"text":"\r\n                            &ldquo;ATAS made finding a speaker for our tech week incredibly easy. Highly recommend!\"\r\n                        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[9073,9211],"text":"\r\n                            &#34;ATAS made finding a speaker for our tech week incredibly easy. Highly recommend!\"\r\n                        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[9073,9211],"text":"\r\n                            &rdquo;ATAS made finding a speaker for our tech week incredibly easy. Highly recommend!\"\r\n                        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":178,"column":110,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[9073,9211],"text":"\r\n                            \"ATAS made finding a speaker for our tech week incredibly easy. Highly recommend!&quot;\r\n                        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[9073,9211],"text":"\r\n                            \"ATAS made finding a speaker for our tech week incredibly easy. Highly recommend!&ldquo;\r\n                        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[9073,9211],"text":"\r\n                            \"ATAS made finding a speaker for our tech week incredibly easy. Highly recommend!&#34;\r\n                        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[9073,9211],"text":"\r\n                            \"ATAS made finding a speaker for our tech week incredibly easy. Highly recommend!&rdquo;\r\n                        "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n// frontend/app/(public)/login/page.tsx\r\n'use client'\r\n\r\n\r\nimport React, { useState, useEffect } from 'react'\r\nimport Link from 'next/link'\r\nimport { useRouter } from 'next/navigation'\r\nimport { toast } from 'react-hot-toast'\r\nimport { AxiosError } from 'axios'\r\nimport { getApiErrorMessage } from '@/lib/utils'\r\n\r\nimport { login, getMyProfile, resendVerification } from '@/services/api'\r\nimport { ApiErrorResponse } from '@/services/api.types'\r\n\r\nexport default function LoginPage() {\r\n    const [email, setEmail] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const [isLoading, setIsLoading] = useState(false)\r\n    const [showVerificationModal, setShowVerificationModal] = useState(false)\r\n    const [isResending, setIsResending] = useState(false)\r\n    const [countdown, setCountdown] = useState(0)\r\n    const router = useRouter()\r\n\r\n    React.useEffect(() => {\r\n        const token = localStorage.getItem('atas_token')\r\n        if (token) {\r\n            router.replace('/dashboard')\r\n        }\r\n    }, [router])\r\n\r\n    // Timer effect\r\n    useEffect(() => {\r\n        if (countdown > 0) {\r\n            const timer = setTimeout(() => setCountdown(c => c - 1), 1000)\r\n            return () => clearTimeout(timer)\r\n        }\r\n    }, [countdown])\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault()\r\n        if (isLoading) return\r\n        setIsLoading(true)\r\n\r\n        try {\r\n            const { access_token } = await login({ email, password })\r\n            localStorage.setItem('atas_token', access_token)\r\n\r\n            try {\r\n                const profile = await getMyProfile()\r\n\r\n                // Check is_onboarded status\r\n                if (!profile.is_onboarded) {\r\n                    toast('Please complete your onboarding!', { icon: '' })\r\n                    router.push('/onboarding')\r\n                } else {\r\n                    toast.success('Welcome back!')\r\n                    router.push('/dashboard')\r\n                }\r\n            } catch (profileError) {\r\n                const err = profileError as AxiosError\r\n                if (err.response?.status === 404) {\r\n                    toast.success('Please complete your profile.')\r\n                    router.push('/onboarding')\r\n                } else {\r\n                    throw profileError\r\n                }\r\n            }\r\n        } catch (error: any) {\r\n            const message = getApiErrorMessage(error, 'Invalid credentials.')\r\n\r\n            // Check if error is related to inactive/unverified account\r\n            // Backend returns: \"User is not active. Please verify your email.\"\r\n            if (error.response?.status === 400 && message.toLowerCase().includes('not active')) {\r\n                setShowVerificationModal(true)\r\n            } else {\r\n                toast.error(message, { id: 'login-error' })\r\n            }\r\n            // Clear password only for security, keep email so user doesn't need to retype\r\n            setPassword('')\r\n        } finally {\r\n            setIsLoading(false)\r\n        }\r\n    }\r\n\r\n    const handleResendVerification = async () => {\r\n        if (!email) {\r\n            toast.error('Please enter your email first')\r\n            return\r\n        }\r\n        if (countdown > 0) return\r\n\r\n        setIsResending(true)\r\n        try {\r\n            await resendVerification(email)\r\n            toast.success('Verification email sent! Please check your inbox.')\r\n            setCountdown(60) // Start 60s cooldown\r\n            // setShowVerificationModal(false) \r\n        } catch (error) {\r\n            toast.error(getApiErrorMessage(error, 'Failed to resend email'))\r\n        } finally {\r\n            setIsResending(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen flex bg-amber-50 font-sans relative\">\r\n\r\n            {/* Verification Modal */}\r\n            {showVerificationModal && (\r\n                <div className=\"absolute inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4\">\r\n                    <div className=\"bg-white rounded-2xl p-8 max-w-sm w-full shadow-2xl transform scale-100 transition-all\">\r\n                        <div className=\"text-center\">\r\n                            <div className=\"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-yellow-100 mb-4\">\r\n                                <svg className=\"h-6 w-6 text-yellow-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\r\n                                </svg>\r\n                            </div>\r\n                            <h3 className=\"text-lg font-bold text-gray-900 mb-2\">Email Not Verified</h3>\r\n                            <p className=\"text-sm text-gray-500 mb-6\">\r\n                                Your account is not active yet. Please check your email inbox for the verification link.\r\n                            </p>\r\n                            <div className=\"space-y-3\">\r\n                                <button\r\n                                    onClick={handleResendVerification}\r\n                                    disabled={isResending || countdown > 0}\r\n                                    className=\"w-full inline-flex justify-center items-center rounded-xl border border-transparent shadow-sm px-4 py-3 bg-yellow-400 text-base font-bold text-zinc-900 hover:bg-yellow-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-400 sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed transition-all\"\r\n                                >\r\n                                    {isResending ? 'Sending...' : countdown > 0 ? `Resend in ${countdown}s` : 'Resend Verification Email'}\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => setShowVerificationModal(false)}\r\n                                    className=\"w-full inline-flex justify-center rounded-xl border border-gray-300 shadow-sm px-4 py-3 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:text-sm\"\r\n                                >\r\n                                    Close\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Left Side - Playful Yellow */}\r\n            <div className=\"hidden lg:flex lg:w-1/2 bg-yellow-400 relative flex-col justify-between p-12 lg:p-16 overflow-hidden\">\r\n                {/* Abstract Shapes */}\r\n                <div className=\"absolute top-[-10%] right-[-10%] w-64 h-64 bg-white rounded-full opacity-20 blur-3xl\" />\r\n                <div className=\"absolute bottom-[-10%] left-[-10%] w-80 h-80 bg-orange-400 rounded-full opacity-20 blur-3xl\" />\r\n\r\n                <div className=\"relative z-10\">\r\n                    <div className=\"flex items-center gap-3 mb-12\">\r\n                        <div className=\"h-12 w-12 bg-zinc-900 rounded-full flex items-center justify-center text-yellow-400 font-bold text-2xl\">\r\n                            A\r\n                        </div>\r\n                        <span className=\"text-3xl font-black text-zinc-900 tracking-tight\">ATAS</span>\r\n                    </div>\r\n\r\n                    <h1 className=\"text-6xl font-black text-zinc-900 leading-[1.1] mb-6\">\r\n                        Unlock the <br />\r\n                        Expert <span className=\"text-white inline-block transform -rotate-2 bg-zinc-900 px-4 py-1 rounded-lg shadow-xl\">Knowledge</span>\r\n                    </h1>\r\n                    <p className=\"text-xl text-zinc-900/80 font-medium max-w-md leading-relaxed\">\r\n                        The most fun way to book industry experts for your university events. Simple, fast, and reliable.\r\n                    </p>\r\n                </div>\r\n\r\n                <div className=\"relative z-10\">\r\n                    <div className=\"bg-white/30 backdrop-blur-md rounded-3xl p-6 border border-white/20 shadow-xl max-w-sm transform rotate-2 hover:rotate-0 transition-all duration-300\">\r\n                        <div className=\"flex items-center gap-4 mb-3\">\r\n                            <div className=\"h-10 w-10 rounded-full bg-gray-200 overflow-hidden\">\r\n                                <img src=\"https://api.dicebear.com/7.x/avataaars/svg?seed=Felix\" alt=\"User\" />\r\n                            </div>\r\n                            <div>\r\n                                <p className=\"font-bold text-zinc-900 text-sm\">Sarah Jenkins</p>\r\n                                <p className=\"text-xs text-zinc-900/60\">Event Organizer</p>\r\n                            </div>\r\n                        </div>\r\n                        <p className=\"text-zinc-900/80 text-sm font-medium\">\r\n                            \"ATAS made finding a speaker for our tech week incredibly easy. Highly recommend!\"\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Right Side - Login Form */}\r\n            <div className=\"w-full lg:w-1/2 flex items-center justify-center p-8 sm:p-12 bg-white rounded-l-[3rem] shadow-[-20px_0_60px_rgba(0,0,0,0.05)] z-20\">\r\n                <div className=\"w-full max-w-md space-y-10\">\r\n                    <div className=\"text-center lg:text-left\">\r\n                        <h2 className=\"text-4xl font-black text-zinc-900 mb-3\">\r\n                            Hey, <br />Login Now!\r\n                        </h2>\r\n                        <p className=\"text-gray-500 font-medium\">\r\n                            I Am A Old User / <Link href=\"/register\" className=\"text-zinc-900 font-bold hover:underline decoration-yellow-400 decoration-4 underline-offset-2\">Create New</Link>\r\n                        </p>\r\n                    </div>\r\n\r\n                    <form className=\"space-y-6\" onSubmit={handleSubmit}>\r\n                        <div className=\"space-y-5\">\r\n                            <div className=\"group\">\r\n                                <label htmlFor=\"email\" className=\"block text-sm font-bold text-zinc-900 mb-2 ml-1\">\r\n                                    Email address\r\n                                </label>\r\n                                <input\r\n                                    id=\"email\"\r\n                                    name=\"email\"\r\n                                    type=\"email\"\r\n                                    required\r\n                                    placeholder=\"name@university.edu.my\"\r\n                                    value={email}\r\n                                    onChange={(e) => setEmail(e.target.value)}\r\n                                    className=\"block w-full rounded-2xl bg-gray-100 border-transparent focus:border-yellow-400 focus:bg-white focus:ring-0 text-zinc-900 font-medium py-4 px-5 transition-all duration-200 placeholder-gray-400\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"group\">\r\n                                <div className=\"flex items-center justify-between mb-2 ml-1\">\r\n                                    <label htmlFor=\"password\" className=\"block text-sm font-bold text-zinc-900\">\r\n                                        Password\r\n                                    </label>\r\n                                </div>\r\n                                <input\r\n                                    id=\"password\"\r\n                                    name=\"password\"\r\n                                    type=\"password\"\r\n                                    required\r\n                                    placeholder=\"\"\r\n                                    value={password}\r\n                                    onChange={(e) => setPassword(e.target.value)}\r\n                                    className=\"block w-full rounded-2xl bg-gray-100 border-transparent focus:border-yellow-400 focus:bg-white focus:ring-0 text-zinc-900 font-medium py-4 px-5 transition-all duration-200 placeholder-gray-400\"\r\n                                />\r\n                                <div className=\"flex justify-end mt-2\">\r\n                                    <Link href=\"/forgot-password\" className=\"text-xs font-bold text-gray-400 hover:text-zinc-900 transition-colors\">\r\n                                        Forget Password? / Reset\r\n                                    </Link>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <button\r\n                            type=\"submit\"\r\n                            disabled={isLoading}\r\n                            className=\"w-full py-4 rounded-full bg-yellow-400 text-zinc-900 font-black text-lg shadow-[0_4px_0_rgb(0,0,0)] hover:shadow-[0_2px_0_rgb(0,0,0)] hover:translate-y-[2px] active:shadow-none active:translate-y-[4px] transition-all duration-150 disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none disabled:translate-y-0 flex items-center justify-center gap-2\"\r\n                        >\r\n                            {isLoading ? 'Logging in...' : 'Login Now'}\r\n                            {isLoading && (\r\n                                <svg className=\"animate-spin h-5 w-5 text-zinc-900\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                                    <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                                    <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                                </svg>\r\n                            )}\r\n                        </button>\r\n\r\n\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(public)\\maintenance\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(public)\\privacy\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(public)\\register\\page.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":83,"column":33,"nodeType":"JSXOpeningElement","endLine":83,"endColumn":110},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":91,"column":29,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[4222,4358],"text":"\r\n                            &quot;The platform is so fun to use! I love how easy it is to connect with speakers.\"\r\n                        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[4222,4358],"text":"\r\n                            &ldquo;The platform is so fun to use! I love how easy it is to connect with speakers.\"\r\n                        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[4222,4358],"text":"\r\n                            &#34;The platform is so fun to use! I love how easy it is to connect with speakers.\"\r\n                        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[4222,4358],"text":"\r\n                            &rdquo;The platform is so fun to use! I love how easy it is to connect with speakers.\"\r\n                        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":91,"column":108,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[4222,4358],"text":"\r\n                            \"The platform is so fun to use! I love how easy it is to connect with speakers.&quot;\r\n                        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[4222,4358],"text":"\r\n                            \"The platform is so fun to use! I love how easy it is to connect with speakers.&ldquo;\r\n                        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[4222,4358],"text":"\r\n                            \"The platform is so fun to use! I love how easy it is to connect with speakers.&#34;\r\n                        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[4222,4358],"text":"\r\n                            \"The platform is so fun to use! I love how easy it is to connect with speakers.&rdquo;\r\n                        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":169,"column":41,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[9237,9314],"text":"\r\n                            By clicking &quot;Create account\", you agree to our "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[9237,9314],"text":"\r\n                            By clicking &ldquo;Create account\", you agree to our "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[9237,9314],"text":"\r\n                            By clicking &#34;Create account\", you agree to our "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[9237,9314],"text":"\r\n                            By clicking &rdquo;Create account\", you agree to our "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":169,"column":56,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[9237,9314],"text":"\r\n                            By clicking \"Create account&quot;, you agree to our "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[9237,9314],"text":"\r\n                            By clicking \"Create account&ldquo;, you agree to our "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[9237,9314],"text":"\r\n                            By clicking \"Create account&#34;, you agree to our "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[9237,9314],"text":"\r\n                            By clicking \"Create account&rdquo;, you agree to our "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport React, { useState, useEffect } from 'react'\r\nimport Link from 'next/link'\r\nimport { useRouter } from 'next/navigation'\r\nimport { toast } from 'react-hot-toast'\r\nimport { AxiosError } from 'axios'\r\n\r\nimport { LoadingBackdrop } from '@/components/ui/LoadingBackdrop'\r\nimport { register } from '@/services/api'\r\nimport { ApiErrorResponse } from '@/services/api.types'\r\n\r\nexport default function RegisterPage() {\r\n    const [email, setEmail] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const [confirmPassword, setConfirmPassword] = useState('')\r\n    const [isLoading, setIsLoading] = useState(false)\r\n    const router = useRouter()\r\n\r\n    useEffect(() => {\r\n        const token = localStorage.getItem('atas_token')\r\n        if (token) {\r\n            router.replace('/dashboard')\r\n        }\r\n    }, [router])\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault()\r\n\r\n        if (isLoading) return\r\n\r\n        if (password !== confirmPassword) {\r\n            toast.error('Passwords do not match', { id: 'password-mismatch' })\r\n            return\r\n        }\r\n\r\n        setIsLoading(true)\r\n\r\n        try {\r\n            await register({ email, password })\r\n            toast.success('Account created! Please check your email to verify.')\r\n            router.push('/login')\r\n        } catch (error) {\r\n            const err = error as AxiosError<ApiErrorResponse>\r\n            const message = err.response?.data?.detail || 'Registration failed.'\r\n            toast.error(message, { id: 'register-error' })\r\n        } finally {\r\n            setIsLoading(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen flex bg-amber-50 font-sans\">\r\n            <LoadingBackdrop isLoading={isLoading} />\r\n\r\n            {/* Left Side - Playful Yellow */}\r\n            <div className=\"hidden lg:flex lg:w-1/2 bg-yellow-400 relative flex-col justify-between p-12 lg:p-16 overflow-hidden\">\r\n                {/* Abstract Shapes */}\r\n                <div className=\"absolute top-[-10%] right-[-10%] w-64 h-64 bg-white rounded-full opacity-20 blur-3xl\" />\r\n                <div className=\"absolute bottom-[-10%] left-[-10%] w-80 h-80 bg-orange-400 rounded-full opacity-20 blur-3xl\" />\r\n\r\n                <div className=\"relative z-10\">\r\n                    <div className=\"flex items-center gap-3 mb-12\">\r\n                        <div className=\"h-12 w-12 bg-zinc-900 rounded-full flex items-center justify-center text-yellow-400 font-bold text-2xl\">\r\n                            A\r\n                        </div>\r\n                        <span className=\"text-3xl font-black text-zinc-900 tracking-tight\">ATAS</span>\r\n                    </div>\r\n\r\n                    <h1 className=\"text-6xl font-black text-zinc-900 leading-[1.1] mb-6\">\r\n                        Join the <br />\r\n                        <span className=\"text-white inline-block transform rotate-2 bg-zinc-900 px-4 py-1 rounded-lg shadow-xl\">Community</span>\r\n                    </h1>\r\n                    <p className=\"text-xl text-zinc-900/80 font-medium max-w-md leading-relaxed\">\r\n                        Create an account to start booking events, managing your schedule, and connecting with experts.\r\n                    </p>\r\n                </div>\r\n\r\n                <div className=\"relative z-10\">\r\n                    <div className=\"bg-white/30 backdrop-blur-md rounded-3xl p-6 border border-white/20 shadow-xl max-w-sm transform -rotate-1 hover:rotate-0 transition-all duration-300\">\r\n                        <div className=\"flex items-center gap-4 mb-3\">\r\n                            <div className=\"h-10 w-10 rounded-full bg-gray-200 overflow-hidden\">\r\n                                <img src=\"https://api.dicebear.com/7.x/avataaars/svg?seed=Alex\" alt=\"User\" />\r\n                            </div>\r\n                            <div>\r\n                                <p className=\"font-bold text-zinc-900 text-sm\">Alex Chen</p>\r\n                                <p className=\"text-xs text-zinc-900/60\">Student Leader</p>\r\n                            </div>\r\n                        </div>\r\n                        <p className=\"text-zinc-900/80 text-sm font-medium\">\r\n                            \"The platform is so fun to use! I love how easy it is to connect with speakers.\"\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Right Side - Register Form */}\r\n            <div className=\"w-full lg:w-1/2 flex items-center justify-center p-8 sm:p-12 bg-white rounded-l-[3rem] shadow-[-20px_0_60px_rgba(0,0,0,0.05)] z-20\">\r\n                <div className=\"w-full max-w-md space-y-10\">\r\n                    <div className=\"text-center lg:text-left\">\r\n                        <h2 className=\"text-4xl font-black text-zinc-900 mb-3\">\r\n                            Create <br />Account\r\n                        </h2>\r\n                        <p className=\"text-gray-500 font-medium\">\r\n                            Already have an account? <Link href=\"/login\" className=\"text-zinc-900 font-bold hover:underline decoration-yellow-400 decoration-4 underline-offset-2\">Sign in</Link>\r\n                        </p>\r\n                    </div>\r\n\r\n                    <form className=\"space-y-6\" onSubmit={handleSubmit}>\r\n                        <div className=\"space-y-5\">\r\n                            <div className=\"group\">\r\n                                <label htmlFor=\"email\" className=\"block text-sm font-bold text-zinc-900 mb-2 ml-1\">\r\n                                    Email address\r\n                                </label>\r\n                                <input\r\n                                    id=\"email\"\r\n                                    name=\"email\"\r\n                                    type=\"email\"\r\n                                    required\r\n                                    placeholder=\"name@university.edu.my\"\r\n                                    value={email}\r\n                                    onChange={(e) => setEmail(e.target.value)}\r\n                                    className=\"block w-full rounded-2xl bg-gray-100 border-transparent focus:border-yellow-400 focus:bg-white focus:ring-0 text-zinc-900 font-medium py-4 px-5 transition-all duration-200 placeholder-gray-400\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"group\">\r\n                                <label htmlFor=\"password\" className=\"block text-sm font-bold text-zinc-900 mb-2 ml-1\">\r\n                                    Password\r\n                                </label>\r\n                                <input\r\n                                    id=\"password\"\r\n                                    name=\"password\"\r\n                                    type=\"password\"\r\n                                    required\r\n                                    placeholder=\"\"\r\n                                    value={password}\r\n                                    onChange={(e) => setPassword(e.target.value)}\r\n                                    className=\"block w-full rounded-2xl bg-gray-100 border-transparent focus:border-yellow-400 focus:bg-white focus:ring-0 text-zinc-900 font-medium py-4 px-5 transition-all duration-200 placeholder-gray-400\"\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"group\">\r\n                                <label htmlFor=\"confirmPassword\" className=\"block text-sm font-bold text-zinc-900 mb-2 ml-1\">\r\n                                    Confirm Password\r\n                                </label>\r\n                                <input\r\n                                    id=\"confirmPassword\"\r\n                                    name=\"confirmPassword\"\r\n                                    type=\"password\"\r\n                                    required\r\n                                    placeholder=\"\"\r\n                                    value={confirmPassword}\r\n                                    onChange={(e) => setConfirmPassword(e.target.value)}\r\n                                    className=\"block w-full rounded-2xl bg-gray-100 border-transparent focus:border-yellow-400 focus:bg-white focus:ring-0 text-zinc-900 font-medium py-4 px-5 transition-all duration-200 placeholder-gray-400\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <button\r\n                            type=\"submit\"\r\n                            disabled={isLoading}\r\n                            className=\"w-full py-4 rounded-full bg-yellow-400 text-zinc-900 font-black text-lg shadow-[0_4px_0_rgb(0,0,0)] hover:shadow-[0_2px_0_rgb(0,0,0)] hover:translate-y-[2px] active:shadow-none active:translate-y-[4px] transition-all duration-150 disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none disabled:translate-y-0\"\r\n                        >\r\n                            {isLoading ? 'Creating Account...' : 'Create Account'}\r\n                        </button>\r\n\r\n                        <p className=\"text-xs text-center text-gray-400 font-bold mt-4\">\r\n                            By clicking \"Create account\", you agree to our <a href=\"#\" className=\"underline hover:text-zinc-900\">Terms</a> and <a href=\"#\" className=\"underline hover:text-zinc-900\">Privacy Policy</a>.\r\n                        </p>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(public)\\reset-password\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'router' is assigned a value but never used.","line":13,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":17},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":41,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1401,1404],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1401,1404],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":152,"column":33,"nodeType":"JSXOpeningElement","endLine":152,"endColumn":111},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":160,"column":29,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[7657,7794],"text":"\r\n                            &quot;We recommend using a mix of letters, numbers, and symbols for maximum security.\"\r\n                        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[7657,7794],"text":"\r\n                            &ldquo;We recommend using a mix of letters, numbers, and symbols for maximum security.\"\r\n                        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[7657,7794],"text":"\r\n                            &#34;We recommend using a mix of letters, numbers, and symbols for maximum security.\"\r\n                        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[7657,7794],"text":"\r\n                            &rdquo;We recommend using a mix of letters, numbers, and symbols for maximum security.\"\r\n                        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":160,"column":109,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[7657,7794],"text":"\r\n                            \"We recommend using a mix of letters, numbers, and symbols for maximum security.&quot;\r\n                        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[7657,7794],"text":"\r\n                            \"We recommend using a mix of letters, numbers, and symbols for maximum security.&ldquo;\r\n                        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[7657,7794],"text":"\r\n                            \"We recommend using a mix of letters, numbers, and symbols for maximum security.&#34;\r\n                        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[7657,7794],"text":"\r\n                            \"We recommend using a mix of letters, numbers, and symbols for maximum security.&rdquo;\r\n                        "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport React, { useState, Suspense } from 'react'\r\nimport Link from 'next/link'\r\nimport { useRouter, useSearchParams } from 'next/navigation'\r\nimport { resetPassword } from '@/services/api'\r\nimport { FormInput } from '@/components/auth/FormInput'\r\nimport { FormButton } from '@/components/auth/FormButton'\r\n\r\nimport { toast } from 'react-hot-toast'\r\n\r\nfunction ResetPasswordForm() {\r\n    const router = useRouter()\r\n    const searchParams = useSearchParams()\r\n    const token = searchParams.get('token')\r\n\r\n    const [password, setPassword] = useState('')\r\n    const [confirmPassword, setConfirmPassword] = useState('')\r\n    const [status, setStatus] = useState<'idle' | 'loading' | 'success' | 'error'>('idle')\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault()\r\n        setStatus('loading')\r\n\r\n        if (!token) {\r\n            setStatus('error')\r\n            toast.error('Invalid or missing reset token.', { id: 'reset-token-error' })\r\n            return\r\n        }\r\n\r\n        if (password !== confirmPassword) {\r\n            setStatus('error')\r\n            toast.error('Passwords do not match.', { id: 'password-mismatch' })\r\n            return\r\n        }\r\n\r\n        try {\r\n            await resetPassword({ token, password })\r\n            setStatus('success')\r\n            toast.success('Password reset successfully!')\r\n        } catch (err: any) {\r\n            console.error(err)\r\n            setStatus('error')\r\n            const errorMsg = err.response?.data?.detail || 'Failed to reset password. Please try again.'\r\n            toast.error(errorMsg, { id: 'reset-password-error' })\r\n        }\r\n    }\r\n\r\n    if (!token) {\r\n        return (\r\n            <div className=\"text-center lg:text-left\">\r\n                <div className=\"inline-flex h-20 w-20 items-center justify-center rounded-full bg-red-100 mb-6\">\r\n                    <svg className=\"h-10 w-10 text-red-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\r\n                    </svg>\r\n                </div>\r\n                <h3 className=\"text-2xl font-black text-zinc-900 mb-2\">Invalid Link</h3>\r\n                <p className=\"text-zinc-500 font-medium mb-8\">\r\n                    This password reset link is invalid or missing a token.\r\n                </p>\r\n                <Link\r\n                    href=\"/forgot-password\"\r\n                    className=\"font-bold text-zinc-900 hover:text-yellow-600 transition-colors underline decoration-2 decoration-yellow-400 underline-offset-4\"\r\n                >\r\n                    Request a new link\r\n                </Link>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    if (status === 'success') {\r\n        return (\r\n            <div className=\"text-center lg:text-left animate-fade-in\">\r\n                <div className=\"inline-flex h-20 w-20 items-center justify-center rounded-full bg-green-100 mb-6\">\r\n                    <svg className=\"h-10 w-10 text-green-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M5 13l4 4L19 7\" />\r\n                    </svg>\r\n                </div>\r\n                <h3 className=\"text-2xl font-black text-zinc-900 mb-2\">Password Reset!</h3>\r\n                <p className=\"text-zinc-500 font-medium mb-8\">\r\n                    Your password has been successfully updated.\r\n                </p>\r\n                <Link\r\n                    href=\"/login\"\r\n                    className=\"w-full flex justify-center py-4 px-6 border border-transparent rounded-full shadow-lg text-base font-bold text-zinc-900 bg-yellow-400 hover:bg-yellow-300 hover:scale-105 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-400\"\r\n                >\r\n                    Login with New Password\r\n                </Link>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <form className=\"space-y-6\" onSubmit={handleSubmit}>\r\n            <div className=\"space-y-5\">\r\n                <FormInput\r\n                    id=\"password\"\r\n                    label=\"New Password\"\r\n                    type=\"password\"\r\n                    placeholder=\"\"\r\n                    value={password}\r\n                    onChange={(e) => setPassword(e.target.value)}\r\n                />\r\n\r\n                <FormInput\r\n                    id=\"confirmPassword\"\r\n                    label=\"Confirm Password\"\r\n                    type=\"password\"\r\n                    placeholder=\"\"\r\n                    value={confirmPassword}\r\n                    onChange={(e) => setConfirmPassword(e.target.value)}\r\n                />\r\n            </div>\r\n\r\n            <FormButton disabled={status === 'loading'}>\r\n                {status === 'loading' ? 'Resetting...' : 'Reset Password'}\r\n            </FormButton>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default function ResetPasswordPage() {\r\n    return (\r\n        <div className=\"min-h-screen flex bg-amber-50 font-sans\">\r\n            {/* Left Side - Playful Yellow */}\r\n            <div className=\"hidden lg:flex lg:w-1/2 bg-yellow-400 relative flex-col justify-between p-12 lg:p-16 overflow-hidden\">\r\n                {/* Abstract Shapes */}\r\n                <div className=\"absolute top-[-10%] right-[-10%] w-64 h-64 bg-white rounded-full opacity-20 blur-3xl\" />\r\n                <div className=\"absolute bottom-[-10%] left-[-10%] w-80 h-80 bg-orange-400 rounded-full opacity-20 blur-3xl\" />\r\n\r\n                <div className=\"relative z-10\">\r\n                    <div className=\"flex items-center gap-3 mb-12\">\r\n                        <div className=\"h-12 w-12 bg-zinc-900 rounded-full flex items-center justify-center text-yellow-400 font-bold text-2xl\">\r\n                            A\r\n                        </div>\r\n                        <span className=\"text-3xl font-black text-zinc-900 tracking-tight\">ATAS</span>\r\n                    </div>\r\n\r\n                    <h1 className=\"text-6xl font-black text-zinc-900 leading-[1.1] mb-6\">\r\n                        Secure <br />\r\n                        Your <span className=\"text-white inline-block transform rotate-2 bg-zinc-900 px-4 py-1 rounded-lg shadow-xl\">Account</span>\r\n                    </h1>\r\n                    <p className=\"text-xl text-zinc-900/80 font-medium max-w-md leading-relaxed\">\r\n                        Create a strong password to protect your account and keep your data safe.\r\n                    </p>\r\n                </div>\r\n\r\n                <div className=\"relative z-10\">\r\n                    <div className=\"bg-white/30 backdrop-blur-md rounded-3xl p-6 border border-white/20 shadow-xl max-w-sm transform -rotate-1 hover:rotate-0 transition-all duration-300\">\r\n                        <div className=\"flex items-center gap-4 mb-3\">\r\n                            <div className=\"h-10 w-10 rounded-full bg-gray-200 overflow-hidden\">\r\n                                <img src=\"https://api.dicebear.com/7.x/avataaars/svg?seed=Felix\" alt=\"User\" />\r\n                            </div>\r\n                            <div>\r\n                                <p className=\"font-bold text-zinc-900 text-sm\">System Support</p>\r\n                                <p className=\"text-xs text-zinc-900/60\">ATAS Team</p>\r\n                            </div>\r\n                        </div>\r\n                        <p className=\"text-zinc-900/80 text-sm font-medium\">\r\n                            \"We recommend using a mix of letters, numbers, and symbols for maximum security.\"\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Right Side - Reset Password Form */}\r\n            <div className=\"w-full lg:w-1/2 flex items-center justify-center p-8 sm:p-12 bg-white rounded-l-[3rem] shadow-[-20px_0_60px_rgba(0,0,0,0.05)] z-20\">\r\n                <div className=\"w-full max-w-md space-y-10\">\r\n                    <div className=\"text-center lg:text-left\">\r\n                        <h2 className=\"text-4xl font-black text-zinc-900 mb-3\">\r\n                            Reset <br />Password\r\n                        </h2>\r\n                        <p className=\"text-gray-500 font-medium\">\r\n                            Enter your new password below.\r\n                        </p>\r\n                    </div>\r\n\r\n                    <Suspense fallback={<div className=\"text-center p-4\">Loading...</div>}>\r\n                        <ResetPasswordForm />\r\n                    </Suspense>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(public)\\terms\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(public)\\verify-email\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\(public)\\verify\\[token]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\api\\auth\\callback\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\main\\attendance\\scan\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":23,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[741,744],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[741,744],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\main\\book\\[expertId]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'currentUser' is assigned a value but never used.","line":18,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":23},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":113,"column":25,"nodeType":"JSXOpeningElement","endLine":117,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useParams, useRouter } from 'next/navigation'\r\nimport Link from 'next/link'\r\nimport { Toaster, toast } from 'react-hot-toast'\r\nimport { getProfileByUserId, getMe, createEvent } from '@/services/api'\r\nimport { ProfileResponse, UserMeResponse } from '@/services/api.types'\r\n\r\nexport default function BookingPage() {\r\n    const params = useParams()\r\n    const router = useRouter()\r\n    const expertId = params.expertId as string\r\n\r\n    const [expert, setExpert] = useState<ProfileResponse | null>(null)\r\n    const [loading, setLoading] = useState(true)\r\n    const [submitting, setSubmitting] = useState(false)\r\n    const [currentUser, setCurrentUser] = useState<UserMeResponse | null>(null)\r\n\r\n    // Form State\r\n    const [eventType, setEventType] = useState('Guest Speaker / Keynote')\r\n    const [date, setDate] = useState('')\r\n    const [time, setTime] = useState('')\r\n    const [venue, setVenue] = useState('')\r\n    const [message, setMessage] = useState('')\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            try {\r\n                const [expProfile, me] = await Promise.all([\r\n                    getProfileByUserId(expertId),\r\n                    getMe()\r\n                ])\r\n                setExpert(expProfile)\r\n                setCurrentUser(me)\r\n            } catch (error) {\r\n                console.error(error)\r\n                toast.error('Failed to load expert details')\r\n            } finally {\r\n                setLoading(false)\r\n            }\r\n        }\r\n        if (expertId) fetchData()\r\n    }, [expertId])\r\n\r\n    const handleBook = async (e: React.FormEvent) => {\r\n        e.preventDefault()\r\n        setSubmitting(true)\r\n\r\n        if (!date || !time || !venue || !message) {\r\n            toast.error('Please fill in all fields')\r\n            setSubmitting(false)\r\n            return\r\n        }\r\n\r\n        try {\r\n            // Combine date and time\r\n            const startDateTime = new Date(`${date}T${time}`)\r\n            // Default 1 hour duration for now\r\n            const endDateTime = new Date(startDateTime.getTime() + 60 * 60 * 1000)\r\n\r\n            // Submit booking request (Create Event + Invite)\r\n            // Note: This is a simplified flow. Ideally we call a specific 'book' endpoint\r\n            // or create a private event and invite the expert.\r\n            // For now, let's assume we create a proposed event.\r\n            await createEvent({\r\n                title: eventType,\r\n                description: message,\r\n                start_datetime: startDateTime.toISOString(),\r\n                end_datetime: endDateTime.toISOString(),\r\n                venue_place_id: null,\r\n                venue_remark: venue,\r\n                type: 'offline',\r\n                format: 'seminar',\r\n                cover_url: undefined,\r\n                logo_url: undefined,\r\n                registration_type: 'free',\r\n                visibility: 'private',\r\n                max_participant: 50,\r\n                remark: 'Pending Confirmation',\r\n            })\r\n\r\n            toast.success('Booking request sent successfully!')\r\n            router.push('/main/dashboard')\r\n        } catch (error) {\r\n            console.error(error)\r\n            toast.error('Failed to submit booking')\r\n        } finally {\r\n            setSubmitting(false)\r\n        }\r\n    }\r\n\r\n    if (loading) return <div className=\"flex h-screen items-center justify-center\">Loading...</div>\r\n    if (!expert) return <div className=\"flex h-screen items-center justify-center\">Expert not found</div>\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50 p-6 md:p-12 font-sans text-slate-800\">\r\n            <Toaster />\r\n\r\n            <div className=\"max-w-3xl mx-auto space-y-8\">\r\n                {/* Header Link */}\r\n                <Link href={`/main/profile/${expertId}`} className=\"inline-flex items-center text-slate-500 hover:text-slate-800 transition-colors font-medium text-sm\">\r\n                    <svg className=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M10 19l-7-7m0 0l7-7m-7 7h18\" /></svg>\r\n                    Back to Profile\r\n                </Link>\r\n\r\n                <h1 className=\"text-3xl font-black text-slate-900 tracking-tight\">Request a Booking</h1>\r\n\r\n                {/* You Are Booking Card */}\r\n                <div className=\"bg-white rounded-2xl border border-slate-200 p-6 shadow-sm\">\r\n                    <p className=\"text-xs text-slate-400 font-bold uppercase tracking-wider mb-4\">You Are Booking</p>\r\n                    <div className=\"flex items-center gap-4 mb-6\">\r\n                        <img\r\n                            src={`https://ui-avatars.com/api/?name=${expertId}&background=random&size=128`}\r\n                            alt=\"Profile\"\r\n                            className=\"w-16 h-16 rounded-full object-cover border-2 border-white shadow-md\"\r\n                        />\r\n                        <div>\r\n                            <h3 className=\"text-xl font-bold text-slate-900\">{expertId}</h3> {/* Name not in profile yet? */}\r\n                            <p className=\"text-slate-500\">{expert.title || 'Expert'}</p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Availability Banner */}\r\n                    <div className=\"bg-emerald-50 border border-emerald-100 rounded-xl p-4 flex items-start gap-3\">\r\n                        <div className=\"bg-emerald-100 p-1 rounded-full text-emerald-600 mt-0.5\">\r\n                            <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"><path fillRule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clipRule=\"evenodd\" /></svg>\r\n                        </div>\r\n                        <p className=\"text-emerald-800 text-sm font-medium leading-relaxed\">\r\n                            <span className=\"font-bold\">Good news!</span> {expertId} is usually available on the days you selected based on her recent activity.\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Booking Form */}\r\n                <form onSubmit={handleBook} className=\"bg-white rounded-2xl border border-slate-200 p-8 shadow-sm space-y-8\">\r\n                    <h2 className=\"text-xl font-bold text-slate-900\">Event Details</h2>\r\n\r\n                    {/* Event Type */}\r\n                    <div>\r\n                        <label className=\"block text-sm font-bold text-slate-700 mb-2\">Event Type</label>\r\n                        <select\r\n                            value={eventType}\r\n                            onChange={(e) => setEventType(e.target.value)}\r\n                            className=\"w-full px-4 py-3 rounded-xl border border-slate-300 focus:border-slate-500 focus:ring-4 focus:ring-slate-100 transition-all outline-none text-slate-700 bg-white appearance-none\"\r\n                        >\r\n                            <option>Guest Speaker / Keynote</option>\r\n                            <option>Workshop Facilitator</option>\r\n                            <option>Panelist</option>\r\n                            <option>Judge / Mentor</option>\r\n                        </select>\r\n                    </div>\r\n\r\n                    {/* Date & Time */}\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                        <div>\r\n                            <label className=\"block text-sm font-bold text-slate-700 mb-2\">Date</label>\r\n                            <input\r\n                                type=\"date\"\r\n                                value={date}\r\n                                onChange={(e) => setDate(e.target.value)}\r\n                                className=\"w-full px-4 py-3 rounded-xl border border-slate-300 focus:border-slate-500 focus:ring-4 focus:ring-slate-100 transition-all outline-none text-slate-700\"\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <label className=\"block text-sm font-bold text-slate-700 mb-2\">Time (MYT)</label>\r\n                            <input\r\n                                type=\"time\"\r\n                                value={time}\r\n                                onChange={(e) => setTime(e.target.value)}\r\n                                className=\"w-full px-4 py-3 rounded-xl border border-slate-300 focus:border-slate-500 focus:ring-4 focus:ring-slate-100 transition-all outline-none text-slate-700\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Venue */}\r\n                    <div>\r\n                        <label className=\"block text-sm font-bold text-slate-700 mb-2\">Venue / Platform</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"e.g. APU Auditorium or Zoom Link\"\r\n                            value={venue}\r\n                            onChange={(e) => setVenue(e.target.value)}\r\n                            className=\"w-full px-4 py-3 rounded-xl border border-slate-300 focus:border-slate-500 focus:ring-4 focus:ring-slate-100 transition-all outline-none text-slate-700 placeholder:text-slate-400\"\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Proposal Message */}\r\n                    <div>\r\n                        <div className=\"flex justify-between items-center mb-2\">\r\n                            <label className=\"block text-sm font-bold text-slate-700\">Proposal Message</label>\r\n                            <button\r\n                                type=\"button\"\r\n                                className=\"bg-purple-600 hover:bg-purple-700 text-white text-xs font-bold px-3 py-1.5 rounded-full flex items-center gap-1.5 transition-colors shadow-lg shadow-purple-500/20\"\r\n                            >\r\n                                <svg className=\"w-3 h-3\" fill=\"currentColor\" viewBox=\"0 0 20 20\"><path d=\"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z\" /></svg>\r\n                                AI Rewrite\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"relative\">\r\n                            <textarea\r\n                                rows={6}\r\n                                placeholder=\"Describe your event and why you'd like the expert to speak...\"\r\n                                value={message}\r\n                                onChange={(e) => setMessage(e.target.value)}\r\n                                className=\"w-full px-4 py-3 rounded-xl border border-slate-300 focus:border-purple-500 focus:ring-4 focus:ring-purple-50 transition-all outline-none text-slate-700 placeholder:text-slate-400 bg-purple-50/10 resize-none\"\r\n                            />\r\n                            <div className=\"absolute bottom-3 right-3\">\r\n                                <span className=\"bg-purple-100 text-purple-700 text-[10px] font-bold px-2 py-0.5 rounded-full border border-purple-200 flex items-center gap-1\">\r\n                                    <svg className=\"w-3 h-3\" fill=\"currentColor\" viewBox=\"0 0 20 20\"><path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z\" clipRule=\"evenodd\" /></svg>\r\n                                    ATAS AI\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Submit Button */}\r\n                    <div className=\"pt-4\">\r\n                        <button\r\n                            type=\"submit\"\r\n                            disabled={submitting}\r\n                            className=\"w-full bg-slate-900 text-white font-bold text-lg py-4 rounded-xl hover:bg-slate-800 transition-all shadow-xl hover:shadow-2xl active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                        >\r\n                            {submitting ? 'Sending Request...' : 'Send Booking Request'}\r\n                        </button>\r\n                    </div>\r\n\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\main\\categories\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":34,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[980,983],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[980,983],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\main\\dashboard\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getMe' is defined but never used.","line":15,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":8},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'UserMeResponse' is defined but never used.","line":23,"column":3,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'user' is assigned a value but never used.","line":28,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":15},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\main\\dashboard\\page.tsx:36:7\n  34 |     if (loading) return\n  35 |     if (isExpert && !roles?.includes('student') && activeTab !== 'expert') {\n> 36 |       setActiveTab('expert')\n     |       ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  37 |     }\n  38 |   }, [isExpert, roles, activeTab, loading])\n  39 |","line":36,"column":7,"nodeType":null,"endLine":36,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleAddComment' is assigned a value but never used.","line":243,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":243,"endColumn":25}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\nimport { useEffect, useMemo, useState } from \"react\"\r\nimport Link from 'next/link'\r\nimport {\r\n  getMyEvents,\r\n  getEventById,\r\n  getEventChecklist,\r\n  createEventChecklistItem,\r\n  updateEventChecklistItem,\r\n  deleteEventChecklistItem,\r\n  getEventProposals,\r\n  createEventProposal,\r\n  getEventProposalComments,\r\n  createEventProposalComment,\r\n  getMe,\r\n} from \"@/services/api\"\r\nimport type {\r\n  MyEventItem,\r\n  EventDetails,\r\n  EventChecklistItemResponse,\r\n  EventProposalResponse,\r\n  EventProposalCommentResponse,\r\n  UserMeResponse,\r\n} from \"@/services/api.types\"\r\nimport { useAuthGuard } from \"@/hooks/useAuthGuard\"\r\n\r\nexport default function DashboardPage() {\r\n  const { user, roles, loading } = useAuthGuard([]) // All authenticated users\r\n  const [activeTab, setActiveTab] = useState<'organizer' | 'expert'>('organizer')\r\n  const isExpert = roles?.includes('expert')\r\n\r\n  // Auto-switch to Expert tab if likely primary role\r\n  useEffect(() => {\r\n    if (loading) return\r\n    if (isExpert && !roles?.includes('student') && activeTab !== 'expert') {\r\n      setActiveTab('expert')\r\n    }\r\n  }, [isExpert, roles, activeTab, loading])\r\n\r\n  if (loading) return <div className=\"p-6\">Loading dashboard...</div>\r\n\r\n  return (\r\n    <div className=\"max-w-6xl mx-auto p-6 space-y-8\">\r\n      {/* Role Switcher */}\r\n      {(isExpert && roles?.includes('student')) && (\r\n        <div className=\"flex bg-gray-100 rounded-lg p-1 w-fit mb-6\">\r\n          <button\r\n            className={`px-4 py-2 rounded-md font-medium text-sm transition-all ${activeTab === 'organizer' ? 'bg-white shadow-sm text-gray-900' : 'text-gray-500 hover:text-gray-900'}`}\r\n            onClick={() => setActiveTab('organizer')}\r\n          >\r\n            Organizer / Student\r\n          </button>\r\n          <button\r\n            className={`px-4 py-2 rounded-md font-medium text-sm transition-all ${activeTab === 'expert' ? 'bg-white shadow-sm text-gray-900' : 'text-gray-500 hover:text-gray-900'}`}\r\n            onClick={() => setActiveTab('expert')}\r\n          >\r\n            Expert View\r\n          </button>\r\n        </div>\r\n      )}\r\n\r\n      {activeTab === 'expert' ? <ExpertDashboard /> : <OrganizerDashboard />}\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction ExpertDashboard() {\r\n  const [events, setEvents] = useState<MyEventItem[]>([])\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  useEffect(() => {\r\n    getMyEvents().then(setEvents).finally(() => setLoading(false))\r\n  }, [])\r\n\r\n  const pendingRequests = useMemo(() => events.filter(e => e.my_status === 'pending'), [events])\r\n  const confirmedSchedule = useMemo(() => events.filter(e => e.my_status === 'accepted'), [events])\r\n\r\n  if (loading) return <div>Loading...</div>\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      <h1 className=\"text-2xl font-semibold\">Expert Dashboard</h1>\r\n\r\n      {/* Notifications / Pending Requests */}\r\n      {pendingRequests.length > 0 && (\r\n        <div className=\"bg-yellow-50 border border-yellow-200 rounded-xl p-6\">\r\n          <h2 className=\"text-lg font-bold text-yellow-800 mb-4 flex items-center gap-2\">\r\n            <span className=\"flex h-3 w-3 relative\">\r\n              <span className=\"animate-ping absolute inline-flex h-full w-full rounded-full bg-yellow-400 opacity-75\"></span>\r\n              <span className=\"relative inline-flex rounded-full h-3 w-3 bg-yellow-500\"></span>\r\n            </span>\r\n            Pending Invitations ({pendingRequests.length})\r\n          </h2>\r\n          <div className=\"grid gap-4\">\r\n            {pendingRequests.map(evt => (\r\n              <div key={evt.event_id} className=\"bg-white p-4 rounded-lg border border-yellow-100 flex justify-between items-center shadow-sm\">\r\n                <div>\r\n                  <div className=\"font-bold text-gray-900\">{evt.title}</div>\r\n                  <div className=\"text-sm text-gray-600\">\r\n                    {new Date(evt.start_datetime).toLocaleString()}\r\n                  </div>\r\n                  <div className=\"text-xs text-yellow-600 mt-1 uppercase font-bold tracking-wide\">Action Required</div>\r\n                </div>\r\n                <Link href={`/main/requests/${evt.event_id}`} className=\"px-4 py-2 bg-yellow-500 text-white rounded-lg font-bold text-sm hover:bg-yellow-600\">\r\n                  View Request\r\n                </Link>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Confirmed Schedule */}\r\n      <div>\r\n        <h2 className=\"text-xl font-bold text-gray-900 mb-4\">Confirmed Schedule</h2>\r\n        {confirmedSchedule.length === 0 ? (\r\n          <div className=\"text-gray-500 bg-gray-50 p-6 rounded-lg text-center\">\r\n            No upcoming confirmed sessions.\r\n          </div>\r\n        ) : (\r\n          <div className=\"grid gap-4\">\r\n            {confirmedSchedule.map(evt => (\r\n              <div key={evt.event_id} className=\"bg-white p-4 rounded-xl border border-gray-200 flex justify-between items-center\">\r\n                <div>\r\n                  <div className=\"font-bold text-gray-900\">{evt.title}</div>\r\n                  <div className=\"text-sm text-gray-600\">\r\n                    {new Date(evt.start_datetime).toLocaleString()}\r\n                  </div>\r\n                </div>\r\n                <Link href={`/main/events/${evt.event_id}`} className=\"text-gray-500 hover:text-gray-900\">\r\n                  Details &rarr;\r\n                </Link>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction OrganizerDashboard() {\r\n  const [myEvents, setMyEvents] = useState<MyEventItem[]>([])\r\n  const [selectedEventId, setSelectedEventId] = useState<string>(\"\")\r\n  const [eventDetails, setEventDetails] = useState<EventDetails | null>(null)\r\n  const [checklist, setChecklist] = useState<EventChecklistItemResponse[]>([])\r\n  const [proposals, setProposals] = useState<EventProposalResponse[]>([])\r\n  const [selectedProposalId, setSelectedProposalId] = useState<string>(\"\")\r\n  const [proposalComments, setProposalComments] = useState<EventProposalCommentResponse[]>([])\r\n\r\n  const [newItemTitle, setNewItemTitle] = useState(\"\")\r\n  const [newItemDesc, setNewItemDesc] = useState(\"\")\r\n  const [newProposalUrl, setNewProposalUrl] = useState(\"\")\r\n  const [newProposalTitle, setNewProposalTitle] = useState(\"\")\r\n  const [newProposalDesc, setNewProposalDesc] = useState(\"\")\r\n  const [newComment, setNewComment] = useState(\"\")\r\n\r\n  useEffect(() => {\r\n    const load = async () => {\r\n      const me = await getMyEvents()\r\n      // Filter out events where I am just invited/pending?\r\n      // Organizer dashboard usually for events I ORGANIZE.\r\n      // But maybe also participation.\r\n      // Let's keep existing logic but sort/filter if needed.\r\n      // Ideally only show 'organizer' events in the management dropdown?\r\n      const organized = me.filter(e => e.my_role === 'organizer')\r\n      setMyEvents(organized.length > 0 ? organized : me) // Fallback if no organized events, show all\r\n      if (organized.length > 0) {\r\n        setSelectedEventId(organized[0].event_id)\r\n      } else if (me.length > 0) {\r\n        setSelectedEventId(me[0].event_id)\r\n      }\r\n    }\r\n    load()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const loadEvent = async () => {\r\n      if (!selectedEventId) return\r\n      const d = await getEventById(selectedEventId)\r\n      setEventDetails(d)\r\n      const cl = await getEventChecklist(selectedEventId)\r\n      setChecklist(cl)\r\n      const pr = await getEventProposals(selectedEventId)\r\n      setProposals(pr)\r\n      setSelectedProposalId(pr[0]?.id || \"\")\r\n      if (pr[0]) {\r\n        const cm = await getEventProposalComments(selectedEventId, pr[0].id)\r\n        setProposalComments(cm)\r\n      } else {\r\n        setProposalComments([])\r\n      }\r\n    }\r\n    loadEvent()\r\n  }, [selectedEventId])\r\n\r\n  const handleAddChecklist = async () => {\r\n    if (!selectedEventId || !newItemTitle.trim()) return\r\n    const created = await createEventChecklistItem(selectedEventId, {\r\n      title: newItemTitle,\r\n      description: newItemDesc || undefined,\r\n    })\r\n    setChecklist(prev => [...prev, created])\r\n    setNewItemTitle(\"\")\r\n    setNewItemDesc(\"\")\r\n  }\r\n\r\n  const toggleComplete = async (item: EventChecklistItemResponse) => {\r\n    const updated = await updateEventChecklistItem(selectedEventId, item.id, { is_completed: !item.is_completed })\r\n    setChecklist(prev => prev.map(i => (i.id === item.id ? updated : i)))\r\n  }\r\n\r\n  const deleteItem = async (item: EventChecklistItemResponse) => {\r\n    await deleteEventChecklistItem(selectedEventId, item.id)\r\n    setChecklist(prev => prev.filter(i => i.id !== item.id))\r\n  }\r\n\r\n  const handleCreateProposal = async () => {\r\n    if (!selectedEventId) return\r\n    const created = await createEventProposal(selectedEventId, {\r\n      title: newProposalTitle || undefined,\r\n      description: newProposalDesc || undefined,\r\n      file_url: newProposalUrl || undefined,\r\n    })\r\n    const pr = await getEventProposals(selectedEventId)\r\n    setProposals(pr)\r\n    setSelectedProposalId(created.id)\r\n    setNewProposalUrl(\"\")\r\n    setNewProposalTitle(\"\")\r\n    setNewProposalDesc(\"\")\r\n  }\r\n\r\n  const handleSelectProposal = async (pid: string) => {\r\n    setSelectedProposalId(pid)\r\n    if (pid) {\r\n      const cm = await getEventProposalComments(selectedEventId, pid)\r\n      setProposalComments(cm)\r\n    } else {\r\n      setProposalComments([])\r\n    }\r\n  }\r\n\r\n  const handleAddComment = async () => {\r\n    if (!selectedEventId || !selectedProposalId || !newComment.trim()) return\r\n    await createEventProposalComment(selectedEventId, selectedProposalId, { content: newComment })\r\n    const cm = await getEventProposalComments(selectedEventId, selectedProposalId)\r\n    setProposalComments(cm)\r\n    setNewComment(\"\")\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-8\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-semibold\">Organizer Dashboard</h1>\r\n          {/* Find Expert Quick Action */}\r\n          <Link href=\"/main/experts\" className=\"text-sm text-yellow-600 hover:text-yellow-700 font-bold mt-1 inline-block\">\r\n             Find & Book Expert\r\n          </Link>\r\n        </div>\r\n        <select\r\n          value={selectedEventId}\r\n          onChange={(e) => setSelectedEventId(e.target.value)}\r\n          className=\"border rounded px-3 py-2\"\r\n        >\r\n          {myEvents.map(me => (\r\n            <option key={me.event_id} value={me.event_id}>\r\n              {me.title}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n\r\n      {myEvents.length === 0 && (\r\n        <div className=\"text-center py-10 bg-gray-50 rounded-xl\">\r\n          <p className=\"text-gray-500 mb-4\">You haven&apos;t organized any events yet.</p>\r\n          <Link href=\"/main/events/create\" className=\"px-4 py-2 bg-yellow-500 text-white rounded-lg font-bold\">\r\n            Create Event\r\n          </Link>\r\n        </div>\r\n      )}\r\n\r\n      {eventDetails && (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n          <div className=\"md:col-span-2 border rounded-lg p-4\">\r\n            <div className=\"flex items-center justify-between mb-2\">\r\n              <div>\r\n                <div className=\"text-lg font-medium\">{eventDetails.title}</div>\r\n                <div className=\"text-sm text-gray-600\">\r\n                  {new Date(eventDetails.start_datetime).toLocaleString()}  {new Date(eventDetails.end_datetime).toLocaleString()}\r\n                </div>\r\n              </div>\r\n              <span className=\"text-xs px-2 py-1 rounded bg-gray-100 capitalize\">{eventDetails.status}</span>\r\n            </div>\r\n            {eventDetails.description && (\r\n              <p className=\"text-gray-700 text-sm\">{eventDetails.description}</p>\r\n            )}\r\n            <div className=\"mt-3 text-xs text-gray-600 capitalize\">\r\n              Format: {eventDetails.format.replace('_', ' ')}  Type: {eventDetails.type}  Registration: {eventDetails.registration_type}  Visibility: {eventDetails.visibility}\r\n            </div>\r\n          </div>\r\n          <div className=\"border rounded-lg p-4\">\r\n            <div className=\"font-medium mb-2\">Quick Create Proposal</div>\r\n            <div className=\"space-y-2\">\r\n              <input className=\"w-full border rounded px-3 py-2\" placeholder=\"file_url\" value={newProposalUrl} onChange={e => setNewProposalUrl(e.target.value)} />\r\n              <input className=\"w-full border rounded px-3 py-2\" placeholder=\"title (optional)\" value={newProposalTitle} onChange={e => setNewProposalTitle(e.target.value)} />\r\n              <textarea className=\"w-full border rounded px-3 py-2\" placeholder=\"description (optional)\" value={newProposalDesc} onChange={e => setNewProposalDesc(e.target.value)} />\r\n              <button className=\"w-full border rounded px-3 py-2 hover:bg-gray-50\" onClick={handleCreateProposal}>Create</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {eventDetails && (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n          <div className=\"border rounded-lg p-4\">\r\n            <div className=\"flex items-center justify-between mb-3\">\r\n              <div className=\"font-medium\">Checklist</div>\r\n              <div className=\"flex gap-2\">\r\n                <input className=\"border rounded px-2 py-1\" placeholder=\"title\" value={newItemTitle} onChange={e => setNewItemTitle(e.target.value)} />\r\n                <input className=\"border rounded px-2 py-1\" placeholder=\"description\" value={newItemDesc} onChange={e => setNewItemDesc(e.target.value)} />\r\n                <button className=\"border rounded px-3 py-1\" onClick={handleAddChecklist}>Add</button>\r\n              </div>\r\n            </div>\r\n            <ul className=\"divide-y\">\r\n              {checklist.map(item => (\r\n                <li key={item.id} className=\"py-2 flex items-center justify-between\">\r\n                  <div>\r\n                    <div className=\"text-sm font-medium\">{item.title}</div>\r\n                    {item.description && <div className=\"text-xs text-gray-600\">{item.description}</div>}\r\n                  </div>\r\n                  <div className=\"flex items-center gap-2 text-sm\">\r\n                    <button className=\"px-2 py-1 rounded border\" onClick={() => toggleComplete(item)}>\r\n                      {item.is_completed ? 'Mark Incomplete' : 'Mark Complete'}\r\n                    </button>\r\n                    <button className=\"px-2 py-1 rounded border\" onClick={() => deleteItem(item)}>Delete</button>\r\n                  </div>\r\n                </li>\r\n              ))}\r\n              {checklist.length === 0 && (\r\n                <li className=\"py-2 text-sm text-gray-600\">No checklist items yet.</li>\r\n              )}\r\n            </ul>\r\n          </div>\r\n\r\n          <div className=\"border rounded-lg p-4\">\r\n            <div className=\"font-medium mb-3\">Proposals</div>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <div>\r\n                <ul className=\"divide-y\">\r\n                  {proposals.map(pr => (\r\n                    <li key={pr.id} className={`py-2 cursor-pointer ${selectedProposalId === pr.id ? 'bg-gray-50' : ''}`} onClick={() => handleSelectProposal(pr.id)}>\r\n                      <div className=\"text-sm font-medium\">{pr.title || eventDetails?.title}</div>\r\n                      {pr.file_url && <div className=\"text-xs text-gray-600 truncate\">{pr.file_url}</div>}\r\n                    </li>\r\n                  ))}\r\n                  {proposals.length === 0 && (\r\n                    <li className=\"py-2 text-sm text-gray-600\">No proposals yet.</li>\r\n                  )}\r\n                </ul>\r\n              </div>\r\n              <div>\r\n                <div className=\"font-medium mb-2\">Comments</div>\r\n                <ul className=\"space-y-2 max-h-64 overflow-auto border rounded p-2\">\r\n                  {proposalComments.map(c => (\r\n                    <li key={c.id} className=\"text-sm\">\r\n                      <div>{c.content}</div>\r\n                      <div className=\"text-xs text-gray-500\">{new Date(c.created_at).toLocaleString()}</div>\r\n                    </li>\r\n                  ))}\r\n                  {proposalComments.length === 0 && (\r\n                    <li className=\"text-sm text-gray-600\">No comments yet.</li>\r\n                  )}\r\n                </ul>\r\n                <div className=\"mt-2 flex gap-2\">\r\n                  <input className=\"flex-1 border rounded px-2 py-1\" placeholder=\"Write a comment\" value={newComment} onChange={e => setNewComment(e.target.value)} />\r\n                  <button className=\"border rounded px-3 py-1\" onClick={handleAddChecklist}>Send</button> {/* BUG: handleAddChecklist here? Should be handleAddComment */}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\main\\dev\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":9,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":9,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[305,308],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[305,308],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":46,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":49,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[454,457],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[454,457],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\main\\events\\[id]\\bulk-invite\\page.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":102,"column":18,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[3807,3892],"text":"\r\n          You don&apos;t have permission to invite participants to this event.\r\n        "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[3807,3892],"text":"\r\n          You don&lsquo;t have permission to invite participants to this event.\r\n        "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[3807,3892],"text":"\r\n          You don&#39;t have permission to invite participants to this event.\r\n        "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[3807,3892],"text":"\r\n          You don&rsquo;t have permission to invite participants to this event.\r\n        "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":34,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1464,1467],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1464,1467],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":81,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":81,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3214,3217],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3214,3217],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\nimport { useEffect, useState } from 'react'\r\nimport { useParams, useRouter } from 'next/navigation'\r\nimport { getEventById, getEventParticipants, bulkInviteEventParticipants } from '@/services/api'\r\nimport type { EventDetails, EventParticipantCreate, EventParticipantDetails } from '@/services/api.types'\r\nimport { useUser } from '@/hooks/useUser'\r\n\r\nexport default function BulkInvitePage() {\r\n  const params = useParams<{ id: string }>()\r\n  const eventId = params?.id\r\n  const router = useRouter()\r\n  const { user } = useUser()\r\n  const [event, setEvent] = useState<EventDetails | null>(null)\r\n  const [participants, setParticipants] = useState<EventParticipantDetails[] | null>(null)\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState<string | null>(null)\r\n  const [inviteItems, setInviteItems] = useState<EventParticipantCreate[]>([{ user_id: '', role: 'audience' }])\r\n  const [inviting, setInviting] = useState(false)\r\n\r\n  useEffect(() => {\r\n    const run = async () => {\r\n      if (!eventId) return\r\n      try {\r\n        const data = await getEventById(eventId as string)\r\n        setEvent(data)\r\n        try {\r\n          const parts = await getEventParticipants(eventId as string)\r\n          setParticipants(parts)\r\n        } catch {\r\n          setParticipants(null)\r\n        }\r\n      } catch (err: unknown) {\r\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n        setError((err as any)?.response?.data?.detail || 'Failed to load event')\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n    run()\r\n  }, [eventId])\r\n\r\n  const canInvite = (() => {\r\n    if (!event || !user) return false\r\n    if (event.organizer_id === user.user_id) return true\r\n    if (!participants) return false\r\n    return participants.some(p => p.user_id === user.user_id && p.role === 'committee')\r\n  })()\r\n\r\n  const setInviteItemField = (index: number, key: keyof EventParticipantCreate, value: string) => {\r\n    setInviteItems(prev => {\r\n      const next = [...prev]\r\n      // @ts-expect-error runtime assignment\r\n      next[index][key] = value\r\n      return next\r\n    })\r\n  }\r\n  const addInviteRow = () => setInviteItems(prev => [...prev, { user_id: '', role: 'audience' }])\r\n  const removeInviteRow = (index: number) => setInviteItems(prev => prev.filter((_, i) => i !== index))\r\n\r\n  const submitBulkInvite = async () => {\r\n    if (!eventId) return\r\n    const cleaned = inviteItems\r\n      .map(item => ({ user_id: item.user_id.trim(), role: item.role }))\r\n      .filter(item => item.user_id.length > 0)\r\n    if (cleaned.length === 0) {\r\n      alert('Please add at least one user id to invite')\r\n      return\r\n    }\r\n    const invalidRole = cleaned.some(i => i.role !== 'speaker' && i.role !== 'audience')\r\n    if (invalidRole) {\r\n      alert(\"Only 'speaker' or 'audience' roles are allowed for bulk invite\")\r\n      return\r\n    }\r\n    setInviting(true)\r\n    try {\r\n      await bulkInviteEventParticipants(eventId as string, { items: cleaned })\r\n      alert('Invitations sent')\r\n      router.push(`/main/events/${eventId}`)\r\n    } catch (err: unknown) {\r\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n      alert((err as any)?.response?.data?.detail || 'Failed to send invitations')\r\n    } finally {\r\n      setInviting(false)\r\n    }\r\n  }\r\n\r\n  if (loading) {\r\n    return <div className=\"p-6\">Loading...</div>\r\n  }\r\n  if (error) {\r\n    return <div className=\"p-6 text-red-600\">Error: {error}</div>\r\n  }\r\n  if (!event) {\r\n    return <div className=\"p-6\">Event not found</div>\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      <h1 className=\"text-2xl font-bold\">Bulk invite to: {event.title}</h1>\r\n      {!canInvite && (\r\n        <div className=\"p-4 bg-yellow-50 border border-yellow-200 text-yellow-800\">\r\n          You don't have permission to invite participants to this event.\r\n        </div>\r\n      )}\r\n      {canInvite && (\r\n        <div className=\"border rounded p-4\">\r\n          <h3 className=\"font-semibold mb-2\">Add user IDs and select role (speaker or audience)</h3>\r\n          <div className=\"space-y-3\">\r\n            {inviteItems.map((item, idx) => (\r\n              <div key={idx} className=\"flex items-center gap-2\">\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"border px-2 py-1 flex-1\"\r\n                  placeholder=\"User ID (UUID)\"\r\n                  value={item.user_id}\r\n                  onChange={e => setInviteItemField(idx, 'user_id', e.target.value)}\r\n                />\r\n                <select\r\n                  className=\"border px-2 py-1\"\r\n                  value={item.role}\r\n                  onChange={e => setInviteItemField(idx, 'role', e.target.value)}\r\n                >\r\n                  <option value=\"audience\">Audience</option>\r\n                  <option value=\"speaker\">Speaker</option>\r\n                </select>\r\n                <button type=\"button\" className=\"text-red-600\" onClick={() => removeInviteRow(idx)}>\r\n                  Remove\r\n                </button>\r\n              </div>\r\n            ))}\r\n            <div className=\"flex gap-2\">\r\n              <button type=\"button\" className=\"border px-3 py-1\" onClick={addInviteRow}>\r\n                Add row\r\n              </button>\r\n              <button type=\"button\" className=\"bg-blue-600 text-white px-3 py-1\" disabled={inviting} onClick={submitBulkInvite}>\r\n                {inviting ? 'Inviting...' : 'Send invitations'}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  )\r\n}","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\main\\events\\[id]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'router' is assigned a value but never used.","line":13,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleResponse' is assigned a value but never used.","line":47,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":47,"endColumn":25},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":132,"column":41,"nodeType":"JSXOpeningElement","endLine":136,"endColumn":43}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useParams, useRouter } from 'next/navigation'\r\nimport { getEventById, getEventParticipants, respondInvitationMe, getMe } from '@/services/api'\r\nimport { EventDetails, UserMeResponse, EventParticipantDetails } from '@/services/api.types'\r\nimport { toast } from 'react-hot-toast'\r\nimport Link from 'next/link'\r\nimport { EventHeroCard } from '@/components/ui/EventHeroCard'\r\n\r\nexport default function EventDetailsPage() {\r\n    const params = useParams()\r\n    const router = useRouter()\r\n    const eventId = params.id as string\r\n\r\n    const [event, setEvent] = useState<EventDetails | null>(null)\r\n    const [participants, setParticipants] = useState<EventParticipantDetails[]>([])\r\n    const [myParticipant, setMyParticipant] = useState<EventParticipantDetails | null>(null)\r\n    const [loading, setLoading] = useState(true)\r\n    const [user, setUser] = useState<UserMeResponse | null>(null)\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            try {\r\n                const [evt, parts, me] = await Promise.all([\r\n                    getEventById(eventId),\r\n                    getEventParticipants(eventId),\r\n                    getMe().catch(() => null)\r\n                ])\r\n                setEvent(evt)\r\n                setParticipants(parts)\r\n                setUser(me)\r\n                if (me) {\r\n                    const found = parts.find(p => p.user_id === me.id)\r\n                    setMyParticipant(found || null)\r\n                }\r\n            } catch (error) {\r\n                console.error(error)\r\n                toast.error('Failed to load event details')\r\n            } finally {\r\n                setLoading(false)\r\n            }\r\n        }\r\n        if (eventId) fetchData()\r\n    }, [eventId])\r\n\r\n    const handleResponse = async (status: 'accepted' | 'rejected') => {\r\n        try {\r\n            await respondInvitationMe(eventId, { status })\r\n            toast.success(`Invitation ${status}`)\r\n            // Refresh\r\n            const parts = await getEventParticipants(eventId)\r\n            setParticipants(parts)\r\n            if (user) {\r\n                const found = parts.find(p => p.user_id === user.id)\r\n                setMyParticipant(found || null)\r\n            }\r\n        } catch (error) {\r\n            console.error(error)\r\n            toast.error('Failed to update status')\r\n        }\r\n    }\r\n\r\n    if (loading) return <div className=\"p-6\">Loading...</div>\r\n    if (!event) return <div className=\"p-6\">Event not found</div>\r\n\r\n    // Expert View: Pending Invitation (Disabled for testing public view)\r\n    // if (myParticipant?.status === 'pending') { ... } \r\n\r\n    // Normal Event Page\r\n    // Find organizer\r\n    const organizer = participants.find(p => p.role === 'organizer')\r\n\r\n    return (\r\n        <div className=\"max-w-[1400px] mx-auto p-4 md:p-8 animate-fadeIn\">\r\n            <div className=\"mb-8\">\r\n                <Link href=\"/main/events\" className=\"text-zinc-500 hover:text-zinc-900 mb-6 inline-flex items-center gap-2 font-medium transition-colors\">\r\n                    <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M10 19l-7-7m0 0l7-7m-7 7h18\" /></svg>\r\n                    Back to Events\r\n                </Link>\r\n\r\n                {/* Hero Card */}\r\n                <div className=\"mb-12\">\r\n                    <EventHeroCard event={event} enableImagePreview />\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-12\">\r\n                    {/* Left Column: About */}\r\n                    <div className=\"lg:col-span-8 space-y-10\">\r\n                        {/* Status for My Participant */}\r\n                        {myParticipant && (\r\n                            <div className=\"flex items-center justify-between bg-white p-6 rounded-2xl border border-zinc-100 shadow-sm\">\r\n                                <span className=\"text-zinc-500 font-medium\">Your Status</span>\r\n                                <span className={`px-4 py-1.5 rounded-full text-sm font-bold uppercase tracking-wide border ${myParticipant.status === 'accepted' ? 'bg-green-100 text-green-700 border-green-200' :\r\n                                    myParticipant.status === 'rejected' ? 'bg-red-100 text-red-700 border-red-200' :\r\n                                        'bg-zinc-100 text-zinc-600 border-zinc-200'\r\n                                    }`}>\r\n                                    {myParticipant.status}\r\n                                </span>\r\n                            </div>\r\n                        )}\r\n\r\n                        <div className=\"space-y-6\">\r\n                            <div className=\"flex items-center gap-4\">\r\n                                <div className=\"h-1 w-10 bg-yellow-400 rounded-full\"></div>\r\n                                <h3 className=\"text-xl font-black text-zinc-900 uppercase tracking-wide\">About This Event</h3>\r\n                            </div>\r\n                            <div className=\"prose prose-lg max-w-none text-zinc-600 leading-relaxed\">\r\n                                <p className=\"whitespace-pre-wrap\">{event.description}</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Right Column: Register & Organizer */}\r\n                    <div className=\"lg:col-span-4 space-y-8\">\r\n                        {/* Register Card */}\r\n                        <div className=\"bg-white p-6 rounded-2xl border border-zinc-100 shadow-xl shadow-zinc-200/50\">\r\n                            <button\r\n                                className=\"w-full bg-yellow-400 text-zinc-900 font-black py-4 rounded-xl hover:bg-yellow-500 transition-all shadow-lg hover:shadow-xl active:scale-95 text-lg\"\r\n                                onClick={() => {/* Handle registration logic */ }}\r\n                            >\r\n                                Register Now\r\n                            </button>\r\n                        </div>\r\n\r\n                        {/* Organizer Card */}\r\n                        <div>\r\n                            <h4 className=\"text-xs font-bold text-zinc-500 uppercase tracking-wider mb-4 px-2\">Organizer</h4>\r\n                            <div className=\"bg-white p-4 rounded-2xl border border-zinc-200 flex items-center gap-4 shadow-sm hover:shadow-md transition-shadow cursor-pointer\">\r\n                                <div className=\"w-12 h-12 rounded-full bg-zinc-100 flex items-center justify-center text-xl font-bold text-zinc-400 overflow-hidden\">\r\n                                    {organizer ? (\r\n                                        <img\r\n                                            src={`https://ui-avatars.com/api/?name=${organizer.user_id}&background=random`}\r\n                                            alt=\"Org\"\r\n                                            className=\"w-full h-full object-cover\"\r\n                                        />\r\n                                    ) : 'O'}\r\n                                </div>\r\n                                <div>\r\n                                    <p className=\"font-bold text-zinc-900\">Event Host</p>\r\n                                    <p className=\"text-xs text-zinc-500 font-medium\">View Profile</p>\r\n                                </div>\r\n                                <div className=\"ml-auto w-8 h-8 rounded-full bg-zinc-50 flex items-center justify-center text-zinc-400\">\r\n                                    <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" /></svg>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\main\\events\\create\\page.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":85,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":85,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3473,3476],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3473,3476],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\main\\events\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\main\\experts\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\main\\organizations\\[id]\\page.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":50,"column":30,"nodeType":"JSXOpeningElement","endLine":50,"endColumn":106},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":53,"column":33,"nodeType":"JSXOpeningElement","endLine":53,"endColumn":126}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useParams } from 'next/navigation'\r\nimport { getOrganizationById } from '@/services/api'\r\nimport { OrganizationResponse } from '@/services/api.types'\r\nimport { toast } from 'react-hot-toast'\r\nimport { AppNavbar } from '@/components/ui/AppNavbar'\r\n\r\nexport default function OrganizationDetailPage() {\r\n  const params = useParams()\r\n  const orgId = params.id as string\r\n\r\n  const [org, setOrg] = useState<OrganizationResponse | null>(null)\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState<string | null>(null)\r\n\r\n  useEffect(() => {\r\n    if (!orgId) return\r\n    const run = async () => {\r\n      try {\r\n        const data = await getOrganizationById(orgId)\r\n        setOrg(data)\r\n      } catch (error: unknown) {\r\n        const e = error as { response?: { status?: number; data?: { detail?: string } } }\r\n        if (e.response?.status === 401) {\r\n          localStorage.removeItem('atas_token')\r\n          window.location.href = '/login'\r\n          return\r\n        }\r\n        const msg = e.response?.data?.detail || 'Failed to load organization'\r\n        setError(msg)\r\n        toast.error(msg)\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n    run()\r\n  }, [orgId])\r\n\r\n  if (loading) return <div className=\"min-h-screen bg-amber-50\"><AppNavbar /><div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 text-sm text-zinc-500\">Loading...</div></div>\r\n  if (error) return <div className=\"min-h-screen bg-amber-50\"><AppNavbar /><div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 text-sm text-red-600\">{error}</div></div>\r\n  if (!org) return <div className=\"min-h-screen bg-amber-50\"><AppNavbar /><div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 text-sm text-zinc-500\">Organization not found.</div></div>\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-amber-50\">\r\n      <AppNavbar />\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10\">\r\n        <div className=\"bg-white rounded-[2rem] shadow-sm border border-zinc-100 overflow-hidden\">\r\n          {org.cover_url && (<img src={org.cover_url} alt=\"cover\" className=\"w-full h-56 object-cover\" />)}\r\n          <div className=\"px-6 py-6\">\r\n            <div className=\"flex items-center gap-4 mb-4\">\r\n              {org.logo_url && (<img src={org.logo_url} alt=\"logo\" className=\"h-16 w-16 rounded-lg ring-2 ring-yellow-400\" />)}\r\n              <div>\r\n                <h1 className=\"text-2xl font-black text-zinc-900\">{org.name}</h1>\r\n                {org.type && (<span className=\"text-xs font-bold text-zinc-400 uppercase tracking-wider\">{org.type}</span>)}\r\n              </div>\r\n            </div>\r\n            {org.description && (<p className=\"text-zinc-700 mb-4\">{org.description}</p>)}\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm\">\r\n              {org.website_url && (\r\n                <div><span className=\"font-bold text-zinc-700\">Website:</span> <a href={org.website_url} className=\"text-yellow-600 font-bold\" target=\"_blank\" rel=\"noreferrer\">{org.website_url}</a></div>\r\n              )}\r\n              {org.location && (\r\n                <div><span className=\"font-bold text-zinc-700\">Location:</span> <span className=\"text-zinc-800\">{org.location}</span></div>\r\n              )}\r\n              <div><span className=\"font-bold text-zinc-700\">Visibility:</span> <span className=\"text-zinc-800\">{org.visibility}</span></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\main\\organizations\\page.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":65,"column":41,"nodeType":"JSXOpeningElement","endLine":65,"endColumn":111}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport React, { useEffect, useState } from 'react'\r\nimport Link from 'next/link'\r\nimport { getPublicOrganizations } from '@/services/api'\r\nimport { OrganizationResponse } from '@/services/api.types'\r\nimport { toast } from 'react-hot-toast'\r\nimport { AppNavbar } from '@/components/ui/AppNavbar'\r\n\r\nexport default function OrganizationsPage() {\r\n  const [items, setItems] = useState<OrganizationResponse[]>([])\r\n  const [loading, setLoading] = useState(true)\r\n  const [query, setQuery] = useState('')\r\n\r\n  useEffect(() => {\r\n    const run = async () => {\r\n      try {\r\n        const data = await getPublicOrganizations()\r\n        setItems(data)\r\n      } catch (error: unknown) {\r\n        const e = error as { response?: { data?: { detail?: string } } }\r\n        toast.error(e.response?.data?.detail || 'Failed to load organizations')\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n    run()\r\n  }, [])\r\n\r\n  const filtered = items.filter(o => o.name.toLowerCase().includes(query.toLowerCase()))\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-amber-50\">\r\n      <AppNavbar />\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10\">\r\n        <h1 className=\"text-2xl font-black text-zinc-900 mb-6\">Organizations</h1>\r\n\r\n        <div className=\"mb-6\">\r\n          <div className=\"relative max-w-xl\">\r\n            <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none\">\r\n              <svg className=\"h-5 w-5 text-zinc-400\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" aria-hidden=\"true\">\r\n                <path fillRule=\"evenodd\" d=\"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z\" clipRule=\"evenodd\" />\r\n              </svg>\r\n            </div>\r\n            <input\r\n              type=\"text\"\r\n              className=\"block w-full pl-11 pr-4 py-4 bg-white border-transparent rounded-2xl text-zinc-900 placeholder-zinc-400 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:bg-white shadow-sm transition-all duration-200 font-medium\"\r\n              placeholder=\"Search organizations by name\"\r\n              value={query}\r\n              onChange={(e) => setQuery(e.target.value)}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {loading ? (\r\n          <div className=\"text-sm text-zinc-500\">Loading...</div>\r\n        ) : (\r\n          <div className=\"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3\">\r\n            {filtered.map((org) => (\r\n              <Link key={org.id} href={`/main/organizations/${org.id}`} className=\"block group\">\r\n                <div className=\"bg-white overflow-hidden shadow-sm rounded-[2rem] hover:shadow-xl transition-all duration-300 border border-zinc-100 group-hover:-translate-y-1\">\r\n                  <div className=\"h-3 bg-yellow-400\"></div>\r\n                  <div className=\"px-6 py-6\">\r\n                    <div className=\"flex items-center gap-3 mb-4\">\r\n                      {org.logo_url && (<img src={org.logo_url} alt=\"logo\" className=\"h-10 w-10 rounded-lg\" />)}\r\n                      <div>\r\n                        <h3 className=\"text-lg font-black text-zinc-900 truncate group-hover:text-yellow-600 transition-colors\">{org.name}</h3>\r\n                        {org.type && (<span className=\"text-xs font-bold text-zinc-400 uppercase tracking-wider\">{org.type}</span>)}\r\n                      </div>\r\n                    </div>\r\n                    {org.description && (\r\n                      <p className=\"text-sm text-zinc-700 line-clamp-3\">{org.description}</p>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </Link>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\main\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\main\\profile\\[id]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'router' is assigned a value but never used.","line":15,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":17},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":126,"column":25,"nodeType":"JSXOpeningElement","endLine":130,"endColumn":27},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":144,"column":37,"nodeType":"JSXOpeningElement","endLine":148,"endColumn":39},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":314,"column":102,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[20613,20649],"text":"You don&apos;t have any organized events."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[20613,20649],"text":"You don&lsquo;t have any organized events."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[20613,20649],"text":"You don&#39;t have any organized events."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[20613,20649],"text":"You don&rsquo;t have any organized events."},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":52,"column":40,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":52,"endColumn":43,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2272,2275],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2272,2275],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":87,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":87,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3570,3573],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3570,3573],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":1,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport React, { useState, useEffect, Fragment } from 'react'\r\nimport { useParams, useRouter } from 'next/navigation'\r\nimport Link from 'next/link'\r\nimport { getProfileByUserId, getReviewsByUser, getPublicEvents, getMyEvents, inviteEventParticipant } from '@/services/api'\r\nimport { ProfileResponse, ReviewResponse, EventDetails, MyEventItem } from '@/services/api.types'\r\nimport { toast } from 'react-hot-toast'\r\nimport { Dialog, Transition } from '@headlessui/react'\r\nimport { EventCard } from '@/components/ui/EventCard'\r\nimport { Button } from '@/components/ui/Button'\r\n\r\nexport default function PublicProfilePage() {\r\n    const params = useParams()\r\n    const router = useRouter()\r\n    const userId = params.id as string\r\n\r\n    const [profile, setProfile] = useState<ProfileResponse | null>(null)\r\n    const [isLoading, setIsLoading] = useState(true)\r\n    const [error, setError] = useState<string | null>(null)\r\n    const [reviews, setReviews] = useState<ReviewResponse[]>([])\r\n\r\n    // Event State\r\n    const [organizedEvents, setOrganizedEvents] = useState<EventDetails[]>([])\r\n\r\n    // Invite State\r\n    const [showInviteModal, setShowInviteModal] = useState(false)\r\n    const [myEvents, setMyEvents] = useState<MyEventItem[]>([])\r\n    const [selectedEventId, setSelectedEventId] = useState<string>('')\r\n    const [inviting, setInviting] = useState(false)\r\n\r\n    useEffect(() => {\r\n        if (userId) {\r\n            const fetchProfile = async () => {\r\n                try {\r\n                    const [profileData, eventsData] = await Promise.all([\r\n                        getProfileByUserId(userId),\r\n                        getPublicEvents()\r\n                    ])\r\n                    setProfile(profileData)\r\n\r\n                    // Filter Organized Events\r\n                    const userEvents = eventsData.filter(e => e.organizer_id === userId)\r\n                    setOrganizedEvents(userEvents)\r\n\r\n                    try {\r\n                        const revs = await getReviewsByUser(userId)\r\n                        setReviews(revs)\r\n                    } catch { }\r\n                } catch (error: unknown) {\r\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n                    setError((error as any).response?.data?.detail || 'Failed to load profile.')\r\n                } finally {\r\n                    setIsLoading(false)\r\n                }\r\n            }\r\n            fetchProfile()\r\n        }\r\n    }, [userId])\r\n\r\n    // Fetch my events when opening modal\r\n    useEffect(() => {\r\n        if (showInviteModal) {\r\n            getMyEvents()\r\n                .then(events => {\r\n                    // Only show events where I am organizer\r\n                    setMyEvents(events.filter(e => e.my_role === 'organizer'))\r\n                })\r\n                .catch(() => toast.error('Failed to load your events'))\r\n        }\r\n    }, [showInviteModal])\r\n\r\n    const handleInvite = async () => {\r\n        if (!selectedEventId) return\r\n        setInviting(true)\r\n        try {\r\n            await inviteEventParticipant(selectedEventId, {\r\n                user_id: userId,\r\n                role: 'speaker', // Defaulting to speaker as per user request\r\n                description: 'Invited via Profile'\r\n            })\r\n            toast.success('Invitation sent successfully!')\r\n            setShowInviteModal(false)\r\n        } catch (error: unknown) {\r\n            console.error(error)\r\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n            toast.error((error as any).response?.data?.detail || 'Failed to send invitation')\r\n        } finally {\r\n            setInviting(false)\r\n        }\r\n    }\r\n\r\n    if (isLoading) {\r\n        return (\r\n            <div className=\"min-h-screen flex items-center justify-center bg-amber-50\">\r\n                <div className=\"animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-yellow-400\"></div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    if (error || !profile) {\r\n        return (\r\n            <div className=\"min-h-screen flex items-center justify-center bg-amber-50\">\r\n                <div className=\"text-center\">\r\n                    <div className=\"bg-white p-8 rounded-[2rem] shadow-sm border border-zinc-100 max-w-md mx-auto\">\r\n                        <div className=\"h-20 w-20 bg-red-50 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                            <svg className=\"w-10 h-10 text-red-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\r\n                            </svg>\r\n                        </div>\r\n                        <h3 className=\"text-xl font-black text-zinc-900 mb-2\">Profile Not Found</h3>\r\n                        <p className=\"text-zinc-500\">{error || \"This profile doesn't exist or is private.\"}</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-amber-50 pb-20\">\r\n            <div className=\"max-w-4xl mx-auto pt-6 px-4 sm:px-6 lg:px-8\">\r\n\r\n                {/* Cover Image */}\r\n                <div className=\"relative h-64 sm:h-80 rounded-[2.5rem] overflow-hidden shadow-sm group\">\r\n                    {profile.cover_url ? (\r\n                        <img\r\n                            src={profile.cover_url}\r\n                            alt=\"Cover\"\r\n                            className=\"w-full h-full object-cover\"\r\n                        />\r\n                    ) : (\r\n                        <div className=\"w-full h-full bg-yellow-400 flex items-center justify-center\">\r\n                            <div className=\"text-zinc-900/10 text-9xl font-black select-none\">ATAS</div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                <div className=\"relative px-6 sm:px-10 -mt-20\">\r\n                    <div className=\"flex flex-col sm:flex-row items-center sm:items-end gap-6\">\r\n                        {/* Avatar */}\r\n                        <div className=\"relative group\">\r\n                            <div className=\"h-40 w-40 rounded-[2rem] ring-8 ring-amber-50 bg-white overflow-hidden shadow-xl\">\r\n                                {profile.avatar_url ? (\r\n                                    <img\r\n                                        src={profile.avatar_url}\r\n                                        alt={profile.full_name}\r\n                                        className=\"w-full h-full object-cover\"\r\n                                    />\r\n                                ) : (\r\n                                    <div className=\"w-full h-full bg-zinc-900 flex items-center justify-center text-5xl text-yellow-400 font-bold\">\r\n                                        {profile.full_name.charAt(0)}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Name & Bio */}\r\n                        <div className=\"flex-1 pb-4 text-center sm:text-left space-y-4\">\r\n                            <div>\r\n                                <h1 className=\"text-4xl font-black text-zinc-900 tracking-tight mb-1\">{profile.full_name}</h1>\r\n                                {/* We don't have email/role in public profile response currently, so skipping */}\r\n                                <p className=\"text-lg text-zinc-600 font-medium max-w-2xl\">{profile.bio || 'No bio provided.'}</p>\r\n                            </div>\r\n\r\n                            <div className=\"flex flex-wrap gap-3 justify-center sm:justify-start\">\r\n                                <Link\r\n                                    href={`/main/book/${userId}`}\r\n                                    className=\"inline-flex items-center gap-2 px-6 py-3 bg-yellow-400 text-zinc-900 rounded-xl font-bold hover:bg-yellow-500 transition-all shadow-md active:scale-95\"\r\n                                >\r\n                                    <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" /></svg>\r\n                                    Book Expert\r\n                                </Link>\r\n                                <button\r\n                                    onClick={() => setShowInviteModal(true)}\r\n                                    className=\"inline-flex items-center gap-2 px-6 py-3 bg-zinc-900 text-yellow-400 rounded-xl font-bold hover:bg-zinc-800 transition-all shadow-md active:scale-95\"\r\n                                >\r\n                                    <svg className=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z\" />\r\n                                    </svg>\r\n                                    Invite to Speak\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Event Highlights Section */}\r\n                <div className=\"mt-12 space-y-8\">\r\n                    {/* Organized Events */}\r\n                    {organizedEvents.length > 0 && (\r\n                        <div>\r\n                            <div className=\"flex items-center gap-3 mb-6\">\r\n                                <div className=\"h-10 w-10 bg-yellow-100 rounded-full flex items-center justify-center text-yellow-600\">\r\n                                    <svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10\" />\r\n                                    </svg>\r\n                                </div>\r\n                                <h2 className=\"text-2xl font-black text-zinc-900\">Events Organized</h2>\r\n                            </div>\r\n                            <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-6\">\r\n                                {organizedEvents.map(event => (\r\n                                    <EventCard key={event.id} event={event} />\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Social Links */}\r\n                <div className=\"mt-12 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                    {[\r\n                        { url: profile.website_url, label: 'Website', icon: 'M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9' },\r\n                        { url: profile.github_url, label: 'GitHub', icon: 'M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z' },\r\n                        { url: profile.linkedin_url, label: 'LinkedIn', icon: 'M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z' },\r\n                        { url: profile.twitter_url, label: 'Twitter', icon: 'M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z' },\r\n                        { url: profile.instagram_url, label: 'Instagram', icon: 'M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z' },\r\n                    ].map((social) => social.url && (\r\n                        <a\r\n                            key={social.label}\r\n                            href={social.url}\r\n                            target=\"_blank\"\r\n                            rel=\"noopener noreferrer\"\r\n                            className=\"group flex items-center p-4 bg-white rounded-2xl border border-gray-100 shadow-sm hover:shadow-md hover:border-yellow-400 transition-all duration-200\"\r\n                        >\r\n                            <div className=\"h-12 w-12 rounded-full bg-amber-50 flex items-center justify-center text-zinc-900 group-hover:scale-110 transition-transform\">\r\n                                <svg className=\"w-6 h-6\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                    <path d={social.icon} />\r\n                                </svg>\r\n                            </div>\r\n                            <div className=\"ml-4 overflow-hidden\">\r\n                                <p className=\"text-sm font-bold text-zinc-900\">{social.label}</p>\r\n                                <p className=\"text-xs text-zinc-500 truncate\">{social.url.replace(/^https?:\\/\\//, '')}</p>\r\n                            </div>\r\n                        </a>\r\n                    ))}\r\n                </div>\r\n\r\n                {/* Reviews */}\r\n                <div className=\"mt-12\">\r\n                    <div className=\"bg-white rounded-2xl border border-gray-100 shadow-sm overflow-hidden\">\r\n                        <div className=\"px-6 py-4 border-b border-gray-100 flex items-center justify-between\">\r\n                            <div>\r\n                                <h3 className=\"text-lg font-bold text-zinc-900\">Reviews</h3>\r\n                                <p className=\"text-sm text-zinc-500\">Ratings and comments from events</p>\r\n                            </div>\r\n                            <div className=\"text-right\">\r\n                                <div className=\"text-2xl font-black text-yellow-500\">\r\n                                    {reviews.length > 0 ? (reviews.reduce((sum, r) => sum + r.rating, 0) / reviews.length).toFixed(1) : ''}\r\n                                </div>\r\n                                <div className=\"text-xs text-zinc-500\">{reviews.length} review(s)</div>\r\n                            </div>\r\n                        </div>\r\n                        {reviews.length === 0 ? (\r\n                            <div className=\"p-6 text-zinc-500\">No reviews yet.</div>\r\n                        ) : (\r\n                            <ul className=\"divide-y divide-gray-100\">\r\n                                {reviews.map(r => (\r\n                                    <li key={r.id} className=\"px-6 py-4\">\r\n                                        <div className=\"flex items-start gap-4\">\r\n                                            <div className=\"h-10 w-10 rounded-full bg-yellow-50 flex items-center justify-center text-zinc-900 font-bold\">\r\n                                                {r.rating}\r\n                                            </div>\r\n                                            <div className=\"flex-1\">\r\n                                                <p className=\"text-sm text-zinc-700\">{r.comment || 'No comment provided.'}</p>\r\n                                                <p className=\"mt-1 text-xs text-zinc-400 font-mono\">Event: {r.event_id.slice(0, 8)}  By: {r.reviewer_id.slice(0, 8)}  {new Date(r.created_at).toLocaleString()}</p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </li>\r\n                                ))}\r\n                            </ul>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Invitation Modal */}\r\n            <Transition appear show={showInviteModal} as={Fragment}>\r\n                <Dialog as=\"div\" className=\"relative z-50\" onClose={() => setShowInviteModal(false)}>\r\n                    <Transition.Child\r\n                        as={Fragment}\r\n                        enter=\"ease-out duration-300\"\r\n                        enterFrom=\"opacity-0\"\r\n                        enterTo=\"opacity-100\"\r\n                        leave=\"ease-in duration-200\"\r\n                        leaveFrom=\"opacity-100\"\r\n                        leaveTo=\"opacity-0\"\r\n                    >\r\n                        <div className=\"fixed inset-0 bg-black/40 backdrop-blur-sm\" />\r\n                    </Transition.Child>\r\n\r\n                    <div className=\"fixed inset-0 overflow-y-auto\">\r\n                        <div className=\"flex min-h-full items-center justify-center p-4\">\r\n                            <Transition.Child\r\n                                as={Fragment}\r\n                                enter=\"ease-out duration-300\"\r\n                                enterFrom=\"opacity-0 scale-95\"\r\n                                enterTo=\"opacity-100 scale-100\"\r\n                                leave=\"ease-in duration-200\"\r\n                                leaveFrom=\"opacity-100 scale-100\"\r\n                                leaveTo=\"opacity-0 scale-95\"\r\n                            >\r\n                                <Dialog.Panel className=\"w-full max-w-md transform overflow-hidden rounded-[2rem] bg-white p-6 shadow-xl transition-all border border-zinc-100\">\r\n                                    <Dialog.Title as=\"h3\" className=\"text-xl font-black text-zinc-900 mb-4\">\r\n                                        Invite {profile.full_name} to Speak\r\n                                    </Dialog.Title>\r\n\r\n                                    <div className=\"space-y-4\">\r\n                                        <div>\r\n                                            <label className=\"block text-xs font-bold text-zinc-500 uppercase tracking-wider mb-2\">\r\n                                                Select Event\r\n                                            </label>\r\n                                            {myEvents.length === 0 ? (\r\n                                                <div className=\"text-center p-4 bg-zinc-50 rounded-xl border border-zinc-100\">\r\n                                                    <p className=\"text-sm text-zinc-500 mb-2\">You don't have any organized events.</p>\r\n                                                    <Link href=\"/dashboard\">\r\n                                                        <Button variant=\"primary\" size=\"sm\">Create Event</Button>\r\n                                                    </Link>\r\n                                                </div>\r\n                                            ) : (\r\n                                                <div className=\"space-y-2 max-h-60 overflow-y-auto pr-2 custom-scrollbar\">\r\n                                                    {myEvents.map(event => (\r\n                                                        <div\r\n                                                            key={event.event_id}\r\n                                                            onClick={() => setSelectedEventId(event.event_id)}\r\n                                                            className={`p-3 rounded-xl border cursor-pointer transition-all flex items-center gap-3 ${selectedEventId === event.event_id\r\n                                                                ? 'border-yellow-400 bg-yellow-50 shadow-sm'\r\n                                                                : 'border-zinc-100 hover:border-zinc-300 hover:bg-zinc-50'\r\n                                                                }`}\r\n                                                        >\r\n                                                            <div className={`w-3 h-3 rounded-full ${selectedEventId === event.event_id ? 'bg-yellow-500' : 'bg-zinc-200'}`} />\r\n                                                            <div>\r\n                                                                <p className=\"font-bold text-zinc-900 text-sm\">{event.title}</p>\r\n                                                                <p className=\"text-xs text-zinc-500\">{new Date(event.start_datetime).toLocaleDateString()}</p>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    ))}\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n\r\n                                        <div className=\"flex gap-3 justify-end pt-4\">\r\n                                            <button\r\n                                                onClick={() => setShowInviteModal(false)}\r\n                                                className=\"px-4 py-2 text-zinc-500 font-bold hover:bg-zinc-100 rounded-xl transition-colors\"\r\n                                            >\r\n                                                Cancel\r\n                                            </button>\r\n                                            <button\r\n                                                onClick={handleInvite}\r\n                                                disabled={!selectedEventId || inviting}\r\n                                                className=\"px-6 py-2 bg-zinc-900 text-yellow-400 font-bold rounded-xl shadow-md hover:bg-zinc-800 disabled:opacity-50 transition-all\"\r\n                                            >\r\n                                                {inviting ? 'Sending...' : 'Send Invitation'}\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                </Dialog.Panel>\r\n                            </Transition.Child>\r\n                        </div>\r\n                    </div>\r\n                </Dialog>\r\n            </Transition>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\main\\requests\\[id]\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'UserMeResponse' is defined but never used.","line":8,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":38},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":126,"column":33,"nodeType":"JSXOpeningElement","endLine":130,"endColumn":35}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useParams, useRouter } from 'next/navigation'\r\nimport Link from 'next/link'\r\nimport { Toaster, toast } from 'react-hot-toast'\r\nimport { getEventById, getEventParticipants, respondInvitationMe, getMe } from '@/services/api'\r\nimport { EventDetails, UserMeResponse, EventParticipantDetails } from '@/services/api.types'\r\nimport { format } from 'date-fns'\r\n\r\nexport default function RequestDetailsPage() {\r\n    const params = useParams()\r\n    const router = useRouter()\r\n    // Assuming [id] is the event_id for now, as that's how we track invitations\r\n    const eventId = params.id as string\r\n\r\n    const [event, setEvent] = useState<EventDetails | null>(null)\r\n    const [myParticipant, setMyParticipant] = useState<EventParticipantDetails | null>(null)\r\n    const [organizer, setOrganizer] = useState<EventParticipantDetails | null>(null)\r\n    const [loading, setLoading] = useState(true)\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            try {\r\n                const [evt, parts, me] = await Promise.all([\r\n                    getEventById(eventId),\r\n                    getEventParticipants(eventId),\r\n                    getMe()\r\n                ])\r\n                setEvent(evt)\r\n\r\n                // Find me\r\n                const foundMe = parts.find(p => p.user_id === me.id)\r\n                setMyParticipant(foundMe || null)\r\n\r\n                // Find organizer\r\n                const foundOrg = parts.find(p => p.role === 'organizer')\r\n                setOrganizer(foundOrg || null)\r\n\r\n            } catch (error) {\r\n                console.error(error)\r\n                toast.error('Failed to load request details')\r\n            } finally {\r\n                setLoading(false)\r\n            }\r\n        }\r\n        if (eventId) fetchData()\r\n    }, [eventId])\r\n\r\n    const handleResponse = async (status: 'accepted' | 'rejected') => {\r\n        try {\r\n            await respondInvitationMe(eventId, { status })\r\n            toast.success(`Request ${status}`)\r\n            router.push('/main/dashboard') // Redirect after action\r\n        } catch (error) {\r\n            console.error(error)\r\n            toast.error('Failed to process request')\r\n        }\r\n    }\r\n\r\n    if (loading) return <div className=\"flex h-screen items-center justify-center\">Loading...</div>\r\n    if (!event || !myParticipant) return <div className=\"flex h-screen items-center justify-center\">Request not found</div>\r\n\r\n    const startDate = new Date(event.start_datetime)\r\n    const endDate = new Date(event.end_datetime)\r\n    const durationMins = Math.round((endDate.getTime() - startDate.getTime()) / 60000)\r\n    const durationHrs = Math.floor(durationMins / 60)\r\n    const durationRemainingMins = durationMins % 60\r\n    const durationString = `${durationHrs > 0 ? `${durationHrs} Hour ` : ''}${durationRemainingMins > 0 ? `${durationRemainingMins} Mins` : ''}`\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-gray-50 p-6 md:p-12 font-sans text-slate-800\">\r\n            <Toaster />\r\n\r\n            <div className=\"max-w-6xl mx-auto space-y-8\">\r\n                {/* Header Link */}\r\n                <Link href=\"/main/dashboard\" className=\"inline-flex items-center text-slate-500 hover:text-slate-800 transition-colors font-medium text-sm\">\r\n                    <svg className=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M10 19l-7-7m0 0l7-7m-7 7h18\" /></svg>\r\n                    Back to Dashboard\r\n                </Link>\r\n\r\n                {/* Title Section */}\r\n                <div className=\"flex justify-between items-end\">\r\n                    <h1 className=\"text-3xl font-bold text-slate-900 tracking-tight\">Request Details</h1>\r\n                    <span className=\"text-slate-400 font-mono text-sm\">#REQ-{eventId.slice(0, 8).toUpperCase()}</span>\r\n                </div>\r\n\r\n                {/* Banner - Only show if pending */}\r\n                {myParticipant.status === 'pending' && (\r\n                    <div className=\"bg-slate-900 text-white rounded-xl p-4 md:p-6 flex flex-col md:flex-row items-center justify-between gap-4 shadow-xl\">\r\n                        <div className=\"flex items-center gap-4\">\r\n                            <div className=\"p-2 bg-slate-800 rounded-full\">\r\n                                <svg className=\"w-6 h-6 text-yellow-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" /></svg>\r\n                            </div>\r\n                            <div>\r\n                                <p className=\"font-bold text-lg\">Action Required</p>\r\n                                <p className=\"text-slate-300 text-sm\">Please review and accept or decline this request.</p>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-3 w-full md:w-auto\">\r\n                            <button\r\n                                onClick={() => handleResponse('rejected')}\r\n                                className=\"px-6 py-2.5 rounded-lg border border-slate-600 hover:bg-slate-800 transition-colors font-semibold text-sm w-full md:w-auto\"\r\n                            >\r\n                                 Decline\r\n                            </button>\r\n                            <button\r\n                                onClick={() => handleResponse('accepted')}\r\n                                className=\"px-6 py-2.5 rounded-lg bg-emerald-500 hover:bg-emerald-600 text-white transition-colors font-bold text-sm flex items-center justify-center gap-2 w-full md:w-auto shadow-lg shadow-emerald-500/20\"\r\n                            >\r\n                                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"3\" d=\"M5 13l4 4L19 7\" /></svg>\r\n                                Accept Request\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n                    {/* Main Content Card */}\r\n                    <div className=\"lg:col-span-2 space-y-6\">\r\n                        <div className=\"bg-white rounded-3xl border border-slate-200 p-8 shadow-sm\">\r\n\r\n                            {/* Requestor Profile */}\r\n                            <div className=\"flex items-center gap-4 border-b border-slate-100 pb-8 mb-8\">\r\n                                <img\r\n                                    src={`https://ui-avatars.com/api/?name=${organizer?.user_id || 'Organizer'}&background=random&size=128`}\r\n                                    alt=\"Profile\"\r\n                                    className=\"w-16 h-16 rounded-full object-cover border-4 border-white shadow-md\"\r\n                                />\r\n                                <div>\r\n                                    <p className=\"text-xs text-slate-500 font-bold uppercase tracking-wider mb-1\">Request From</p>\r\n                                    <h3 className=\"text-xl font-bold text-slate-900\">{organizer?.user_id || 'Unknown Organizer'}</h3>\r\n                                    <p className=\"text-slate-500 text-sm flex items-center gap-2\">\r\n                                        Organizer @ {event.organizer_id}\r\n                                        {/* Mock Rating */}\r\n                                        <span className=\"flex items-center text-amber-500 font-bold text-xs bg-amber-50 px-2 py-0.5 rounded-full\">\r\n                                            4.8 \r\n                                        </span>\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Event Topic */}\r\n                            <div className=\"mb-8\">\r\n                                <p className=\"text-xs text-slate-500 font-bold uppercase tracking-wider mb-2\">Event Topic</p>\r\n                                <h2 className=\"text-3xl font-black text-slate-900 leading-tight\">{event.title}</h2>\r\n                            </div>\r\n\r\n                            {/* Details Grid */}\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8\">\r\n                                <div>\r\n                                    <p className=\"text-xs text-slate-500 font-bold uppercase tracking-wider mb-2\">Proposed Date</p>\r\n                                    <div className=\"flex items-center gap-3 text-slate-700 font-medium\">\r\n                                        <svg className=\"w-5 h-5 text-slate-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" /></svg>\r\n                                        {format(startDate, 'EEE, MMM d  h:mm a')}\r\n                                    </div>\r\n                                </div>\r\n                                <div>\r\n                                    <p className=\"text-xs text-slate-500 font-bold uppercase tracking-wider mb-2\">Venue</p>\r\n                                    <div className=\"flex items-center gap-3 text-slate-700 font-medium\">\r\n                                        <svg className=\"w-5 h-5 text-slate-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" /><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\" /></svg>\r\n                                        {event.venue_remark || 'TBA'}\r\n                                    </div>\r\n                                </div>\r\n                                <div>\r\n                                    <p className=\"text-xs text-slate-500 font-bold uppercase tracking-wider mb-2\">Duration</p>\r\n                                    <div className=\"flex items-center gap-3 text-slate-700 font-medium\">\r\n                                        <svg className=\"w-5 h-5 text-slate-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" /></svg>\r\n                                        {durationString}\r\n                                    </div>\r\n                                </div>\r\n                                <div>\r\n                                    <p className=\"text-xs text-slate-500 font-bold uppercase tracking-wider mb-2\">Est. Audience</p>\r\n                                    <div className=\"flex items-center gap-3 text-slate-700 font-medium\">\r\n                                        <svg className=\"w-5 h-5 text-slate-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\" /></svg>\r\n                                        ~{event.max_participant || 50} Students\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Invitation Message */}\r\n                            <div className=\"bg-slate-50 rounded-2xl p-6 border border-slate-100\">\r\n                                <p className=\"text-xs text-slate-400 font-bold uppercase tracking-wider mb-4\">Invitation Message</p>\r\n                                <div className=\"text-slate-600 leading-relaxed whitespace-pre-wrap font-serif text-lg italic\">\r\n                                    &quot;{myParticipant.description || event.description}&quot;\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Sidebar */}\r\n                    <div className=\"lg:col-span-1\">\r\n                        <div className=\"bg-white rounded-3xl border border-slate-200 shadow-sm h-full flex flex-col min-h-[500px]\">\r\n                            <div className=\"p-6 border-b border-slate-100 flex items-center justify-between bg-slate-50 rounded-t-3xl\">\r\n                                <h3 className=\"font-bold text-slate-800 flex items-center gap-2\">\r\n                                    <svg className=\"w-5 h-5 text-slate-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\" /></svg>\r\n                                    Communication Log\r\n                                </h3>\r\n                                <span className=\"bg-slate-200 text-slate-600 text-xs font-bold px-2 py-1 rounded flex items-center gap-1\">\r\n                                    <svg className=\"w-3 h-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" /></svg>\r\n                                    Official Record\r\n                                </span>\r\n                            </div>\r\n\r\n                            <div className=\"flex-1 flex flex-col items-center justify-center p-8 text-center bg-white rounded-b-3xl\">\r\n                                <div className=\"w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center mb-6 text-slate-400\">\r\n                                    <svg className=\"w-10 h-10\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" /></svg>\r\n                                </div>\r\n                                <h4 className=\"font-bold text-slate-900 text-lg mb-2\">Chat Locked</h4>\r\n                                <p className=\"text-slate-500 text-sm max-w-[250px]\">\r\n                                    Accept this booking to unlock the communication log and discuss details with {organizer?.user_id || 'the organizer'}.\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\page.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\app\\page.tsx:24:21\n  22 |                     // OR we can wrap strictly in a condition that doesn't trigger immediately on mount if possible, \n  23 |                     // but here it IS on mount.\n> 24 |                     setHasToken(true)\n     |                     ^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  25 |                 } else {\n  26 |                     setHasToken(false)\n  27 |                 }","line":24,"column":21,"nodeType":null,"endLine":24,"endColumn":32},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":65,"column":45,"nodeType":"JSXOpeningElement","endLine":65,"endColumn":81}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport Link from 'next/link'\r\nimport { useEffect, useState } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport Navbar from '@/components/ui/Navbar'\r\n\r\nexport default function HomePage() {\r\n    const router = useRouter()\r\n    const [hasToken, setHasToken] = useState<boolean | null>(null)\r\n\r\n    useEffect(() => {\r\n        try {\r\n            // Check for token only on client side\r\n            if (typeof window !== 'undefined') {\r\n                const token = localStorage.getItem('atas_token')\r\n                if (token) {\r\n                    router.replace('/dashboard')\r\n                    // Avoid setting state synchronously if redirecting, but needed to hide content?\r\n                    // The linter warning \"Calling setState synchronously within an effect\" refers to causing a re-render immediately.\r\n                    // Since we are redirecting, we can probably skip the state update if the redirect is fast, \r\n                    // OR we can wrap strictly in a condition that doesn't trigger immediately on mount if possible, \r\n                    // but here it IS on mount.\r\n                    setHasToken(true)\r\n                } else {\r\n                    setHasToken(false)\r\n                }\r\n            }\r\n        } catch {\r\n            setHasToken(false)\r\n        }\r\n    }, [router])\r\n\r\n    if (hasToken) {\r\n        return null\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-amber-50\">\r\n            <Navbar />\r\n            <main className=\"container mx-auto px-4\">\r\n                <section className=\"py-16 sm:py-24\">\r\n                    <div className=\"grid md:grid-cols-2 gap-10 items-center\">\r\n                        <div>\r\n                            <h1 className=\"text-4xl sm:text-6xl font-black text-zinc-900 leading-tight tracking-tight\">\r\n                                Structured Event Tool for Universities\r\n                            </h1>\r\n                            <p className=\"mt-6 text-lg sm:text-xl text-zinc-600 font-medium max-w-xl\">\r\n                                Discover verified experts, send standardized event requests, and manage confirmations with zero admin overhead.\r\n                            </p>\r\n                            <div className=\"mt-8 flex gap-4\">\r\n                                <Link href=\"/register\" className=\"px-6 py-3 bg-zinc-900 text-yellow-400 rounded-full text-sm font-bold hover:bg-zinc-800 hover:scale-105 transition-all duration-200 shadow-md\">\r\n                                    Get Started\r\n                                </Link>\r\n                                <Link href=\"/login\" className=\"px-6 py-3 bg-white border border-zinc-200 text-zinc-900 rounded-full text-sm font-bold hover:bg-zinc-50 transition-all duration-200\">\r\n                                    I already have an account\r\n                                </Link>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"relative\">\r\n                            <div className=\"rounded-[2rem] bg-yellow-400 p-6 sm:p-10 shadow-xl\">\r\n                                <div className=\"bg-white/30 backdrop-blur-md rounded-3xl p-6 border border-white/20 shadow-lg\">\r\n                                    <div className=\"flex items-center gap-4 mb-3\">\r\n                                        <div className=\"h-10 w-10 rounded-full bg-gray-200 overflow-hidden\">\r\n                                            <img src=\"/globe.svg\" alt=\"Globe\" />\r\n                                        </div>\r\n                                        <div>\r\n                                            <p className=\"font-bold text-zinc-900 text-sm\">Verified Expert</p>\r\n                                            <p className=\"text-xs text-zinc-900/60\">Tech Week Speaker</p>\r\n                                        </div>\r\n                                    </div>\r\n                                    <p className=\"text-zinc-900/80 text-sm font-medium\">\r\n                                        &quot;ATAS made finding a speaker for our tech week incredibly easy. Highly recommend!&quot;\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n\r\n                <section className=\"py-12\">\r\n                    <div className=\"grid sm:grid-cols-3 gap-6\">\r\n                        <div className=\"bg-white rounded-2xl p-6 border border-yellow-100 shadow-sm\">\r\n                            <h3 className=\"text-lg font-bold text-zinc-900 mb-2\">Expert Discovery</h3>\r\n                            <p className=\"text-zinc-600 text-sm\">Search by name, company, and tags. Verified profiles only.</p>\r\n                        </div>\r\n                        <div className=\"bg-white rounded-2xl p-6 border border-yellow-100 shadow-sm\">\r\n                            <h3 className=\"text-lg font-bold text-zinc-900 mb-2\">Structured Requests</h3>\r\n                            <p className=\"text-zinc-600 text-sm\">Standardized event forms ensure clarity and quick decisions.</p>\r\n                        </div>\r\n                        <div className=\"bg-white rounded-2xl p-6 border border-yellow-100 shadow-sm\">\r\n                            <h3 className=\"text-lg font-bold text-zinc-900 mb-2\">Two-Way Ratings</h3>\r\n                            <p className=\"text-zinc-600 text-sm\">Post-event reviews improve quality and trust on both sides.</p>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n\r\n                <footer className=\"py-12 border-t border-yellow-100 text-sm text-zinc-600\">\r\n                    <div className=\"flex flex-col sm:flex-row items-center justify-between gap-4\">\r\n                        <p className=\"font-medium\"> {new Date().getFullYear()} ATAS Platform</p>\r\n                        <div className=\"flex items-center gap-6\">\r\n                            <Link href=\"/privacy\" className=\"hover:text-zinc-900\">Privacy Policy</Link>\r\n                            <Link href=\"/terms\" className=\"hover:text-zinc-900\">Terms & Conditions</Link>\r\n                        </div>\r\n                    </div>\r\n                </footer>\r\n            </main>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\components\\admin\\AdminNotificationBell.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\components\\admin\\AdminSidebar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'router' is assigned a value but never used.","line":36,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":36,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport Link from 'next/link'\r\nimport { usePathname } from 'next/navigation'\r\nimport {\r\n    DashboardIcon,\r\n    PersonIcon,\r\n    BackpackIcon,\r\n    ReaderIcon,\r\n    ExitIcon,\r\n    CalendarIcon,\r\n    BellIcon,\r\n    EnvelopeClosedIcon\r\n} from '@radix-ui/react-icons'\r\nimport { useRouter } from 'next/navigation'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { getMe } from '@/services/api'\r\nimport { UserMeResponse } from '@/services/api.types'\r\n\r\nconst menuItems = [\r\n    { name: 'Overview', href: '/admin', icon: DashboardIcon, roles: ['admin', 'customer_support', 'content_moderator'] },\r\n    { name: 'Users', href: '/admin/users', icon: PersonIcon, roles: ['admin', 'customer_support'] },\r\n    { name: 'Onboarding', href: '/admin/onboarding', icon: ReaderIcon, roles: ['admin'] },\r\n    { name: 'Organizations', href: '/admin/organizations', icon: BackpackIcon, roles: ['admin', 'customer_support'] },\r\n    { name: 'Events', href: '/admin/events', icon: CalendarIcon, roles: ['admin', 'content_moderator'] },\r\n    { name: 'Categories', href: '/admin/categories', icon: ReaderIcon, roles: ['admin'] },\r\n    { name: 'Notifications', href: '/admin/notifications', icon: BellIcon, roles: ['admin'] },\r\n    { name: 'Audit Logs', href: '/admin/audit-logs', icon: ReaderIcon, roles: ['admin'] },\r\n    { name: 'Email Templates', href: '/admin/email-templates', icon: EnvelopeClosedIcon, roles: ['admin'] },\r\n    { name: 'Communication Logs', href: '/admin/communications', icon: EnvelopeClosedIcon, roles: ['admin'] },\r\n]\r\n\r\nexport function AdminSidebar() {\r\n    const pathname = usePathname()\r\n    const router = useRouter()\r\n    const [user, setUser] = useState<UserMeResponse | null>(null)\r\n\r\n    useEffect(() => {\r\n        getMe().then(setUser).catch(console.error)\r\n    }, [])\r\n\r\n    if (!user) return null\r\n\r\n    const userRoles = user.roles || []\r\n\r\n    return (\r\n        <div className=\"w-64 bg-white border-r border-gray-200 min-h-screen flex flex-col\">\r\n            <div className=\"p-6 border-b border-gray-100\">\r\n                <h1 className=\"text-xl font-bold text-gray-900\">ATAS Admin</h1>\r\n                <div className=\"mt-2 text-xs font-medium text-gray-500 px-2 py-1 bg-gray-100 rounded-full inline-block\">\r\n                    {userRoles.includes('admin') ? 'Administrator' :\r\n                        userRoles.includes('customer_support') ? 'Support Agent' :\r\n                            userRoles.includes('content_moderator') ? 'Moderator' : 'Staff'}\r\n                </div>\r\n            </div>\r\n\r\n            <nav className=\"flex-1 p-4 space-y-1\">\r\n                {menuItems.filter(item => item.roles.some(r => userRoles.includes(r))).map((item) => {\r\n                    const isActive = pathname === item.href\r\n                    return (\r\n                        <Link\r\n                            key={item.name}\r\n                            href={item.href}\r\n                            className={`flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${isActive\r\n                                ? 'bg-gray-900 text-white'\r\n                                : 'text-gray-600 hover:bg-gray-50 hover:text-gray-900'\r\n                                }`}\r\n                        >\r\n                            <item.icon className={`w-5 h-5 mr-3 ${isActive ? 'text-gray-400' : 'text-gray-400'}`} />\r\n                            {item.name}\r\n                        </Link>\r\n                    )\r\n                })}\r\n            </nav>\r\n\r\n            <div className=\"p-4 border-t border-gray-100\">\r\n\r\n                <button\r\n                    onClick={async () => {\r\n                        localStorage.removeItem('atas_token')\r\n                        window.location.href = '/admin/login'\r\n                    }}\r\n                    className=\"w-full flex items-center px-4 py-3 text-sm font-medium text-red-600 rounded-lg hover:bg-red-50 hover:text-red-900 mt-2\"\r\n                >\r\n                    <ExitIcon className=\"w-5 h-5 mr-3 text-red-400\" />\r\n                    Logout\r\n                </button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\components\\admin\\AuditLogsTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\components\\admin\\EventsTable.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'deleteEventId' is assigned a value but never used.","line":32,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setDeleteEventId' is assigned a value but never used.","line":32,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":32,"endColumn":43}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useMemo, useState } from 'react'\r\nimport { EventDetails } from '@/services/api.types'\r\nimport { adminService } from '@/services/admin.service'\r\nimport { getProfileByUserId } from '@/services/api'\r\nimport useSWR from 'swr'\r\nimport { toast } from 'react-hot-toast'\r\nimport { toastError } from '@/lib/utils'\r\nimport {\r\n    TrashIcon,\r\n    CheckIcon,\r\n    Cross2Icon,\r\n    ChevronDownIcon,\r\n    ChevronUpIcon,\r\n    ImageIcon\r\n} from '@radix-ui/react-icons'\r\nimport { format } from 'date-fns'\r\nimport Image from 'next/image'\r\nimport * as Dialog from '@radix-ui/react-dialog'\r\nimport { getMe } from '@/services/api'\r\n\r\ninterface EventsTableProps {\r\n    events: EventDetails[]\r\n    onRefresh: () => void\r\n}\r\n\r\nexport function EventsTable({ events, onRefresh }: EventsTableProps) {\r\n    const [isLoading, setIsLoading] = useState<string | null>(null)\r\n    const [expandedEventId, setExpandedEventId] = useState<string | null>(null)\r\n    const [previewImage, setPreviewImage] = useState<string | null>(null)\r\n    const [deleteEventId, setDeleteEventId] = useState<string | null>(null)\r\n    const [moderationTargetId, setModerationTargetId] = useState<string | null>(null)\r\n    const [moderationType, setModerationType] = useState<'unpublish' | 'delete' | null>(null)\r\n    const [moderationReason, setModerationReason] = useState<string>('')\r\n    const { data: me } = useSWR('/users/me', () => getMe(), { revalidateOnFocus: false, dedupingInterval: 60000 })\r\n    const roles = useMemo(() => (me?.roles || []), [me])\r\n    const isSuperAdmin = useMemo(() => roles.includes('super_admin'), [roles])\r\n\r\n    const notifyOrganizer = async (event: EventDetails, action: 'unpublish' | 'delete', reason?: string) => {\r\n        const title = action === 'unpublish' ? 'Event Unpublished' : 'Event Removed'\r\n        const base = action === 'unpublish'\r\n            ? `Your event \"${event.title}\" has been unpublished by an administrator for review. Please update content or contact support.`\r\n            : `Your event \"${event.title}\" has been removed by a super administrator due to policy violations. If you believe this is a mistake, contact support.`\r\n        const content = reason ? `${base}\\n\\nReason: ${reason}` : base\r\n        try {\r\n            const res = await adminService.broadcastEmailTemplate({\r\n                template_id: 'moderation_notice',\r\n                variables: { event_title: event.title, reason: reason || '' },\r\n                target_user_id: event.organizer_id,\r\n            })\r\n            if (!res || typeof res.count !== 'number' || res.count === 0) {\r\n                await adminService.broadcastNotification({ title, content, target_user_id: event.organizer_id })\r\n            }\r\n        } catch {\r\n            // no-op\r\n        }\r\n    }\r\n\r\n    const handleDelete = async (eventId: string, reason?: string) => {\r\n        setIsLoading(eventId)\r\n        try {\r\n            const ev = events.find(e => e.id === eventId)\r\n            if (!ev) throw new Error('Event not found')\r\n            if (ev.status === 'published') {\r\n                toast.error('Unpublish the event before deleting')\r\n                return\r\n            }\r\n            await adminService.deleteEvent(eventId)\r\n            toast.success('Event deleted')\r\n            await notifyOrganizer(ev, 'delete', reason)\r\n            onRefresh()\r\n        } catch (error) {\r\n            toastError(error, undefined, 'Failed to delete event')\r\n        } finally {\r\n            setIsLoading(null)\r\n        }\r\n    }\r\n\r\n    const handlePublish = async (eventId: string) => {\r\n        setIsLoading(eventId)\r\n        try {\r\n            await adminService.publishEvent(eventId)\r\n            toast.success('Event published')\r\n            onRefresh()\r\n        } catch (error) {\r\n            toastError(error, undefined, 'Failed to publish event')\r\n        } finally {\r\n            setIsLoading(null)\r\n        }\r\n    }\r\n\r\n    const handleUnpublish = async (eventId: string, reason?: string) => {\r\n        setIsLoading(eventId)\r\n        try {\r\n            await adminService.unpublishEvent(eventId)\r\n            toast.success('Event unpublished')\r\n            const ev = events.find(e => e.id === eventId)\r\n            if (ev) await notifyOrganizer(ev, 'unpublish', reason)\r\n            onRefresh()\r\n        } catch (error) {\r\n            toastError(error, undefined, 'Failed to unpublish event')\r\n        } finally {\r\n            setIsLoading(null)\r\n        }\r\n    }\r\n\r\n    const toggleExpand = (eventId: string) => {\r\n        setExpandedEventId(expandedEventId === eventId ? null : eventId)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden\">\r\n                <div className=\"overflow-x-auto\">\r\n                    <table className=\"w-full text-left text-sm\">\r\n                        <thead className=\"bg-gray-50 border-b border-gray-100\">\r\n                            <tr>\r\n                                <th className=\"px-6 py-4 font-semibold text-gray-700 w-10\"></th>\r\n                                <th className=\"px-6 py-4 font-semibold text-gray-700\">Event</th>\r\n                                <th className=\"px-6 py-4 font-semibold text-gray-700\">Organizer</th>\r\n                                <th className=\"px-6 py-4 font-semibold text-gray-700\">Date</th>\r\n                                <th className=\"px-6 py-4 font-semibold text-gray-700\">Status</th>\r\n                                <th className=\"px-6 py-4 font-semibold text-gray-700 text-right\">Actions</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"divide-y divide-gray-50\">\r\n                            {events.map((event) => (\r\n                                < key={event.id}>\r\n                                    <tr\r\n                                        onClick={() => toggleExpand(event.id)}\r\n                                        className={`hover:bg-gray-50/50 transition-colors cursor-pointer ${expandedEventId === event.id ? 'bg-gray-50' : ''}`}\r\n                                    >\r\n                                        <td className=\"px-6 py-4\">\r\n                                            <button\r\n                                                onClick={(e) => { e.stopPropagation(); toggleExpand(event.id); }}\r\n                                                className=\"p-1 hover:bg-gray-200 rounded-full transition-colors\"\r\n                                            >\r\n                                                {expandedEventId === event.id ? (\r\n                                                    <ChevronUpIcon className=\"w-4 h-4 text-gray-500\" />\r\n                                                ) : (\r\n                                                    <ChevronDownIcon className=\"w-4 h-4 text-gray-500\" />\r\n                                                )}\r\n                                            </button>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4\">\r\n                                            <div className=\"flex items-center gap-3\">\r\n                                                {event.cover_url ? (\r\n                                                    <button\r\n                                                        onClick={(e) => { e.stopPropagation(); setPreviewImage(event.cover_url || null); }}\r\n                                                        className=\"relative group\"\r\n                                                    >\r\n                                                        <Image\r\n                                                            src={event.cover_url}\r\n                                                            alt=\"\"\r\n                                                            width={40}\r\n                                                            height={40}\r\n                                                            unoptimized\r\n                                                            className=\"w-10 h-10 rounded-lg object-cover bg-gray-100 group-hover:opacity-80 transition-opacity\"\r\n                                                        />\r\n                                                        <div className=\"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                                                            <ImageIcon className=\"w-4 h-4 text-white drop-shadow-md\" />\r\n                                                        </div>\r\n                                                    </button>\r\n                                                ) : (\r\n                                                    <div className=\"w-10 h-10 rounded-lg bg-gray-100 flex items-center justify-center\">\r\n                                                        <ImageIcon className=\"w-4 h-4 text-gray-400\" />\r\n                                                    </div>\r\n                                                )}\r\n                                                <div>\r\n                                                    <div className=\"font-medium text-gray-900\">{event.title}</div>\r\n                                                    <div className=\"text-xs text-gray-500\">{event.type}  {event.format}</div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 text-gray-600\">\r\n                                            <OrganizerName userId={event.organizer_id} />\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 text-gray-600\">\r\n                                            {format(new Date(event.start_datetime), 'MMM d, yyyy')}\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4\">\r\n                                            <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium\r\n                                                ${event.status === 'published' ? 'bg-green-100 text-green-800' :\r\n                                                    event.status === 'draft' ? 'bg-gray-100 text-gray-800' :\r\n                                                        'bg-red-100 text-red-800'}`}>\r\n                                                {event.status}\r\n                                            </span>\r\n                                        </td>\r\n                                        <td className=\"px-6 py-4 text-right\">\r\n                                            <div className=\"flex items-center justify-end gap-2\" onClick={(e) => e.stopPropagation()}>\r\n                                                {event.status === 'draft' ? (\r\n                                                    <button\r\n                                                        onClick={() => handlePublish(event.id)}\r\n                                                        disabled={isLoading === event.id}\r\n                                                        className=\"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors\"\r\n                                                        title=\"Publish\"\r\n                                                    >\r\n                                                        <CheckIcon className=\"w-4 h-4\" />\r\n                                                    </button>\r\n                                                ) : (\r\n                                                    <button\r\n                                                        onClick={() => { setModerationTargetId(event.id); setModerationType('unpublish'); setModerationReason(''); }}\r\n                                                        disabled={isLoading === event.id}\r\n                                                        className=\"p-2 text-gray-400 hover:text-orange-600 hover:bg-orange-50 rounded-lg transition-colors\"\r\n                                                        title=\"Unpublish\"\r\n                                                    >\r\n                                                        <Cross2Icon className=\"w-4 h-4\" />\r\n                                                    </button>\r\n                                                )}\r\n\r\n                                                {isSuperAdmin ? (\r\n                                                    event.status === 'published' ? (\r\n                                                        <button\r\n                                                            disabled\r\n                                                            className=\"p-2 text-gray-300 rounded-lg cursor-not-allowed\"\r\n                                                            title=\"Unpublish first to delete\"\r\n                                                        >\r\n                                                            <TrashIcon className=\"w-4 h-4\" />\r\n                                                        </button>\r\n                                                    ) : (\r\n                                                        <button\r\n                                                            onClick={() => { setModerationTargetId(event.id); setModerationType('delete'); setModerationReason('') }}\r\n                                                            disabled={isLoading === event.id}\r\n                                                            className=\"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\r\n                                                            title=\"Delete\"\r\n                                                        >\r\n                                                            <TrashIcon className=\"w-4 h-4\" />\r\n                                                        </button>\r\n                                                    )\r\n                                                ) : null}\r\n                                            </div>\r\n                                        </td>\r\n                                    </tr>\r\n                                    {expandedEventId === event.id && (\r\n                                        <tr className=\"bg-gray-50\">\r\n                                            <td colSpan={6} className=\"px-6 py-4\">\r\n                                                <div className=\"grid grid-cols-2 gap-6 text-sm\">\r\n                                                    <div>\r\n                                                        <h4 className=\"font-semibold text-gray-900 mb-2\">Description</h4>\r\n                                                        <p className=\"text-gray-600 whitespace-pre-wrap\">{event.description || 'No description provided.'}</p>\r\n                                                    </div>\r\n                                                    <div className=\"space-y-4\">\r\n                                                        <div>\r\n                                                            <h4 className=\"font-semibold text-gray-900 mb-1\">Location</h4>\r\n                                                            <p className=\"text-gray-600\">{event.venue_remark || 'TBD'}</p>\r\n                                                        </div>\r\n                                                        <div>\r\n                                                            <h4 className=\"font-semibold text-gray-900 mb-1\">Visibility</h4>\r\n                                                            <p className=\"text-gray-600 capitalize\">{event.visibility}</p>\r\n                                                        </div>\r\n                                                        <div>\r\n                                                            <h4 className=\"font-semibold text-gray-900 mb-1\">Full ID</h4>\r\n                                                            <p className=\"font-mono text-xs text-gray-500\">{event.id}</p>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </td>\r\n                                        </tr>\r\n                                    )}\r\n                                </>\r\n                            ))}\r\n                            {events.length === 0 && (\r\n                                <tr>\r\n                                    <td colSpan={6} className=\"px-6 py-12 text-center text-gray-500\">\r\n                                        No events found\r\n                                    </td>\r\n                                </tr>\r\n                            )}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            </div>\r\n\r\n            <Dialog.Root open={!!previewImage} onOpenChange={() => setPreviewImage(null)}>\r\n                <Dialog.Portal>\r\n                    <Dialog.Overlay className=\"fixed inset-0 bg-black/50 z-50 backdrop-blur-sm\" />\r\n                    <Dialog.Content className=\"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white p-2 rounded-xl shadow-2xl z-50 max-w-3xl max-h-[90vh] w-full outline-none\">\r\n                        <Dialog.Title className=\"sr-only\">Event Cover Preview</Dialog.Title>\r\n                        <Dialog.Description className=\"sr-only\">\r\n                            Full size preview of the event cover image\r\n                        </Dialog.Description>\r\n                        {previewImage && (\r\n                            <Image\r\n                                src={previewImage}\r\n                                alt=\"Event Cover\"\r\n                                width={1200}\r\n                                height={800}\r\n                                unoptimized\r\n                                className=\"w-full h-full object-contain rounded-lg\"\r\n                            />\r\n                        )}\r\n                        <Dialog.Close className=\"absolute top-4 right-4 p-2 bg-white/80 rounded-full hover:bg-white transition-colors\">\r\n                            <Cross2Icon className=\"w-5 h-5 text-gray-900\" />\r\n                        </Dialog.Close>\r\n                    </Dialog.Content>\r\n                </Dialog.Portal>\r\n            </Dialog.Root>\r\n\r\n            {/* Delete reason modal */}\r\n            <Dialog.Root open={!!moderationTargetId && moderationType === 'delete'} onOpenChange={() => { setModerationTargetId(null); setModerationType(null); setModerationReason('') }}>\r\n                <Dialog.Portal>\r\n                    <Dialog.Overlay className=\"fixed inset-0 bg-black/40 z-50\" />\r\n                    <Dialog.Content className=\"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white p-6 rounded-2xl shadow-2xl z-50 w-full max-w-lg outline-none\">\r\n                        <Dialog.Title className=\"text-lg font-bold text-gray-900 mb-2\">Delete Event (Super Admin)</Dialog.Title>\r\n                        <p className=\"text-sm text-gray-700 mb-4\">Only unpublished events can be deleted. The organizer will be notified. Please provide a reason.</p>\r\n                        <textarea value={moderationReason} onChange={(e) => setModerationReason(e.target.value)} className=\"w-full px-3 py-2 border border-gray-300 rounded-lg h-28 text-sm\" placeholder=\"Reason (required)\" />\r\n                        <div className=\"mt-4 flex items-center justify-end gap-2\">\r\n                            <button className=\"px-3 py-2 border border-gray-300 rounded-lg\" onClick={() => { setModerationTargetId(null); setModerationType(null); setModerationReason('') }}>Cancel</button>\r\n                            <button className=\"px-4 py-2 bg-red-600 text-white rounded-lg font-bold hover:bg-red-700\" disabled={!moderationReason.trim()} onClick={() => { if (moderationTargetId) handleDelete(moderationTargetId, moderationReason.trim()); setModerationTargetId(null); setModerationType(null); setModerationReason('') }}>Delete</button>\r\n                        </div>\r\n                    </Dialog.Content>\r\n                </Dialog.Portal>\r\n            </Dialog.Root>\r\n\r\n            <Dialog.Root open={!!moderationTargetId && moderationType === 'unpublish'} onOpenChange={() => { setModerationTargetId(null); setModerationType(null); setModerationReason('') }}>\r\n                <Dialog.Portal>\r\n                    <Dialog.Overlay className=\"fixed inset-0 bg-black/40 z-50\" />\r\n                    <Dialog.Content className=\"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white p-6 rounded-2xl shadow-2xl z-50 w-full max-w-lg outline-none\">\r\n                        <Dialog.Title className=\"text-lg font-bold text-gray-900 mb-2\">Unpublish Event</Dialog.Title>\r\n                        <p className=\"text-sm text-gray-700 mb-4\">Provide a reason for unpublishing. The organizer will be notified.</p>\r\n                        <textarea value={moderationReason} onChange={(e) => setModerationReason(e.target.value)} className=\"w-full px-3 py-2 border border-gray-300 rounded-lg h-28 text-sm\" placeholder=\"Reason (required)\" />\r\n                        <div className=\"mt-4 flex items-center justify-end gap-2\">\r\n                            <button className=\"px-3 py-2 border border-gray-300 rounded-lg\" onClick={() => { setModerationTargetId(null); setModerationType(null); setModerationReason('') }}>Cancel</button>\r\n                            <button className=\"px-4 py-2 bg-yellow-400 text-zinc-900 rounded-lg font-bold hover:bg-yellow-300\" disabled={!moderationReason.trim()} onClick={() => { if (moderationTargetId) handleUnpublish(moderationTargetId, moderationReason.trim()); setModerationTargetId(null); setModerationType(null); setModerationReason('') }}>Unpublish</button>\r\n                        </div>\r\n                    </Dialog.Content>\r\n                </Dialog.Portal>\r\n            </Dialog.Root>\r\n        </>\r\n    )\r\n}\r\n\r\nfunction OrganizerName({ userId }: { userId: string }) {\r\n    const { data } = useSWR(['/profiles', userId], () => getProfileByUserId(userId), {\r\n        revalidateOnFocus: false,\r\n        dedupingInterval: 300000,\r\n    })\r\n    if (!data) {\r\n        return (\r\n            <span className=\"font-mono text-xs bg-gray-100 px-2 py-1 rounded\">\r\n                {userId.slice(0, 8)}...\r\n            </span>\r\n        )\r\n    }\r\n    return <span className=\"text-gray-700 font-medium\">{data.full_name || userId.slice(0, 8) + '...'}</span>\r\n}\r\n\r\n// Helper component to avoid React fragment key warning with map\r\nconst  = ({ children }: { children: React.ReactNode }) => <>{children}</>\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\components\\admin\\OrganizationsTable.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'EyeOpenIcon' is defined but never used.","line":6,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":16}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { useState } from 'react'\r\nimport { OrganizationResponse } from '@/services/api.types'\r\nimport {\r\n    EyeOpenIcon,\r\n    TrashIcon,\r\n    ChevronDownIcon,\r\n    ChevronUpIcon,\r\n    ImageIcon,\r\n    Cross2Icon,\r\n    GlobeIcon,\r\n    SewingPinFilledIcon\r\n} from '@radix-ui/react-icons'\r\nimport * as Dialog from '@radix-ui/react-dialog'\r\nimport Image from 'next/image'\r\nimport { ConfirmationModal } from '@/components/ui/ConfirmationModal'\r\n\r\ninterface OrganizationsTableProps {\r\n    organizations: OrganizationResponse[]\r\n    onDelete: (orgId: string) => void\r\n}\r\n\r\nexport function OrganizationsTable({ organizations, onDelete }: OrganizationsTableProps) {\r\n    const [expandedOrgId, setExpandedOrgId] = useState<string | null>(null)\r\n    const [previewImage, setPreviewImage] = useState<string | null>(null)\r\n    const [deleteOrgId, setDeleteOrgId] = useState<string | null>(null)\r\n\r\n    const toggleExpand = (orgId: string) => {\r\n        setExpandedOrgId(expandedOrgId === orgId ? null : orgId)\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className=\"w-full overflow-x-auto bg-white rounded-lg shadow border border-gray-200\">\r\n                <table className=\"min-w-full divide-y divide-gray-200\">\r\n                    <thead className=\"bg-gray-50\">\r\n                        <tr>\r\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-10\"></th>\r\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Name</th>\r\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Type</th>\r\n                            <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Visibility</th>\r\n                            <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                        {organizations.map((org) => (\r\n                            < key={org.id}>\r\n                                <tr\r\n                                    onClick={() => toggleExpand(org.id)}\r\n                                    className={`hover:bg-gray-50/50 transition-colors cursor-pointer ${expandedOrgId === org.id ? 'bg-gray-50' : ''}`}\r\n                                >\r\n                                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                        <button\r\n                                            onClick={(e) => { e.stopPropagation(); toggleExpand(org.id); }}\r\n                                            className=\"p-1 hover:bg-gray-200 rounded-full transition-colors\"\r\n                                        >\r\n                                            {expandedOrgId === org.id ? (\r\n                                                <ChevronUpIcon className=\"w-4 h-4 text-gray-500\" />\r\n                                            ) : (\r\n                                                <ChevronDownIcon className=\"w-4 h-4 text-gray-500\" />\r\n                                            )}\r\n                                        </button>\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                        <div className=\"flex items-center gap-3\">\r\n                                            {org.logo_url ? (\r\n                                                <button\r\n                                                    onClick={(e) => { e.stopPropagation(); setPreviewImage(org.logo_url || null); }}\r\n                                                    className=\"relative group flex-shrink-0\"\r\n                                                >\r\n                                                    <Image\r\n                                                        src={org.logo_url}\r\n                                                        alt=\"\"\r\n                                                        width={40}\r\n                                                        height={40}\r\n                                                        unoptimized\r\n                                                        className=\"w-10 h-10 rounded-lg object-cover bg-gray-100 group-hover:opacity-80 transition-opacity\"\r\n                                                    />\r\n                                                    <div className=\"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity\">\r\n                                                        <ImageIcon className=\"w-4 h-4 text-white drop-shadow-md\" />\r\n                                                    </div>\r\n                                                </button>\r\n                                            ) : (\r\n                                                <div className=\"w-10 h-10 rounded-lg bg-gray-100 flex items-center justify-center flex-shrink-0\">\r\n                                                    <ImageIcon className=\"w-4 h-4 text-gray-400\" />\r\n                                                </div>\r\n                                            )}\r\n                                            <div className=\"text-sm font-medium text-gray-900\">{org.name}</div>\r\n                                        </div>\r\n                                    </td>\r\n                                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500 capitalize\">{org.type}</td>\r\n                                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500 capitalize\">{org.visibility}</td>\r\n                                    <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\r\n                                        <div className=\"flex justify-end space-x-2\" onClick={(e) => e.stopPropagation()}>\r\n                                            <button\r\n                                                onClick={() => setDeleteOrgId(org.id)}\r\n                                                className=\"text-red-600 hover:text-red-900 p-2 hover:bg-red-50 rounded-lg transition-colors\"\r\n                                                title=\"Delete Organization\"\r\n                                            >\r\n                                                <TrashIcon className=\"w-5 h-5\" />\r\n                                            </button>\r\n                                        </div>\r\n                                    </td>\r\n                                </tr>\r\n                                {expandedOrgId === org.id && (\r\n                                    <tr className=\"bg-gray-50\">\r\n                                        <td colSpan={5} className=\"px-6 py-4\">\r\n                                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 text-sm\">\r\n                                                <div>\r\n                                                    <h4 className=\"font-semibold text-gray-900 mb-2\">Description</h4>\r\n                                                    <p className=\"text-gray-600 whitespace-pre-wrap\">{org.description || 'No description provided.'}</p>\r\n\r\n                                                    {org.cover_url && (\r\n                                                        <div className=\"mt-4\">\r\n                                                            <h4 className=\"font-semibold text-gray-900 mb-2\">Cover Image</h4>\r\n                                                            <button\r\n                                                                onClick={(e) => { e.stopPropagation(); setPreviewImage(org.cover_url || null); }}\r\n                                                                className=\"relative group block w-full max-w-xs overflow-hidden rounded-lg border border-gray-200\"\r\n                                                            >\r\n                                                                <Image\r\n                                                                    src={org.cover_url}\r\n                                                                    alt=\"Cover\"\r\n                                                                    width={512}\r\n                                                                    height={128}\r\n                                                                    unoptimized\r\n                                                                    className=\"w-full h-32 object-cover group-hover:opacity-90 transition-opacity\"\r\n                                                                />\r\n                                                                <div className=\"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity bg-black/10\">\r\n                                                                    <ImageIcon className=\"w-6 h-6 text-white drop-shadow-md\" />\r\n                                                                </div>\r\n                                                            </button>\r\n                                                        </div>\r\n                                                    )}\r\n                                                </div>\r\n                                                <div className=\"space-y-4\">\r\n                                                    <div>\r\n                                                        <h4 className=\"font-semibold text-gray-900 mb-1 flex items-center gap-2\">\r\n                                                            <GlobeIcon className=\"w-4 h-4\" /> Website\r\n                                                        </h4>\r\n                                                        {org.website_url ? (\r\n                                                            <a href={org.website_url} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-blue-600 hover:underline\">\r\n                                                                {org.website_url}\r\n                                                            </a>\r\n                                                        ) : (\r\n                                                            <p className=\"text-gray-500\">Not provided</p>\r\n                                                        )}\r\n                                                    </div>\r\n                                                    <div>\r\n                                                        <h4 className=\"font-semibold text-gray-900 mb-1 flex items-center gap-2\">\r\n                                                            <SewingPinFilledIcon className=\"w-4 h-4\" /> Location\r\n                                                        </h4>\r\n                                                        <p className=\"text-gray-600\">{org.location || 'Not provided'}</p>\r\n                                                    </div>\r\n                                                    <div>\r\n                                                        <h4 className=\"font-semibold text-gray-900 mb-1\">Organization ID</h4>\r\n                                                        <p className=\"font-mono text-xs text-gray-500\">{org.id}</p>\r\n                                                    </div>\r\n                                                    <div>\r\n                                                        <h4 className=\"font-semibold text-gray-900 mb-1\">Owner ID</h4>\r\n                                                        <p className=\"font-mono text-xs text-gray-500\">{org.owner_id}</p>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </td>\r\n                                    </tr>\r\n                                )}\r\n                            </>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n\r\n            <Dialog.Root open={!!previewImage} onOpenChange={() => setPreviewImage(null)}>\r\n                <Dialog.Portal>\r\n                    <Dialog.Overlay className=\"fixed inset-0 bg-black/50 z-50 backdrop-blur-sm\" />\r\n                    <Dialog.Content className=\"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-white p-2 rounded-xl shadow-2xl z-50 max-w-3xl max-h-[90vh] w-full outline-none\">\r\n                        <Dialog.Title className=\"sr-only\">Image Preview</Dialog.Title>\r\n                        <Dialog.Description className=\"sr-only\">\r\n                            Full size preview of the organization image\r\n                        </Dialog.Description>\r\n                        {previewImage && (\r\n                            <Image\r\n                                src={previewImage}\r\n                                alt=\"Preview\"\r\n                                width={1200}\r\n                                height={800}\r\n                                unoptimized\r\n                                className=\"w-full h-full object-contain rounded-lg\"\r\n                            />\r\n                        )}\r\n                        <Dialog.Close className=\"absolute top-4 right-4 p-2 bg-white/80 rounded-full hover:bg-white transition-colors\">\r\n                            <Cross2Icon className=\"w-5 h-5 text-gray-900\" />\r\n                        </Dialog.Close>\r\n                    </Dialog.Content>\r\n                </Dialog.Portal>\r\n            </Dialog.Root>\r\n            <ConfirmationModal\r\n                isOpen={!!deleteOrgId}\r\n                onClose={() => setDeleteOrgId(null)}\r\n                onConfirm={() => { if (deleteOrgId) onDelete(deleteOrgId); setDeleteOrgId(null) }}\r\n                title=\"Delete Organization\"\r\n                message=\"Delete this organization?\"\r\n                confirmText=\"Delete\"\r\n                cancelText=\"Cancel\"\r\n                variant=\"danger\"\r\n            />\r\n        </>\r\n    )\r\n}\r\n\r\nconst  = ({ children }: { children: React.ReactNode }) => <>{children}</>\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\components\\admin\\UsersTable.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_onVerifyExpert' is defined but never used.","line":29,"column":76,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":91},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_onRevokeExpert' is defined but never used.","line":29,"column":109,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":124}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport { UserResponse } from '@/services/api.types'\r\nimport {\r\n    CheckIcon,\r\n    Cross2Icon,\r\n    ChevronDownIcon,\r\n    ChevronUpIcon,\r\n    PersonIcon\r\n} from '@radix-ui/react-icons'\r\nimport { useEffect, useState } from 'react'\r\nimport { ConfirmationModal } from '@/components/ui/ConfirmationModal'\r\nimport { format } from 'date-fns'\r\nimport { getProfileByUserId } from '@/services/api'\r\nimport { adminService } from '@/services/admin.service'\r\n\r\ninterface UsersTableProps {\r\n    users: UserResponse[]\r\n    onSuspend: (userId: string) => void\r\n    onActivate: (userId: string) => void\r\n    onVerifyExpert: (userId: string) => void\r\n    onRevokeExpert: (userId: string) => void\r\n    onApprovePending?: (userId: string) => void\r\n    onRejectPending?: (userId: string) => void\r\n    onAssignRole?: (userId: string, roleName: string) => void\r\n    onRemoveRole?: (userId: string, roleName: string) => void\r\n}\r\n\r\nexport function UsersTable({ users, onSuspend, onActivate, onVerifyExpert: _onVerifyExpert, onRevokeExpert: _onRevokeExpert, onApprovePending, onRejectPending, onAssignRole, onRemoveRole }: UsersTableProps) {\r\n    const [expandedUserId, setExpandedUserId] = useState<string | null>(null)\r\n    const [selectedRoles, setSelectedRoles] = useState<Record<string, string>>({})\r\n    const [suspendUserId, setSuspendUserId] = useState<string | null>(null)\r\n    const [rejectPendingUserId, setRejectPendingUserId] = useState<string | null>(null)\r\n    const [activateUserId, setActivateUserId] = useState<string | null>(null)\r\n    const [removeRoleTarget, setRemoveRoleTarget] = useState<{ userId: string; role: string } | null>(null)\r\n\r\n    const [profiles, setProfiles] = useState<Record<string, import('@/services/api.types').ProfileResponse>>({})\r\n    const [onboardingSettings, setOnboardingSettings] = useState<{ enabled_fields: string[]; required_fields: string[] } | null>(null)\r\n\r\n    useEffect(() => {\r\n        ; (async () => {\r\n            try {\r\n                const s = await adminService.getOnboardingSettings()\r\n                setOnboardingSettings(s)\r\n            } catch { }\r\n        })()\r\n    }, [])\r\n\r\n    const fetchProfile = async (userId: string) => {\r\n        if (profiles[userId]) return\r\n        try {\r\n            const p = await getProfileByUserId(userId)\r\n            setProfiles(prev => ({ ...prev, [userId]: p }))\r\n        } catch { }\r\n    }\r\n\r\n    const toggleExpand = (userId: string) => {\r\n        const next = expandedUserId === userId ? null : userId\r\n        setExpandedUserId(next)\r\n        if (next) fetchProfile(next)\r\n    }\r\n\r\n    const computeCompleteness = (p?: import('@/services/api.types').ProfileResponse) => {\r\n        if (!p || !onboardingSettings) return { percent: 0, missing: [] as string[] }\r\n        const map: Record<string, unknown> = {\r\n            full_name: p.full_name,\r\n            bio: p.bio,\r\n            linkedin_url: p.linkedin_url,\r\n            github_url: p.github_url,\r\n            instagram_url: p.instagram_url,\r\n            twitter_url: p.twitter_url,\r\n            website_url: p.website_url,\r\n        }\r\n        const enabled = onboardingSettings.enabled_fields || []\r\n        const required = onboardingSettings.required_fields || []\r\n        const filledCount = enabled.reduce((acc, key) => acc + (map[key] ? 1 : 0), 0)\r\n        const percent = enabled.length > 0 ? Math.round((filledCount / enabled.length) * 100) : 0\r\n        const missing = required.filter((key) => !map[key])\r\n        return { percent, missing }\r\n    }\r\n\r\n    return (\r\n        <div className=\"w-full overflow-x-auto bg-white rounded-lg shadow border border-gray-200\">\r\n            <table className=\"min-w-full divide-y divide-gray-200\">\r\n                <thead className=\"bg-gray-50\">\r\n                    <tr>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-10\"></th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">User</th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Roles</th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Status</th>\r\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">Verified</th>\r\n                        <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">Actions</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                    {users.map((user) => (\r\n                        < key={user.id}>\r\n                            <tr\r\n                                onClick={() => toggleExpand(user.id)}\r\n                                className={`hover:bg-gray-50/50 transition-colors cursor-pointer ${expandedUserId === user.id ? 'bg-gray-50' : ''}`}\r\n                            >\r\n                                <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                    <button\r\n                                        onClick={(e) => { e.stopPropagation(); toggleExpand(user.id); }}\r\n                                        className=\"p-1 hover:bg-gray-200 rounded-full transition-colors\"\r\n                                    >\r\n                                        {expandedUserId === user.id ? (\r\n                                            <ChevronUpIcon className=\"w-4 h-4 text-gray-500\" />\r\n                                        ) : (\r\n                                            <ChevronDownIcon className=\"w-4 h-4 text-gray-500\" />\r\n                                        )}\r\n                                    </button>\r\n                                </td>\r\n                                <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                        <div className=\"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center flex-shrink-0\">\r\n                                            <PersonIcon className=\"w-4 h-4 text-gray-500\" />\r\n                                        </div>\r\n                                        <div className=\"text-sm font-medium text-gray-900\">{user.email}</div>\r\n                                    </div>\r\n                                </td>\r\n                                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                                    {Array.isArray(user.roles)\r\n                                        ? (user.roles.map((r) => typeof r === 'string' ? r : r.name).filter(Boolean).join(', ') || '-')\r\n                                        : '-'}\r\n                                </td>\r\n                                <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\r\n                                    <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${user.status === 'active' ? 'bg-green-100 text-green-800' :\r\n                                        user.status === 'suspended' ? 'bg-red-100 text-red-800' : 'bg-gray-100 text-gray-800'\r\n                                        }`}>\r\n                                        {user.status}\r\n                                    </span>\r\n                                </td>\r\n                                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                                    {user.is_verified ? (\r\n                                        <CheckIcon className=\"w-5 h-5 text-green-500\" />\r\n                                    ) : (\r\n                                        <Cross2Icon className=\"w-5 h-5 text-gray-400\" />\r\n                                    )}\r\n                                </td>\r\n                                <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\r\n                                    <div className=\"flex justify-end flex-wrap gap-2\" onClick={(e) => e.stopPropagation()}>\r\n                                        {user.status === 'active' ? (\r\n                                            <button\r\n                                                onClick={() => setSuspendUserId(user.id)}\r\n                                                className=\"text-red-600 hover:text-red-900 font-medium\"\r\n                                            >\r\n                                                Suspend\r\n                                            </button>\r\n                                        ) : (\r\n                                            <button\r\n                                                onClick={() => setActivateUserId(user.id)}\r\n                                                className=\"text-green-600 hover:text-green-900 font-medium\"\r\n                                            >\r\n                                                Activate\r\n                                            </button>\r\n                                        )}\r\n\r\n                                        {/* Pending roles approval controls */}\r\n                                        {Array.isArray(user.roles) && user.roles.map((r) => typeof r === 'string' ? r : r.name).some((n) => typeof n === 'string' && n.endsWith('_pending')) && (\r\n                                            <>\r\n                                                {onApprovePending && (\r\n                                                    <button\r\n                                                        onClick={() => onApprovePending(user.id)}\r\n                                                        className=\"text-blue-600 hover:text-blue-900 font-medium\"\r\n                                                    >\r\n                                                        Approve Pending\r\n                                                    </button>\r\n                                                )}\r\n                                                {onRejectPending && (\r\n                                                    <button\r\n                                                        onClick={() => setRejectPendingUserId(user.id)}\r\n                                                        className=\"text-orange-600 hover:text-orange-900 font-medium\"\r\n                                                    >\r\n                                                        Reject Pending\r\n                                                    </button>\r\n                                                )}\r\n                                            </>\r\n                                        )}\r\n                                    </div>\r\n                                </td>\r\n                            </tr>\r\n                            {expandedUserId === user.id && (\r\n                                <tr className=\"bg-gray-50\">\r\n                                    <td colSpan={6} className=\"px-6 py-4\">\r\n                                        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm\">\r\n                                            <div>\r\n                                                <h4 className=\"font-semibold text-gray-900 mb-2\">User Details</h4>\r\n                                                <div className=\"space-y-2\">\r\n                                                    <div>\r\n                                                        <span className=\"text-gray-500\">User ID:</span>\r\n                                                        <span className=\"ml-2 font-mono text-xs text-gray-700\">{user.id}</span>\r\n                                                    </div>\r\n                                                    <div>\r\n                                                        <span className=\"text-gray-500\">Joined:</span>\r\n                                                        <span className=\"ml-2 text-gray-700\">\r\n                                                            {user.created_at ? format(new Date(user.created_at), 'PPP pp') : 'N/A'}\r\n                                                        </span>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div>\r\n                                                <h4 className=\"font-semibold text-gray-900 mb-2\">Roles & Permissions</h4>\r\n                                                <div className=\"flex flex-wrap gap-2\">\r\n                                                    {Array.isArray(user.roles) && user.roles.length > 0 ? (\r\n                                                        user.roles.map((r) => {\r\n                                                            const name = typeof r === 'string' ? r : r.name\r\n                                                            const key = typeof r === 'string' ? r : (r.id || r.name)\r\n                                                            return (\r\n                                                                <span key={key} className=\"px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs border border-blue-100\">\r\n                                                                    {name}\r\n                                                                </span>\r\n                                                            )\r\n                                                        })\r\n                                                    ) : (\r\n                                                        <span className=\"text-gray-500\">No roles assigned</span>\r\n                                                    )}\r\n                                                </div>\r\n                                                {onAssignRole && onRemoveRole && (\r\n                                                    <div className=\"mt-4 flex flex-col sm:flex-row gap-3 items-start sm:items-center\">\r\n                                                        <select\r\n                                                            value={selectedRoles[user.id] || ''}\r\n                                                            onChange={(e) => setSelectedRoles((prev) => ({ ...prev, [user.id]: e.target.value }))}\r\n                                                            className=\"px-3 py-2 bg-white border border-gray-200 rounded-lg text-gray-900 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all\"\r\n                                                        >\r\n                                                            <option value=\"\">Select role</option>\r\n                                                            <option value=\"admin\">admin</option>\r\n                                                            <option value=\"student\">student</option>\r\n                                                            <option value=\"expert\">expert</option>\r\n                                                            <option value=\"organizer\">organizer</option>\r\n                                                            <option value=\"sponsor\">sponsor</option>\r\n                                                            <option value=\"committee\">committee</option>\r\n                                                            <option value=\"customer_support\">customer_support</option>\r\n                                                            <option value=\"content_moderator\">content_moderator</option>\r\n                                                        </select>\r\n                                                        <div className=\"flex gap-2\">\r\n                                                            <button\r\n                                                                onClick={() => {\r\n                                                                    const role = selectedRoles[user.id]\r\n                                                                    if (role) onAssignRole(user.id, role)\r\n                                                                }}\r\n                                                                className=\"px-3 py-2 text-sm font-medium text-gray-900 bg-white border border-gray-200 rounded-lg hover:bg-gray-50\"\r\n                                                            >\r\n                                                                Assign Role\r\n                                                            </button>\r\n                                                            <button\r\n                                                                onClick={() => {\r\n                                                                    const role = selectedRoles[user.id]\r\n                                                                    if (role) setRemoveRoleTarget({ userId: user.id, role })\r\n                                                                }}\r\n                                                                className=\"px-3 py-2 text-sm font-medium text-red-600 bg-white border border-red-200 rounded-lg hover:bg-red-50\"\r\n                                                            >\r\n                                                                Remove Role\r\n                                                            </button>\r\n                                                        </div>\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n                                            <div>\r\n                                                <h4 className=\"font-semibold text-gray-900 mb-2\">Onboarding Completeness</h4>\r\n                                                {(() => {\r\n                                                    const p = profiles[user.id]\r\n                                                    const { percent, missing } = computeCompleteness(p)\r\n                                                    return (\r\n                                                        <div className=\"space-y-3\">\r\n                                                            <div className=\"h-3 bg-gray-200 rounded-full overflow-hidden\">\r\n                                                                <div className=\"h-full bg-green-500\" style={{ width: `${percent}%` }}></div>\r\n                                                            </div>\r\n                                                            <div className=\"text-gray-700 font-medium\">{percent}% complete</div>\r\n                                                            {missing.length > 0 && (\r\n                                                                <div>\r\n                                                                    <div className=\"text-xs font-bold text-gray-500 uppercase tracking-wider mb-1\">Missing Required</div>\r\n                                                                    <div className=\"flex flex-wrap gap-2\">\r\n                                                                        {missing.map((m) => (\r\n                                                                            <span key={m} className=\"px-2 py-1 bg-orange-50 text-orange-700 rounded text-xs border border-orange-100\">{m}</span>\r\n                                                                        ))}\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            )}\r\n                                                        </div>\r\n                                                    )\r\n                                                })()}\r\n                                            </div>\r\n                                        </div>\r\n                                    </td>\r\n                                </tr>\r\n                            )}\r\n                        </>\r\n                    ))}\r\n                </tbody>\r\n            </table>\r\n            <ConfirmationModal\r\n                isOpen={!!suspendUserId}\r\n                onClose={() => setSuspendUserId(null)}\r\n                onConfirm={() => { if (suspendUserId) onSuspend(suspendUserId); setSuspendUserId(null) }}\r\n                title=\"Suspend User\"\r\n                message=\"Suspend this user?\"\r\n                confirmText=\"Suspend\"\r\n                cancelText=\"Cancel\"\r\n                variant=\"danger\"\r\n            />\r\n            <ConfirmationModal\r\n                isOpen={!!activateUserId}\r\n                onClose={() => setActivateUserId(null)}\r\n                onConfirm={() => { if (activateUserId) onActivate(activateUserId); setActivateUserId(null) }}\r\n                title=\"Activate User\"\r\n                message=\"Reactivate this user and restore access?\"\r\n                confirmText=\"Activate\"\r\n                cancelText=\"Cancel\"\r\n                variant=\"primary\"\r\n            />\r\n            <ConfirmationModal\r\n                isOpen={!!rejectPendingUserId}\r\n                onClose={() => setRejectPendingUserId(null)}\r\n                onConfirm={() => { if (rejectPendingUserId && onRejectPending) onRejectPending(rejectPendingUserId); setRejectPendingUserId(null) }}\r\n                title=\"Reject Pending Roles\"\r\n                message=\"Reject all pending role(s) for this user?\"\r\n                confirmText=\"Reject\"\r\n                cancelText=\"Cancel\"\r\n                variant=\"danger\"\r\n            />\r\n            <ConfirmationModal\r\n                isOpen={!!removeRoleTarget}\r\n                onClose={() => setRemoveRoleTarget(null)}\r\n                onConfirm={() => { if (removeRoleTarget && onRemoveRole) onRemoveRole(removeRoleTarget.userId, removeRoleTarget.role); setRemoveRoleTarget(null) }}\r\n                title=\"Remove Role\"\r\n                message={removeRoleTarget ? `Remove role: ${removeRoleTarget.role}?` : ''}\r\n                confirmText=\"Remove\"\r\n                cancelText=\"Cancel\"\r\n                variant=\"danger\"\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nconst  = ({ children }: { children: React.ReactNode }) => <>{children}</>\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\components\\auth\\FormButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\components\\auth\\FormInput.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\components\\dashboard\\DashboardProModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\components\\event\\BookExpertModal.tsx","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":91,"column":33,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":91,"endColumn":36,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3124,3127],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3124,3127],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\components\\modals\\DeleteEventModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\components\\onboarding\\ProfileForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\components\\onboarding\\RoleSelector.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\components\\ui\\AppNavbar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\components\\ui\\Avatar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\components\\ui\\Button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\components\\ui\\Card.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\components\\ui\\ConfirmationModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\components\\ui\\DataTable.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\components\\ui\\EmptyState.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\components\\ui\\EventBadge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\components\\ui\\EventCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'formatDate' is assigned a value but never used.","line":7,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react'\r\nimport Link from 'next/link'\r\nimport Image from 'next/image'\r\nimport { EventDetails } from '@/services/api.types'\r\nimport { Avatar } from './Avatar'\r\n\r\nconst formatDate = (dateString: string) => {\r\n    return new Date(dateString).toLocaleDateString('en-US', {\r\n        month: 'short',\r\n        day: 'numeric',\r\n        year: 'numeric',\r\n        hour: 'numeric',\r\n        minute: 'numeric',\r\n    })\r\n}\r\n\r\ninterface EventCardProps {\r\n    event: EventDetails\r\n    className?: string\r\n}\r\n\r\nexport const EventCard: React.FC<EventCardProps> = ({ event, className = '' }) => {\r\n    const startDate = new Date(event.start_datetime)\r\n\r\n    return (\r\n        <Link href={`/events/${event.id}`} className={`block h-full ${className}`}>\r\n            <div className=\"group relative h-[400px] w-full rounded-[2rem] overflow-hidden shadow-sm hover:shadow-xl transition-all duration-500 border border-zinc-100/10\">\r\n                {/* Background Image */}\r\n                {event.cover_url ? (\r\n                    <Image\r\n                        src={event.cover_url}\r\n                        alt={event.title}\r\n                        fill\r\n                        className=\"object-cover transition-transform duration-700 group-hover:scale-110\"\r\n                        sizes=\"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw\"\r\n                        priority={false}\r\n                    />\r\n                ) : (\r\n                    <div className=\"absolute inset-0 w-full h-full bg-zinc-800 flex items-center justify-center\">\r\n                        <span className=\"text-zinc-700 text-9xl font-black opacity-20 select-none uppercase\">{event.title.charAt(0)}</span>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Gradient Overlay */}\r\n                <div className=\"absolute inset-0 bg-gradient-to-t from-black via-black/50 to-transparent opacity-90 transition-opacity duration-300 group-hover:opacity-95\" />\r\n\r\n                {/* Badges - Top Right */}\r\n                <div className=\"absolute top-6 right-6 flex gap-2 z-10 w-full justify-end px-6\">\r\n                    {event.format && (\r\n                        <span className=\"px-3 py-1 rounded-full bg-white/20 backdrop-blur-md text-white border border-white/20 text-[10px] font-bold uppercase tracking-wider shadow-sm\">\r\n                            {event.format.replace('_', ' ')}\r\n                        </span>\r\n                    )}\r\n                    {event.registration_type && (\r\n                        <span className={`px-3 py-1 rounded-full backdrop-blur-md border text-[10px] font-bold uppercase tracking-wider shadow-sm ${event.registration_type === 'free'\r\n                            ? 'bg-green-500/20 text-green-100 border-green-500/30'\r\n                            : 'bg-yellow-500/20 text-yellow-100 border-yellow-500/30'\r\n                            }`}>\r\n                            {event.registration_type}\r\n                        </span>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Content Overlay */}\r\n                <div className=\"absolute bottom-0 left-0 right-0 p-8 flex flex-col justify-end h-full z-10\">\r\n\r\n                    <div className=\"space-y-4 translate-y-4 group-hover:translate-y-0 transition-transform duration-500\">\r\n                        {/* Title */}\r\n                        <h3 className=\"text-2xl font-black text-white leading-tight truncate group-hover:text-yellow-400 transition-colors\">\r\n                            {event.title}\r\n                        </h3>\r\n\r\n                        {/* Meta Info */}\r\n                        <div className=\"flex flex-wrap items-center gap-4 text-zinc-300 text-sm font-medium\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <svg className=\"w-4 h-4 text-yellow-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\r\n                                </svg>\r\n                                {startDate.toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}\r\n                                <span className=\"w-1 h-1 rounded-full bg-zinc-500\"></span>\r\n                                {startDate.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' })}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Organizer - Designed to stand out against image */}\r\n                        <div className=\"pt-4 mt-2 border-t border-white/10 flex items-center justify-between\">\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <Avatar\r\n                                    src={null} // API doesn't seem to return organizer avatar URL yet? check EventDetails. Assuming 'organizer_id' is just an ID. \r\n                                    // If strict type check fails, I might need to adjust.\r\n                                    // Actually, looking at previous code: \r\n                                    // {event.organizer_id ? event.organizer_id.charAt(0).toUpperCase() : '?'}\r\n                                    // It seems we only have ID. So just fallback.\r\n                                    fallback={event.organizer_id ? event.organizer_id.charAt(0).toUpperCase() : '?'}\r\n                                    size=\"sm\"\r\n                                    className=\"bg-white/10 border border-white/20 backdrop-blur-sm text-white\"\r\n                                />\r\n                                <div className=\"text-xs\">\r\n                                    <span className=\"block text-zinc-400 font-medium uppercase tracking-wider text-[10px]\">Hosted by</span>\r\n                                    <span className=\"block text-white font-bold truncate max-w-[120px]\">Event Host</span>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Arrow Icon */}\r\n                            <div className=\"w-8 h-8 rounded-full bg-white/10 backdrop-blur-md flex items-center justify-center opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-x-4 group-hover:translate-x-0\">\r\n                                <svg className=\"w-4 h-4 text-white\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M14 5l7 7m0 0l-7 7m7-7H3\" />\r\n                                </svg>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </Link>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\components\\ui\\EventHeroCard.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":33,"column":13,"nodeType":"JSXOpeningElement","endLine":38,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport React, { useState } from 'react'\r\nimport { EventDetails } from '@/services/api.types'\r\nimport { format } from 'date-fns'\r\nimport { ImagePreviewModal } from '@/components/ui/ImagePreviewModal'\r\n\r\ninterface EventHeroCardProps {\r\n    event: EventDetails\r\n    enableImagePreview?: boolean\r\n}\r\n\r\nexport function EventHeroCard({ event, enableImagePreview }: EventHeroCardProps) {\r\n    const startDate = new Date(event.start_datetime)\r\n    const allowedHosts = new Set(['res.cloudinary.com', 'ui-avatars.com', 'picsum.photos'])\r\n    const pickCover = () => {\r\n        const url = event.cover_url || ''\r\n        try {\r\n            const u = new URL(url)\r\n            if (allowedHosts.has(u.hostname)) return url\r\n        } catch { }\r\n        return `https://ui-avatars.com/api/?name=${encodeURIComponent(event.title)}&background=random&size=1200`\r\n    }\r\n    const coverUrl = pickCover()\r\n    const [previewImage, setPreviewImage] = useState<string | null>(null)\r\n\r\n    const handlePreview = () => {\r\n        if (enableImagePreview && coverUrl) setPreviewImage(coverUrl)\r\n    }\r\n\r\n    return (\r\n        <div className=\"w-full relative h-[420px] rounded-[2.5rem] overflow-hidden\">\r\n            <img\r\n                src={coverUrl}\r\n                alt={event.title}\r\n                className=\"absolute inset-0 w-full h-full object-cover\"\r\n                onClick={handlePreview}\r\n            />\r\n            <div className=\"absolute inset-0 bg-gradient-to-t from-zinc-900 via-zinc-900/40 to-transparent\" />\r\n\r\n            <div className=\"absolute bottom-0 left-0 right-0 p-8 md:p-12\">\r\n                <div className=\"space-y-4 max-w-4xl\">\r\n                    <h2 className=\"text-4xl md:text-5xl lg:text-6xl font-black text-white tracking-tight leading-tight truncate\">\r\n                        {event.title}\r\n                    </h2>\r\n                    <div className=\"flex flex-wrap items-center gap-6 text-zinc-200 font-medium text-lg pt-2\">\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <svg className=\"w-5 h-5 text-yellow-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\" />\r\n                            </svg>\r\n                            {format(startDate, 'EEEE, MMMM d, yyyy  h:mm a')}\r\n                        </div>\r\n                        {event.venue_remark && (\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <svg className=\"w-5 h-5 text-yellow-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\" />\r\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n                                </svg>\r\n                                <span className=\"truncate max-w-[250px]\">{event.venue_remark}</span>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <ImagePreviewModal\r\n                isOpen={!!previewImage}\r\n                imageUrl={previewImage}\r\n                onClose={() => setPreviewImage(null)}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\components\\ui\\ExpertCard.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":21,"column":33,"nodeType":"JSXOpeningElement","endLine":21,"endColumn":126}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport React, { useState } from 'react'\r\nimport { ProfileResponse } from '@/services/api.types'\r\nimport { BookExpertModal } from '@/components/event/BookExpertModal'\r\n\r\ninterface ExpertCardProps {\r\n    expert: ProfileResponse\r\n}\r\n\r\nexport function ExpertCard({ expert }: ExpertCardProps) {\r\n    const [isBookingOpen, setIsBookingOpen] = useState(false)\r\n\r\n    return (\r\n        <>\r\n            <div className=\"bg-white border border-gray-100 rounded-2xl p-6 shadow-sm hover:shadow-md transition-shadow\">\r\n                <div className=\"flex items-start justify-between gap-4\">\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <div className=\"w-16 h-16 rounded-full bg-gray-200 overflow-hidden flex-shrink-0\">\r\n                            {expert.avatar_url ? (\r\n                                <img src={expert.avatar_url} alt={expert.full_name} className=\"w-full h-full object-cover\" />\r\n                            ) : (\r\n                                <div className=\"w-full h-full flex items-center justify-center text-gray-400 text-xl font-bold\">\r\n                                    {expert.full_name.charAt(0)}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                        <div>\r\n                            <h3 className=\"font-bold text-lg text-gray-900\">{expert.full_name}</h3>\r\n                            <p className=\"text-sm text-yellow-600 font-medium\">{expert.title || 'Expert'}</p>\r\n                            <div className=\"flex items-center gap-1 mt-1\">\r\n                                <span className=\"text-yellow-400\"></span>\r\n                                <span className=\"text-sm font-bold text-gray-700\">{expert.average_rating?.toFixed(1) || '0.0'}</span>\r\n                                <span className=\"text-xs text-gray-500\">({expert.reviews_count || 0} reviews)</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"mt-4\">\r\n                    <div className=\"text-sm text-gray-600 line-clamp-2\">{expert.bio || 'No bio available.'}</div>\r\n                </div>\r\n\r\n                {expert.availability && (\r\n                    <div className=\"mt-4 flex items-center gap-2 text-xs text-green-700 bg-green-50 px-3 py-2 rounded-lg\">\r\n                        <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" /></svg>\r\n                        <span>Available: {expert.availability}</span>\r\n                    </div>\r\n                )}\r\n\r\n                <div className=\"mt-6\">\r\n                    <button\r\n                        onClick={() => setIsBookingOpen(true)}\r\n                        className=\"w-full py-2.5 rounded-xl bg-gray-900 text-white text-sm font-bold hover:bg-gray-800 transition-colors\"\r\n                    >\r\n                        Book Session\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <BookExpertModal\r\n                isOpen={isBookingOpen}\r\n                onClose={() => setIsBookingOpen(false)}\r\n                expert={expert}\r\n                onSuccess={() => setIsBookingOpen(false)}\r\n            />\r\n        </>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\components\\ui\\FormField.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\components\\ui\\ImagePreviewModal.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":40,"column":17,"nodeType":"JSXOpeningElement","endLine":45,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\"\r\n\r\nimport React, { useEffect } from 'react'\r\nimport { createPortal } from 'react-dom'\r\n\r\ninterface ImagePreviewModalProps {\r\n    isOpen: boolean\r\n    imageUrl: string | null\r\n    onClose: () => void\r\n}\r\n\r\nexport function ImagePreviewModal({ isOpen, imageUrl, onClose }: ImagePreviewModalProps) {\r\n    useEffect(() => {\r\n        const handleEsc = (e: KeyboardEvent) => {\r\n            if (e.key === 'Escape') onClose()\r\n        }\r\n        if (isOpen) window.addEventListener('keydown', handleEsc)\r\n        return () => window.removeEventListener('keydown', handleEsc)\r\n    }, [isOpen, onClose])\r\n\r\n    if (!isOpen || !imageUrl) return null\r\n\r\n    // Portal to body to ensure it's on top of everything\r\n    if (typeof window === 'undefined') return null\r\n\r\n    return createPortal(\r\n        <div\r\n            className=\"fixed inset-0 z-[9999] flex items-center justify-center bg-black/80 backdrop-blur-sm animate-fadeIn\"\r\n            onClick={onClose}\r\n        >\r\n            <div className=\"relative max-w-5xl max-h-[90vh] p-4 animate-scaleIn\">\r\n                <button\r\n                    onClick={onClose}\r\n                    className=\"absolute -top-12 right-0 text-white hover:text-gray-300 transition-colors p-2\"\r\n                >\r\n                    <svg className=\"w-8 h-8\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\r\n                    </svg>\r\n                </button>\r\n                <img\r\n                    src={imageUrl}\r\n                    alt=\"Preview\"\r\n                    className=\"max-w-full max-h-[85vh] object-contain rounded-lg shadow-2xl\"\r\n                    onClick={(e) => e.stopPropagation()}\r\n                />\r\n            </div>\r\n        </div>,\r\n        document.body\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\components\\ui\\LoadingBackdrop.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\components\\ui\\Navbar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\components\\ui\\NotificationBell.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\components\\ui\\NotificationBell.tsx:28:9\n  26 |     useEffect(() => {\n  27 |          \n> 28 |         loadNotifications()\n     |         ^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  29 |         // Poll every minute\n  30 |         const interval = setInterval(loadNotifications, 60000)\n  31 |         return () => clearInterval(interval)","line":28,"column":9,"nodeType":null,"endLine":28,"endColumn":26}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client'\r\n\r\nimport React, { useCallback, useEffect, useState } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport { getNotifications, NotificationItem, markNotificationRead, markAllNotificationsRead } from '@/services/api'\r\nimport { Popover, Transition } from '@headlessui/react'\r\nimport { Fragment } from 'react'\r\nimport { formatDistanceToNow } from 'date-fns'\r\nimport { toast } from 'react-hot-toast'\r\n\r\nexport function NotificationBell() {\r\n    const [notifications, setNotifications] = useState<NotificationItem[]>([])\r\n    const [unreadCount, setUnreadCount] = useState(0)\r\n    const router = useRouter()\r\n\r\n    const loadNotifications = useCallback(async () => {\r\n        try {\r\n            const data = await getNotifications()\r\n            setNotifications(data)\r\n            setUnreadCount(data.filter(n => !n.read).length)\r\n        } catch {\r\n            console.error('Failed to load notifications')\r\n        }\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n         \r\n        loadNotifications()\r\n        // Poll every minute\r\n        const interval = setInterval(loadNotifications, 60000)\r\n        return () => clearInterval(interval)\r\n    }, [loadNotifications])\r\n\r\n    const handleNotificationClick = async (notification: NotificationItem, close: () => void) => {\r\n        close()\r\n        if (!notification.read) {\r\n            try {\r\n                await markNotificationRead(notification.id)\r\n                loadNotifications()\r\n            } catch { }\r\n        }\r\n        router.push('/notifications')\r\n    }\r\n\r\n    const handleMarkAllRead = async () => {\r\n        // Optimistic update\r\n        setNotifications(prev => prev.map(n => ({ ...n, read: true })))\r\n        setUnreadCount(0)\r\n\r\n        try {\r\n            await markAllNotificationsRead()\r\n            toast.success('All marked as read')\r\n            // Don't reload immediately to preserve the optimistic state since API is mock\r\n            // loadNotifications() \r\n        } catch {\r\n            toast.error('Failed to mark all as read')\r\n            loadNotifications() // Revert on error\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Popover className=\"relative\">\r\n            {({ open, close }) => (\r\n                <>\r\n                    <Popover.Button className={`p-2 rounded-full text-zinc-400 hover:text-zinc-900 hover:bg-zinc-100 transition-all focus:outline-none ${open ? 'text-zinc-900 bg-zinc-100' : ''}`}>\r\n                        <span className=\"sr-only\">View notifications</span>\r\n                        {/* Wrapper to position dot relative to icon */}\r\n                        <div className=\"relative\">\r\n                            <svg className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9\" />\r\n                            </svg>\r\n                            {unreadCount > 0 && (\r\n                                <span className=\"absolute -top-0.5 -right-0.5 flex h-4 w-4 items-center justify-center rounded-full bg-red-500 text-[9px] font-bold text-white ring-2 ring-white\">\r\n                                    {unreadCount > 9 ? '9+' : unreadCount}\r\n                                </span>\r\n                            )}\r\n                        </div>\r\n                    </Popover.Button>\r\n                    <Transition\r\n                        as={Fragment}\r\n                        enter=\"transition ease-out duration-200\"\r\n                        enterFrom=\"opacity-0 translate-y-1\"\r\n                        enterTo=\"opacity-100 translate-y-0\"\r\n                        leave=\"transition ease-in duration-150\"\r\n                        leaveFrom=\"opacity-100 translate-y-0\"\r\n                        leaveTo=\"opacity-0 translate-y-1\"\r\n                    >\r\n                        <Popover.Panel className=\"absolute right-0 z-50 mt-2 w-96 transform px-2 sm:px-0\">\r\n                            <div className=\"overflow-hidden rounded-2xl shadow-xl ring-1 ring-black ring-opacity-5\">\r\n                                <div className=\"relative flex flex-col gap-0 bg-white p-0 max-h-[500px] overflow-y-auto\">\r\n\r\n                                    {/* Header */}\r\n                                    <div className=\"flex items-center justify-between p-4 border-b border-zinc-100 bg-white sticky top-0 z-10\">\r\n                                        <h3 className=\"text-sm font-bold text-zinc-900\">Notifications</h3>\r\n                                        {unreadCount > 0 && (\r\n                                            <button\r\n                                                onClick={handleMarkAllRead}\r\n                                                className=\"text-xs font-bold text-blue-600 hover:text-blue-700\"\r\n                                            >\r\n                                                Mark all read\r\n                                            </button>\r\n                                        )}\r\n                                    </div>\r\n\r\n                                    {/* List */}\r\n                                    <div className=\"p-2 space-y-1\">\r\n                                        {notifications.length === 0 ? (\r\n                                            <div className=\"text-center py-8\">\r\n                                                <p className=\"text-sm text-zinc-500\">No notifications yet.</p>\r\n                                            </div>\r\n                                        ) : (\r\n                                            notifications.slice(0, 5).map((item) => (\r\n                                                <button\r\n                                                    key={item.id}\r\n                                                    onClick={() => handleNotificationClick(item, close)}\r\n                                                    className={`group w-full text-left p-3 rounded-xl transition-all ${!item.read ? 'bg-yellow-50 hover:bg-yellow-100/50' : 'hover:bg-zinc-50'}`}\r\n                                                >\r\n                                                    <div className=\"flex justify-between items-start mb-1\">\r\n                                                        <p className={`text-sm font-bold ${!item.read ? 'text-zinc-900' : 'text-zinc-600'}`}>\r\n                                                            {item.title}\r\n                                                        </p>\r\n                                                        <span className=\"text-[10px] text-zinc-400 whitespace-nowrap ml-2\">\r\n                                                            {formatDistanceToNow(new Date(item.created_at), { addSuffix: true }).replace('about ', '')}\r\n                                                        </span>\r\n                                                    </div>\r\n                                                    <p className={`text-xs line-clamp-2 ${!item.read ? 'text-zinc-800' : 'text-zinc-500'}`}>\r\n                                                        {item.message}\r\n                                                    </p>\r\n                                                </button>\r\n                                            ))\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Footer */}\r\n                                <div className=\"bg-zinc-50 p-3 border-t border-zinc-100\">\r\n                                    <button\r\n                                        onClick={() => {\r\n                                            close()\r\n                                            router.push('/notifications')\r\n                                        }}\r\n                                        className=\"w-full rounded-xl px-4 py-2.5 bg-white border border-zinc-200 text-sm font-bold text-zinc-600 hover:text-zinc-900 hover:bg-zinc-100 transition-all shadow-sm\"\r\n                                    >\r\n                                        View all notifications\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </Popover.Panel>\r\n                    </Transition>\r\n                </>\r\n            )}\r\n        </Popover>\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\components\\ui\\Pagination.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\components\\ui\\SearchModal.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback received a function whose dependencies are unknown. Pass an inline function instead.","line":26,"column":29,"nodeType":"Identifier","endLine":26,"endColumn":40,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\components\\ui\\Skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\hooks\\useAuthGuard.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\hooks\\useEvent.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\hooks\\useUser.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\lib\\auth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\lib\\constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\lib\\utils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\services\\admin.service.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\services\\api.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\services\\api.types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\teowz\\OneDrive\\Documents\\GitHub\\ATAS_FYP_event\\frontend\\tailwind.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]